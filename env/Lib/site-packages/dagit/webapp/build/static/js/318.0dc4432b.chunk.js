"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[318],{96391:function(e,n,t){t.d(n,{i:function(){return s}});var r=t(7838),i=t(325),o=t(39061),a=t(32289),s=function(e){var n=e.edges,t=e.highlighted,o=e.strokeWidth,s=void 0===o?4:o,c=e.baseColor,d=void 0===c?r.w.KeylineGray:c;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l,{color:d,edges:n,strokeWidth:s}),(0,a.jsx)(l,{color:r.w.Blue500,edges:n.filter((function(e){var n=e.fromId,r=e.toId;return t===n||t===r})),strokeWidth:s})]})},l=i.memo((function(e){var n=e.edges,t=e.color,r=e.strokeWidth;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrow".concat(btoa(t)),viewBox:"0 0 8 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:r,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 8 5 L 0 10 z",fill:t})})}),n.map((function(e,n){return(0,a.jsx)("path",{d:(0,o.cD)({source:e.from,target:e.to}),stroke:t,strokeWidth:r,fill:"none",markerEnd:"url(#arrow".concat(btoa(t),")")},n)}))]})}))},35473:function(e,n,t){t.d(n,{OK:function(){return He},md:function(){return Qe},CZ:function(){return qe}});var r,i,o,a,s=t(47427),l=t(59019),c=t(85358),d=t(19065),u=t(95764),p=t(922),f=t(95550),m=t.n(f),h=t(89646),g=t(17912),x=t(32028),y=t(7838),v=t(50346),j=t(32030),b=t(51550),w=t.n(b),S=t(58891),N=t.n(S),C=t(40839),k=t.n(C),P=t(325),E=t(47678),_=t(52165),I=t(52063),A=t(85532),Z=t(76867),O=t(66956),K=t(2112),M=t(19910),D=t(65164),z=t(50741),T=t(96391),F=t(99500),L=t(73701),R=t(3159),G=t(79082),$=t(57872),B=t(80339),V=t(37099),J=t(32289),U=function(e){var n=e.pipelineSelector,t=(0,L.a)(q,{partialRefetch:!0,variables:{pipelineSelector:n}}),r=n.repositoryName,i=n.repositoryLocationName,o=(0,V.kQ)(r,i);return(0,J.jsx)(z.g,{queryResult:t,children:function(e){var n=e.pipelineSnapshotOrError;return"PipelineSnapshot"!==n.__typename?(0,J.jsx)($.Q,{isGraph:!0,result:n,repoAddress:o}):(0,J.jsx)(B.S,{container:n,repoAddress:o})}})},q=(0,R.Ps)(r||(r=(0,F.Z)(["\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),B.q,G.B),Q=t(9),H=t(11540),Y=t(38376),W=t(34595),X=t(71725),ee=t(75497),ne=t(74549),te=t(34449),re=t(61460),ie=t(7713),oe=t(12745),ae=t(53857),se=t(91847),le=t(4041),ce=t(79986),de=t(73522),ue=t(25329),pe=t(6466),fe=t(55113),me=t(55419),he=t(39061),ge=t(4735),xe=t(62e3),ye=t(55752),ve=t(76336),je=t(52598),be=t(74948),we=function(e){var n=e.assetKey,t=e.latest,r=e.liveData;console.log(t);var i="Run"===(null===t||void 0===t?void 0:t.runOrError.__typename)?null===t||void 0===t?void 0:t.runOrError:null,o=null===i||void 0===i?void 0:i.repositoryOrigin,a=o?(0,V.kQ)(o.repositoryName,o.repositoryLocationName):null,s=(0,ve.Ux)(a);if(!t)return(0,J.jsx)(j.x,{padding:{top:16,bottom:32},children:(0,J.jsx)(h.t,{icon:"materialization",title:"No metadata",description:"No metadata was found for this asset."})});var l=t,c="MaterializationEvent"===l.__typename?null===l||void 0===l?void 0:l.assetLineage:[];return(0,J.jsx)(Se,{children:(0,J.jsxs)("tbody",{children:[(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Run"}),(0,J.jsx)("td",{children:i?(0,J.jsxs)("div",{children:[(0,J.jsxs)(j.x,{children:["Run ",(0,J.jsx)(ne.rU,{to:"/runs/".concat(l.runId,"?timestamp=").concat(l.timestamp),children:(0,J.jsx)(oe.fv,{children:(0,ye.EI)({runId:l.runId})})})]}),!(0,he.pv)(i.pipelineName)&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(j.x,{padding:{left:8,top:4},children:(0,J.jsx)(xe.h,{showIcon:!0,pipelineName:i.pipelineName,pipelineHrefContext:a||"repo-unknown",snapshotId:i.pipelineSnapshotId,isJob:(0,ve.E8)(s,i.pipelineName)})}),(0,J.jsxs)(pe.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,J.jsx)(ee.JO,{name:"linear_scale",color:y.w.Gray400}),(0,J.jsx)(ne.rU,{to:(0,ye.tA)(i,l),children:l.stepKey})]})]})]}):"No materialization events"}),(0,J.jsx)("td",{})]}),null!==t&&void 0!==t&&t.partition?(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Partition"}),(0,J.jsx)("td",{children:t?t.partition:"No materialization events"}),(0,J.jsx)("td",{})]}):null,(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Timestamp"}),(0,J.jsx)("td",{children:(0,J.jsxs)(j.x,{flex:{gap:8,alignItems:"center"},children:[l?(0,J.jsx)(me.E,{timestamp:{ms:Number(l.timestamp)}}):"No materialization events",r&&(0,J.jsx)(be.d9,{assetKey:n,liveData:r,include:"all"})]})}),(0,J.jsx)("td",{})]}),null!==c&&void 0!==c&&c.length?(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Parent assets"}),(0,J.jsx)("td",{children:(0,J.jsx)(je.i,{elements:c,timestamp:l.timestamp})}),(0,J.jsx)("td",{})]}):null,null===l||void 0===l?void 0:l.metadataEntries.map((function(e){return(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:e.label}),(0,J.jsx)("td",{children:(0,J.jsx)(ge.BL,{entry:e,expandSmallValues:!0,repoLocation:null===a||void 0===a?void 0:a.location})}),(0,J.jsx)("td",{children:e.description})]},"metadata-".concat(e.label))}))]})})},Se=(0,p.ZP)(fe.i).withConfig({displayName:"LastMaterializationMetadata__MetadataTable",componentId:"sc-1u4xf4p-0"})(["td:first-child{white-space:nowrap;width:1px;max-width:400px;word-break:break-word;overflow:hidden;text-overflow:ellipsis;}"]),Ne=t(33682),Ce=t(66855),ke=function(e){var n=e.assetKey,t=e.assetLastMaterializedAt,r=e.assetHasDefinedPartitions,i=e.isSourceAsset,o=e.liveData,a=(0,Ce.fE)(n,{},{assetHasDefinedPartitions:r}),s=a.materializations,l=a.observations,c=a.loadedPartitionKeys,d=a.loading,u=a.refetch,p=a.xAxis,f=(0,Ne.L)(p,s,l,c),m=i?l[0]:s[0];return P.useEffect((function(){u()}),[t,u]),d?(0,J.jsx)(j.x,{padding:{vertical:20},children:(0,J.jsx)(W.$,{purpose:"section"})}):(0,J.jsxs)(J.Fragment,{children:[!r&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(ue.Z,{run:(null===o||void 0===o?void 0:o.runWhichFailedToMaterialize)||null,border:{side:"top",width:1,color:y.w.KeylineGray}}),(0,J.jsx)(de.j,{liveData:o,border:{side:"top",width:1,color:y.w.KeylineGray}})]}),(null===o||void 0===o?void 0:o.freshnessPolicy)&&(0,J.jsx)(ae.pC,{title:"Freshness policy",children:(0,J.jsxs)(j.x,{margin:{horizontal:24,vertical:12},flex:{gap:12,alignItems:"center"},children:[(0,J.jsx)(ce.vy,{liveData:o}),(0,J.jsx)(oe.uT,{children:(0,ce.jY)(o.freshnessPolicy)})]})}),(0,J.jsx)(ae.pC,{title:i?"Observation in last run":"Materialization in last run",children:m?(0,J.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,J.jsx)(we,{assetKey:n,latest:m,liveData:o})}):(0,J.jsx)(j.x,{margin:{horizontal:24,vertical:12},style:{color:y.w.Gray500,fontSize:"0.8rem"},children:i?"No observations found":"No materializations found"})}),(0,J.jsx)(ae.pC,{title:i?"Observation system tags":"Materialization system tags",collapsedByDefault:!0,children:m?(0,J.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,J.jsx)(se.M,{event:m,paddingLeft:24})}):(0,J.jsx)(j.x,{margin:{horizontal:24,vertical:12},style:{color:y.w.Gray500,fontSize:"0.8rem"},children:i?"No observations found":"No materializations found"})}),(0,J.jsx)(ae.pC,{title:"Metadata plots",children:(0,J.jsx)(le.l,{xAxis:p,asSidebarSection:!0,groups:f,columnCount:1})})]})},Pe=t(11936),Ee=t(95609),_e=t(49720),Ie=t(77171),Ae=t(47619),Ze=t(33208),Oe=t(10922),Ke=t(36758),Me=t(53218),De=t(14848),ze=t(25582),Te=function(e){var n,t,r=e.graphNode,i=e.liveData,o=r.assetKey,a=r.definition,s=(0,Ae.em)(i),l=(0,Ae.mR)([o],s,"background"),c=(0,L.a)($e,{variables:{assetKey:{path:o.path}}}).data,d=(i||{}).lastMaterialization,u="AssetNode"===(null===c||void 0===c?void 0:c.assetNodeOrError.__typename)?c.assetNodeOrError:null;if(!u)return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Le,{assetNode:a,repoAddress:null}),(0,J.jsx)(j.x,{padding:{vertical:64},children:(0,J.jsx)(W.$,{purpose:"section"})})]});var p=(0,V.kQ)(u.repository.name,u.repository.location.name),f=(0,ie.U6)(u),m=f.assetMetadata,h=f.assetType,g=h||m.length>0,x=null===(n=u.configField)||void 0===n?void 0:n.configType,v=(null===(t=u.op)||void 0===t?void 0:t.metadata)&&(0,Me.D)(u.op.metadata);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Le,{assetNode:a,repoAddress:p}),(0,J.jsx)(re.N,{assetKey:o,loadedFromRepo:p,padded:!1}),(u.description||(null===v||void 0===v?void 0:v.SidebarComponent)||!g)&&(0,J.jsxs)(ae.pC,{title:"Description",children:[(0,J.jsx)(j.x,{padding:{vertical:16,horizontal:24},children:(0,J.jsx)(Oe.d,{description:u.description||"No description provided."})}),u.op&&(null===v||void 0===v?void 0:v.SidebarComponent)&&(0,J.jsx)(j.x,{padding:{bottom:16,horizontal:24},children:(0,J.jsx)(v.SidebarComponent,{definition:u.op,repoAddress:p})})]}),(0,J.jsx)(ke,{assetKey:o,assetLastMaterializedAt:null===d||void 0===d?void 0:d.timestamp,assetHasDefinedPartitions:!!u.partitionDefinition,isSourceAsset:a.isSource,liveData:i}),(0,J.jsx)("div",{style:{borderBottom:"2px solid ".concat(y.w.Gray300)}}),(0,he.Pz)(r)&&(0,J.jsx)(Pe.x,{}),u.opVersion&&(0,J.jsx)(ae.pC,{title:"Code Version",children:(0,J.jsx)(j.x,{padding:{vertical:16,horizontal:24},children:(0,J.jsx)(De.G,{children:u.opVersion})})}),x&&(0,J.jsx)(ae.pC,{title:"Config",children:(0,J.jsx)(j.x,{padding:{vertical:16,horizontal:24},children:(0,J.jsx)(X.L,{type:x,typesInScope:x.recursiveConfigTypes})})}),u.requiredResources.length>0&&(0,J.jsx)(ae.pC,{title:"Required Resources",children:(0,J.jsx)(j.x,{padding:{vertical:16,horizontal:24},children:u.requiredResources.map((function(e){return(0,J.jsxs)(Ke.b1,{children:[(0,J.jsx)(ee.JO,{name:"resource",color:y.w.Gray700}),p?(0,J.jsx)(ne.rU,{to:(0,ze.$U)(p,"/resources/".concat(e.resourceKey)),children:(0,J.jsx)(Ke.bZ,{children:e.resourceKey})}):(0,J.jsx)(Ke.bZ,{children:e.resourceKey})]},e.resourceKey)}))})}),m.length>0&&(0,J.jsx)(ae.pC,{title:"Metadata",children:(0,J.jsx)(ie.mQ,{assetMetadata:m,repoLocation:null===p||void 0===p?void 0:p.location})}),h&&(0,J.jsx)(Fe,{assetType:h}),u.partitionDefinition&&(0,J.jsx)(ae.pC,{title:"Partitions",children:(0,J.jsxs)(j.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:16},children:[(0,J.jsx)("p",{children:u.partitionDefinition.description}),(0,J.jsx)(Ee.m,{assetKey:u.assetKey,data:l})]})})]})},Fe=function(e){var n=e.assetType;return(0,J.jsx)(ae.pC,{title:"Type",children:(0,J.jsx)(Ze.Ot,{type:n})})},Le=function(e){var n=e.assetNode,t=e.repoAddress,r=(0,he.ll)(n.assetKey);return(0,J.jsxs)(j.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,J.jsx)(ae.R8,{style:{marginBottom:0,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:(0,J.jsx)(j.x,{children:r})}),(0,J.jsxs)(j.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,J.jsxs)(Re,{to:(0,Ie.p)(n.assetKey),children:["View in Asset Catalog ",(0,J.jsx)(ee.JO,{name:"open_in_new",color:y.w.Link})]}),t&&(0,J.jsx)(_e.d,{assetNode:n,repoAddress:t,minimal:!0})]})]})},Re=(0,p.ZP)(ne.rU).withConfig({displayName:"SidebarAssetInfo__AssetCatalogLink",componentId:"qra0a8-0"})(["display:flex;gap:5px;padding:6px;margin:-6px;align-items:center;white-space:nowrap;"]),Ge=(0,R.Ps)(i||(i=(0,F.Z)(["\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    partitionDefinition {\n      description\n    }\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    opVersion\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ","\n  ","\n  ","\n"])),te.r,ge.it,ie.Ws),$e=(0,R.Ps)(o||(o=(0,F.Z)(["\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n\n  ","\n"])),Ge),Be=t(18819),Ve=t(31522);var Je=(0,R.Ps)(a||(a=(0,F.Z)(["\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      __typename\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),Ue=t(64424),qe=.6,Qe=.15,He=function(e){var n=(0,Be.uc)(e.explorerPath.opsQuery,e.fetchOptions),t=n.fetchResult,r=n.assetGraphData,i=n.graphQueryItems,o=n.graphAssetKeys,a=n.allAssetKeys,s=n.applyingEmptyDefault,l=(0,Ue.l)(o),c=l.liveDataByNode,d=l.liveDataRefreshState,p=l.runWatchers;return(0,J.jsx)(z.g,{allowStaleData:!0,queryResult:t,children:function(){return r&&a?(0,he.vm)(r)?(0,J.jsx)(h.t,{icon:"error",title:"Cycle detected",description:"Assets dependencies form a cycle"}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Ye,(0,u.Z)({assetGraphData:r,allAssetKeys:a,graphQueryItems:i,applyingEmptyDefault:s,liveDataRefreshState:d,liveDataByNode:c},e),e.explorerPath.pipelineName),p]}):(0,J.jsx)(h.t,{icon:"error",title:"Query Error"})}})},Ye=function(e){var n=e.options,t=e.setOptions,r=e.explorerPath,i=e.onChangeExplorerPath,o=e.onNavigateToSourceAssetNode,a=e.liveDataRefreshState,s=e.liveDataByNode,p=e.assetGraphData,f=e.graphQueryItems,h=e.applyingEmptyDefault,b=e.fetchOptions,S=e.fetchOptionFilters,C=function(){var e=(0,Ve.x)();return P.useCallback(function(){var n=(0,c.Z)(m().mark((function n(t){var r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.query({query:Je,variables:{key:t}});case 2:if(r=n.sent,"Asset"!==(null===(i=r.data)||void 0===i?void 0:i.assetOrError.__typename)||null===i||void 0===i||!i.assetOrError.definition){n.next=7;break}return o=i.assetOrError.definition,n.abrupt("return",{assetKey:t,opNames:o.opNames,jobName:o.jobNames.find((function(e){return!(0,he.pv)(e)}))||null,groupName:o.groupName,repoAddress:o.repository?(0,V.kQ)(o.repository.name,o.repository.location.name):null});case 7:return n.abrupt("return",{assetKey:t,opNames:[],jobName:null,groupName:null,repoAddress:null});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e])}(),z=(0,Z.oJ)(p),F=z.layout,L=z.loading,R=z.async,G=P.useRef(),$=P.useState(null),B=(0,d.Z)($,2),q=B[0],W=B[1],X=r.opNames[r.opNames.length-1].split(","),ee=Object.values(p.nodes).filter((function(e){return X.includes((0,he.Je)(e.definition.assetKey))})),ne=ee[ee.length-1],te=ee.map((function(e){return e.definition})),re=h?f.map((function(e){return e.node})):Object.values(p.nodes).map((function(e){return e.definition})),ie=P.useCallback(function(){var e=(0,c.Z)(m().mark((function e(n,t,a){var s,c,d,f,h,g,x,y;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),s=(0,he.Je)(t),c=null===a||void 0===a?void 0:a.definition){e.next=9;break}return e.t0=o,e.next=7,C(t);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:d=s,(n.shiftKey||n.metaKey)&&(f=[s],n.shiftKey&&ne&&a&&(h=en({graph:p,from:ne,to:a})).length&&(f=h),g=r.opNames[0].split(","),d=(g.includes(s)?k()(g,s):N()([].concat((0,l.Z)(g),(0,l.Z)(f)))).join(",")),(x=null===F||void 0===F?void 0:F.nodes[d[d.length-1]])&&(null===(y=G.current)||void 0===y||y.zoomToSVGCoords(x.bounds.x,x.bounds.y,!0)),i((0,u.Z)((0,u.Z)({},r),{},{opNames:[d],opsQuery:c?r.opsQuery:"".concat(r.opsQuery,',++"').concat(s,'"++'),pipelineName:r.pipelineName}),"replace");case 14:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[r,i,o,C,ne,p,F]),oe=P.useState(null),ae=(0,d.Z)(oe,2),se=ae[0],le=ae[1],ce=se!==F;P.useEffect((function(){ce&&F&&G.current&&(ne?G.current.focus():G.current.autocenter(!1),le(F))}),[ce,ne,F,G]);var de=!(!F||!Object.keys(F.groups).length);return(0,J.jsx)(g.OS,{identifier:"explorer",firstInitialPercent:70,firstMinSize:400,first:(0,J.jsxs)(x.S,{region:"graph",children:[0===f.length?(0,J.jsx)(M.LS,{nodeType:"asset",isGraph:!0}):h?(0,J.jsx)(M.K4,{nodeType:"asset"}):0===Object.keys(p.nodes).length?(0,J.jsx)(M.VQ,{nodeType:"asset"}):void 0,L||!F?(0,J.jsx)(M.W_,{async:R,nodeType:"asset"}):(0,J.jsx)(A.l,{ref:function(e){return G.current=e||void 0},interactor:A.l.Interactors.PanAndZoom,graphWidth:F.width,graphHeight:F.height,graphHasNoMinimumZoom:de,onClick:function(){return i((0,u.Z)((0,u.Z)({},r),{},{pipelineName:r.pipelineName,opNames:[]}),"replace")},onArrowKeyDown:function(e,n){if(F){var t=(0,u.Z)((0,u.Z)({},F),{},{nodes:w()(F.nodes,(function(e){var n;return!(null===(n=p.nodes[e.id])||void 0===n||!n.definition)}))}),r=(0,O.mh)(t,ne.id,n),i=r&&p.nodes[r];i&&G.current&&(ie(e,i.assetKey,i),G.current.zoomToSVGBox(F.nodes[r].bounds,!0))}},onDoubleClick:function(e){var n;null===(n=G.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1,children:function(e){var n=e.scale;return(0,J.jsxs)(We,{width:F.width,height:F.height,children:[(0,J.jsx)(T.i,{highlighted:q,edges:F.edges,strokeWidth:de?Math.max(4,3/n):4,baseColor:de&&n<Qe?y.w.Gray400:y.w.KeylineGray}),Object.values(F.groups).sort((function(e,n){return e.id.length-n.id.length})).map((function(e){return(0,J.jsx)("foreignObject",(0,u.Z)((0,u.Z)({},e.bounds),{},{onDoubleClick:function(n){if(G.current){var t=G.current.scaleForSVGBounds(e.bounds.width,e.bounds.height);G.current.zoomToSVGBox(e.bounds,!0,.9*t),n.stopPropagation()}},children:(0,J.jsx)(Q.l,{group:e,scale:n})}),e.id)})),Object.values(F.nodes).map((function(e){var t=e.id,r=e.bounds,i=p.nodes[t],o=JSON.parse(t);if(!(de&&n<Qe))return(0,P.createElement)("foreignObject",(0,u.Z)((0,u.Z)({},r),{},{key:t,onMouseEnter:function(){return W(t)},onMouseLeave:function(){return W(null)},onClick:function(e){return ie(e,{path:o},i)},onDoubleClick:function(e){var n;null===(n=G.current)||void 0===n||n.zoomToSVGBox(r,!0,1.2),e.stopPropagation()},style:{overflow:"visible"}}),i?n<qe?(0,J.jsx)(H.t$,{definition:i.definition,liveData:s[i.id],selected:ee.includes(i)}):(0,J.jsx)(H.p4,{definition:i.definition,liveData:s[i.id],selected:ee.includes(i)}):(0,J.jsx)(Y.w,{assetKey:{path:o}}))}))]})}}),t&&(0,J.jsx)(K.cY,{children:(0,J.jsx)(v.X,{format:"switch",label:"View as Asset Graph",checked:n.preferAssetRendering,onChange:function(){var e;i((0,u.Z)((0,u.Z)({},r),{},{opNames:(null===(e=te[0])||void 0===e?void 0:e.opNames)||[]}),"replace"),t((0,u.Z)((0,u.Z)({},n),{},{preferAssetRendering:!n.preferAssetRendering}))}})}),(0,J.jsx)(j.x,{flex:{direction:"column",alignItems:"flex-end",gap:8},style:{position:"absolute",right:12,top:8},children:(0,J.jsxs)(j.x,{flex:{alignItems:"center",gap:12},children:[(0,J.jsx)(E.xi,{refreshState:a,dataDescription:"materializations"}),(0,J.jsx)(I.y,{preferredJobName:r.pipelineName,scope:te.length?{selected:te.filter((function(e){return e.isObservable}))}:{all:re.filter((function(e){return e.isObservable}))}}),(0,J.jsx)(_.XE,{preferredJobName:r.pipelineName,liveDataForStale:s,scope:te.length?{selected:te}:{all:re}})]})}),(0,J.jsxs)(K.U0,{children:[S,(0,J.jsx)(D.j,{items:f,value:r.opsQuery,placeholder:"Type an asset subset\u2026",onChange:function(e){return i((0,u.Z)((0,u.Z)({},r),{},{opsQuery:e}),"replace")},popoverPosition:"bottom-left"})]})]}),second:1===ee.length&&ee[0]?(0,J.jsx)(K.Ui,{children:(0,J.jsx)(K.zI,{children:(0,J.jsx)(x.S,{region:"asset sidebar",resetErrorOnChange:[ee[0].id],children:(0,J.jsx)(Te,{graphNode:ee[0],liveData:s[ee[0].id]})})})}):b.pipelineSelector?(0,J.jsx)(K.Ui,{children:(0,J.jsx)(K.zI,{children:(0,J.jsx)(x.S,{region:"asset job sidebar",children:(0,J.jsx)(U,{pipelineSelector:b.pipelineSelector})})})}):null})},We=p.ZP.svg.withConfig({displayName:"AssetGraphExplorer__SVGContainer",componentId:"hnrxmo-0"})(["overflow:visible;border-radius:0;"]),Xe=function(e){for(var n=e.graph,t=e.from,r=e.to,i=[t];i.length;){var o=i.pop(),a=(0,l.Z)(Object.keys(n.downstream[o.id]||{})).map((function(e){return n.nodes[e]})).filter(Boolean);if(a.some((function(e){return e.id===r.id})))return"downstream";i.push.apply(i,(0,l.Z)(a))}return"upstream"},en=function e(n){var t=n.graph,r=n.from,i=n.to,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!r)return[];if(r.id===i.id)return(0,l.Z)(i.definition.opNames);if(0===o.length&&"upstream"===Xe({graph:t,from:r,to:i})){var a=[i,r];r=a[0],i=a[1]}var c,d=(0,l.Z)(Object.keys(t.downstream[r.id]||{})).map((function(e){return t.nodes[e]})).filter(Boolean),u=[],p=(0,s.Z)(d);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(!o.includes(f.id)){var m=e({graph:t,from:f,to:i},[].concat((0,l.Z)(o),[r.id]));m.length&&u.push.apply(u,(0,l.Z)(r.definition.opNames).concat((0,l.Z)(m)))}}}catch(h){p.e(h)}finally{p.f()}return N()(u)}},9:function(e,n,t){t.d(n,{l:function(){return h}});var r=t(922),i=t(32030),o=t(12745),a=t(75497),s=t(7838),l=t(8546),c=(t(325),t(74549)),d=t(76341),u=t(37099),p=t(25582),f=t(35473),m=t(32289),h=function(e){var n=e.group,t=e.scale,r=n.repositoryLocationName,h=n.repositoryDisambiguationRequired,y=n.repositoryName,v=n.groupName;return(0,m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[t>f.md&&(0,m.jsx)(i.x,{flex:{alignItems:"flex-end"},style:{height:70},children:(0,m.jsxs)(o.fv,{style:{fontWeight:600,userSelect:"none",fontSize:t>f.CZ?"16px":"32px",display:"flex",gap:6},children:[(0,m.jsx)(a.JO,{name:"asset_group",color:s.w.Gray400,size:t>f.CZ?20:48}),(0,m.jsxs)(i.x,{flex:{direction:"column"},children:[(0,m.jsx)(c.rU,{style:{color:s.w.Gray400},onClick:function(e){return e.stopPropagation()},to:(0,p.rO)(y,r,"/asset-groups/".concat(v)),children:v}),h&&(0,m.jsx)(x,{style:{marginBottom:"0.5em"},children:(0,d.R9)((0,u.At)(y,r),{maxLength:45})})]})]})}),(0,m.jsx)(g,{style:{inset:0,top:75,position:"absolute",background:t<f.md?"rgba(234, 234, 234, 1)":"rgba(217, 217, 217, 0.25)"}}),t<f.md?(0,m.jsx)(i.x,{flex:{justifyContent:"center",alignItems:"center"},style:{inset:0,position:"absolute",fontSize:"".concat(12/t,"px"),userSelect:"none"},children:(0,m.jsxs)(i.x,{flex:{direction:"column",alignItems:"center"},style:{fontWeight:600,fontFamily:l.b.monospace},children:[v,h&&(0,m.jsx)(x,{children:(0,d.R9)((0,u.At)(y,r),{maxLength:45})})]})}):void 0]})},g=r.ZP.div.withConfig({displayName:"AssetGroupNode__GroupOutline",componentId:"osbgfp-0"})(["width:100%;border-radius:10px;pointer-events:none;"]),x=r.ZP.div.withConfig({displayName:"AssetGroupNode__GroupRepoName",componentId:"osbgfp-1"})(["font-size:0.8em;line-height:0.6em;white-space:nowrap;color:",";"],s.w.Gray400)},11540:function(e,n,t){t.d(n,{zU:function(){return q},oR:function(){return U},p4:function(){return L},t$:function(){return J},D5:function(){return V}});var r,i,o=t(99500),a=t(922),s=t(3159),l=t(75497),c=t(32030),d=t(7838),u=t(34595),p=t(11831),f=t(8546),m=t(12745),h=t(90428),g=t.n(h),x=t(325),y=t(74549),v=t(76341),j=t(4445),b=t(6291),w=t(23300),S=t(79986),N=t(74948),C=t(77171),k=t(72572),P=t(68156),E=t(68436),_=t.n(E),I=t(67248),A=t(58607),Z=t(1962),O=t.n(Z),K=(0,I.j)().use(A.Z).use(O()),M=new(_())({max:500}),D=function(e){var n=M.get(e);if(n)return n;var t=K.processSync(e).toString().replace(/\\/g,"").trim();return M.set(e,t),t},z=t(79714),T=t(93523),F=t(32289),L=x.memo((function(e){var n=e.definition,t=e.selected,r=e.liveData,i=n.assetKey.path[n.assetKey.path.length-1],o=n.isSource;return(0,F.jsxs)(Q,{children:[(0,F.jsx)(R,{definition:n,liveData:r}),(0,F.jsx)(H,{$selected:t,children:(0,F.jsxs)(W,{$selected:t,$isSource:o,children:[(0,F.jsxs)(X,{$isSource:o,children:[(0,F.jsx)("span",{style:{marginTop:1},children:(0,F.jsx)(l.JO,{name:o?"source_asset":"asset"})}),(0,F.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,v.R9)(i,{maxLength:T.ASSET_NODE_NAME_MAX_LENGTH})}),(0,F.jsx)("div",{style:{flex:1}})]}),(0,F.jsxs)(c.x,{style:{padding:"6px 8px"},flex:{direction:"column",gap:4},border:{side:"top",width:1,color:d.w.KeylineGray},children:[n.description?(0,F.jsx)(re,{$color:d.w.Gray800,children:D(n.description).split("\n")[0]}):(0,F.jsx)(re,{$color:d.w.Gray400,children:"No description"}),n.isPartitioned&&(0,F.jsx)(j.oS,{definition:n,liveData:r}),(0,F.jsx)(N.d9,{liveData:r,assetKey:n.assetKey,include:"self"})]}),o&&!n.isObservable?null:(0,F.jsx)($,{definition:n,liveData:r}),(0,F.jsx)(k.hG,{definition:n,style:{right:-2,paddingTop:7}})]})})]})}),g()),R=function(e){var n=e.definition,t=e.liveData;return(0,F.jsx)(c.x,{flex:{gap:4},padding:{left:4},style:{height:24},children:(0,F.jsx)(N.d9,{liveData:t,assetKey:n.assetKey,include:"upstream"})})},G=function(e){var n=e.background,t=e.children;return(0,F.jsx)(c.x,{padding:{horizontal:8},style:{borderBottomLeftRadius:6,borderBottomRightRadius:6,whiteSpace:"nowrap",lineHeight:"12px",fontSize:12,height:24},flex:{justifyContent:"space-between",alignItems:"center",gap:6},background:n,children:t})},$=function(e){var n=V(e),t=n.content,r=n.background;return(0,F.jsx)(G,{background:r,children:t})};function B(e){return(e.opNames.length?e.opNames[0]:null)||""}function V(e){var n=e.definition,t=e.liveData,r=e.expanded;if(!t)return{background:d.w.Gray100,border:d.w.Gray300,content:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(u.$,{purpose:"caption-text"}),(0,F.jsx)("span",{style:{flex:1,color:d.w.Gray800},children:"Loading..."})]})};var i=t.lastMaterialization,o=t.runWhichFailedToMaterialize,a=t.inProgressRunIds,s=t.unstartedRunIds,c=a[0]||s[0],f=(0,S.Tx)(t);if(n.isSource)return c?{background:d.w.Gray100,border:d.w.Gray300,content:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(z.a,{liveData:t}),(0,F.jsx)("span",{style:{flex:1},color:d.w.Gray800,children:"Observing..."}),r&&(0,F.jsx)(oe,{}),(0,F.jsx)(z.T,{runId:c})]})}:null!==t&&void 0!==t&&t.lastObservation?{background:d.w.Gray100,border:d.w.Gray300,content:(0,F.jsxs)(F.Fragment,{children:[r&&(0,F.jsx)(b.d,{status:[w.yo.MISSING]}),(0,F.jsx)("span",{children:"Observed"}),r&&(0,F.jsx)(oe,{}),(0,F.jsx)("span",{style:{textAlign:"right",overflow:"hidden"},children:(0,F.jsx)(z.T,{runId:t.lastObservation.runId,event:{stepKey:B(n),timestamp:t.lastObservation.timestamp},children:(0,F.jsx)(P.v,{timestamp:Number(t.lastObservation.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})})})]})}:n.isObservable?{background:d.w.Gray100,border:d.w.Gray300,content:(0,F.jsxs)(F.Fragment,{children:[r&&(0,F.jsx)(l.JO,{name:"partition_missing",color:d.w.Gray300,style:{marginRight:-2},size:12}),(0,F.jsx)("span",{children:"Never observed"}),!r&&(0,F.jsx)("span",{children:"\u2013"})]})}:{background:d.w.Gray100,border:d.w.Gray300,content:(0,F.jsx)("span",{children:"\u2013"})};if(c){var m,h=null===(m=t.partitionStats)||void 0===m?void 0:m.numMaterializing;return{background:d.w.Blue50,border:d.w.Blue500,content:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(z.a,{liveData:t}),(0,F.jsx)("span",{style:{flex:1},color:d.w.Gray800,children:1===h?"Materializing 1 partition...":h?"Materializing ".concat(h," partitions..."):"Materializing..."}),r&&(0,F.jsx)(oe,{}),h&&1!==h?void 0:(0,F.jsx)(z.T,{runId:c})]})}}if(t.partitionStats){var g=t.partitionStats,x=g.numPartitions,v=g.numMaterialized,N=g.numFailed,k=x-N-v,E=j.g8[f||N?w.yo.FAILED:k?w.yo.MISSING:w.yo.MATERIALIZED],_=E.background,I=E.foreground;return{background:_,border:E.border,content:(0,F.jsx)(y.rU,{to:(0,C.p)(n.assetKey,{view:"partitions"}),style:{color:I},target:"_blank",rel:"noreferrer",children:f?(0,F.jsx)(p.u,{position:"top",content:(0,S.Dn)(t.freshnessInfo.currentMinutesLate),children:"Overdue"}):(0,j._e)(x)})}}var A=i?(0,F.jsx)("span",{style:{overflow:"hidden"},children:(0,F.jsx)(z.T,{runId:i.runId,event:{stepKey:B(n),timestamp:i.timestamp},children:(0,F.jsx)(P.v,{timestamp:Number(i.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})})}):void 0;return o||f?{background:d.w.Red50,border:d.w.Red500,content:(0,F.jsxs)(F.Fragment,{children:[r&&(0,F.jsx)(l.JO,{name:"partition_failure",color:d.w.Red500,style:{marginRight:-2},size:12}),f?(0,F.jsx)(p.u,{position:"top",content:(0,S.Dn)(t.freshnessInfo.currentMinutesLate),children:(0,F.jsx)("span",{style:{color:d.w.Red700},children:f?"Failed, Overdue":"Overdue"})}):o?(0,F.jsx)("span",{style:{color:d.w.Red700},children:"Failed"}):void 0,r&&(0,F.jsx)(oe,{}),o?(0,F.jsx)("span",{style:{overflow:"hidden"},children:(0,F.jsx)(z.T,{runId:o.id,children:(0,F.jsx)(P.v,{timestamp:Number(o.endTime),timeFormat:{showSeconds:!1,showTimezone:!1}})})}):A]})}:i?{background:d.w.Green50,border:d.w.Green500,content:(0,F.jsxs)(F.Fragment,{children:[r&&(0,F.jsx)(b.d,{status:[w.yo.MATERIALIZED]}),(0,F.jsx)("span",{style:{color:d.w.Green700},children:"Materialized"}),r&&(0,F.jsx)(oe,{}),A]})}:{background:d.w.Yellow50,border:d.w.Yellow500,content:(0,F.jsxs)(F.Fragment,{children:[r&&(0,F.jsx)(l.JO,{name:"partition_missing",color:d.w.Yellow500,style:{marginRight:-2},size:12}),(0,F.jsx)("span",{style:{color:d.w.Yellow700},children:"Never materialized"})]})}}var J=function(e){var n=e.selected,t=e.definition,r=e.liveData,i=t.isSource,o=t.assetKey,a=V({definition:t,liveData:r}),s=a.border,l=a.background,c=o.path[o.path.length-1];return(0,F.jsx)(Q,{children:(0,F.jsx)(ee,{$selected:n,children:(0,F.jsx)(ie,{content:c,canShow:c.length>14,targetTagName:"div",position:"top",children:(0,F.jsxs)(ne,{$selected:n,$isSource:i,$background:l,$border:s,children:[(0,F.jsx)("div",{style:{position:"absolute",bottom:6,left:6},children:(0,F.jsx)(z.a,{liveData:r,purpose:"section"})}),(0,F.jsx)(te,{style:{fontSize:30},$isSource:i,children:(0,v.R9)(c,{maxLength:14})})]})})})})},U=(0,s.Ps)(r||(r=(0,o.Z)(["\n  fragment AssetNodeLiveFragment on AssetNode {\n    id\n    opNames\n    repository {\n      id\n    }\n    assetKey {\n      path\n    }\n    assetMaterializations(limit: 1) {\n      ...AssetNodeLiveMaterialization\n    }\n    freshnessPolicy {\n      ...AssetNodeLiveFreshnessPolicy\n    }\n    freshnessInfo {\n      ...AssetNodeLiveFreshnessInfo\n    }\n    assetObservations(limit: 1) {\n      ...AssetNodeLiveObservation\n    }\n    staleStatus\n    staleCauses {\n      key {\n        path\n      }\n      reason\n      category\n      dependency {\n        path\n      }\n    }\n    partitionStats {\n      numMaterialized\n      numMaterializing\n      numPartitions\n      numFailed\n    }\n  }\n\n  fragment AssetNodeLiveFreshnessPolicy on FreshnessPolicy {\n    maximumLagMinutes\n    cronSchedule\n    cronScheduleTimezone\n  }\n\n  fragment AssetNodeLiveFreshnessInfo on AssetFreshnessInfo {\n    currentMinutesLate\n  }\n\n  fragment AssetNodeLiveMaterialization on MaterializationEvent {\n    timestamp\n    runId\n  }\n\n  fragment AssetNodeLiveObservation on ObservationEvent {\n    timestamp\n    runId\n  }\n"]))),q=(0,s.Ps)(i||(i=(0,o.Z)(["\n  fragment AssetNodeFragment on AssetNode {\n    id\n    graphName\n    hasMaterializePermission\n    jobNames\n    opNames\n    opVersion\n    description\n    computeKind\n    isPartitioned\n    isObservable\n    isSource\n    assetKey {\n      ...AssetNodeKey\n    }\n  }\n\n  fragment AssetNodeKey on AssetKey {\n    path\n  }\n"]))),Q=a.ZP.div.withConfig({displayName:"AssetNode__AssetInsetForHoverEffect",componentId:"ja35mc-0"})(["padding:10px 4px 2px 4px;height:100%;& *:focus{outline:0;}"]),H=a.ZP.div.withConfig({displayName:"AssetNode__AssetNodeContainer",componentId:"ja35mc-1"})(["user-select:none;cursor:default;padding:4px;"]),Y=a.ZP.span.withConfig({displayName:"AssetNode__AssetNodeShowOnHover",componentId:"ja35mc-2"})(["display:none;"]),W=a.ZP.div.withConfig({displayName:"AssetNode__AssetNodeBox",componentId:"ja35mc-3"})(["",";",";background:",";border-radius:8px;position:relative;&:hover{box-shadow:rgba(0,0,0,0.12) 0px 2px 12px 0px;","{display:initial;}}"],(function(e){return e.$isSource?"border: 2px dashed ".concat(e.$selected?d.w.Gray600:d.w.Gray300):"border: 2px solid ".concat(e.$selected?d.w.Blue500:d.w.Blue200)}),(function(e){return e.$isSource?"outline: 3px solid ".concat(e.$selected?d.w.Gray300:"transparent"):"outline: 3px solid ".concat(e.$selected?d.w.Blue200:"transparent")}),d.w.White,Y),X=a.ZP.div.withConfig({displayName:"AssetNode__Name",componentId:"ja35mc-4"})(["display:flex;padding:3px 6px;background:",";font-family:",";border-top-left-radius:7px;border-top-right-radius:7px;font-weight:600;gap:4px;"],(function(e){return e.$isSource?d.w.Gray100:d.w.Blue50}),f.b.monospace),ee=(0,a.ZP)(H).withConfig({displayName:"AssetNode__MinimalAssetNodeContainer",componentId:"ja35mc-5"})(["padding-top:30px;padding-bottom:42px;height:100%;"]),ne=a.ZP.div.withConfig({displayName:"AssetNode__MinimalAssetNodeBox",componentId:"ja35mc-6"})(["background:",";",";",";border-radius:10px;position:relative;padding:4px;height:100%;min-height:46px;&:hover{box-shadow:rgba(0,0,0,0.12) 0px 2px 12px 0px;}"],(function(e){return e.$background}),(function(e){return e.$isSource?"border: 4px dashed ".concat(e.$selected?d.w.Gray500:e.$border):"border: 4px solid ".concat(e.$selected?d.w.Blue500:e.$border)}),(function(e){return e.$isSource?"outline: 8px solid ".concat(e.$selected?d.w.Gray300:"transparent"):"outline: 8px solid ".concat(e.$selected?d.w.Blue200:"transparent")})),te=(0,a.ZP)(X).withConfig({displayName:"AssetNode__MinimalName",componentId:"ja35mc-7"})(["font-weight:600;white-space:nowrap;position:absolute;background:none;top:50%;left:50%;transform:translate(-50%,-50%);"]),re=a.ZP.div.withConfig({displayName:"AssetNode__Description",componentId:"ja35mc-8"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";font-size:12px;"],(function(e){return e.$color})),ie=(0,a.ZP)(p.u).withConfig({displayName:"AssetNode__TooltipStyled",componentId:"ja35mc-9"})(["height:100%;"]),oe=function(){return(0,F.jsx)(m.uT,{color:d.w.KeylineGray,style:{marginLeft:-3,marginRight:-3},children:"\u2022"})}},79714:function(e,n,t){t.d(n,{a:function(){return c},T:function(){return d}});var r=t(11831),i=t(34595),o=t(12745),a=(t(325),t(74549)),s=t(55752),l=t(32289),c=function(e){var n,t,o=e.liveData,a=e.purpose,s=void 0===a?"body-text":a;return null!==o&&void 0!==o&&null!==(n=o.inProgressRunIds)&&void 0!==n&&n.length?(0,l.jsx)(r.u,{content:"A run is currently rematerializing this asset.",children:(0,l.jsx)(i.$,{purpose:s})}):null!==o&&void 0!==o&&null!==(t=o.unstartedRunIds)&&void 0!==t&&t.length?(0,l.jsx)(r.u,{content:"A run has started that will rematerialize this asset soon.",children:(0,l.jsx)(i.$,{purpose:s,stopped:!0})}):null},d=function(e){var n=e.runId,t=e.children,r=e.event;return(0,l.jsx)(a.rU,{to:r?(0,s.tA)({runId:n},r):"/runs/".concat(n),target:"_blank",rel:"noreferrer",children:t||(0,l.jsx)(o.aU,{children:(0,s.EI)({runId:n})})})}},38376:function(e,n,t){t.d(n,{w:function(){return u}});var r=t(922),i=t(75497),o=t(7838),a=t(8546),s=t(325),l=t(76341),c=t(93523),d=t(32289),u=s.memo((function(e){var n=e.assetKey,t=n.path[n.path.length-1];return(0,d.jsxs)(p,{children:[(0,d.jsx)(i.JO,{name:"open_in_new",color:o.w.Link}),(0,d.jsx)("span",{className:"label",title:t,children:(0,l.R9)(t,{maxLength:c.ASSET_LINK_NAME_MAX_LENGTH})})]})})),p=r.ZP.div.withConfig({displayName:"ForeignNode__AssetNodeLinkContainer",componentId:"f3rzsb-0"})(["display:flex;padding:4px 8px 6px;margin-top:26px;line-height:30px;font-family:",";color:",";align-items:center;font-weight:600;gap:4px;&:hover .label{color:",";text-decoration:underline;}"],a.b.monospace,o.w.Link,o.w.Link)},18819:function(e,n,t){t.d(n,{uc:function(){return v},BK:function(){return w}});var r,i=t(99500),o=t(59019),a=t(47427),s=t(73701),l=t(3159),c=t(21663),d=t.n(c),u=t(18961),p=t.n(u),f=t(24083),m=t.n(f),h=t(325),g=t(25496),x=t(11540),y=t(39061);function v(e,n){var t,r=(0,s.a)(S,{notifyOnNetworkStatusChange:!0,variables:{pipelineSelector:n.pipelineSelector,groupSelector:n.groupSelector}}),i=null===(t=r.data)||void 0===t?void 0:t.assetNodes,o=h.useMemo((function(){if(void 0===i)return{graphAssetKeys:[],graphQueryItems:[],assetGraphData:null,applyingEmptyDefault:!1};var t=i;n.hideNodesMatching&&(t=m()(t,n.hideNodesMatching));var r=j(t),o=(0,g.V)(r,e),a=o.all,s=o.applyingEmptyDefault,l=(0,y.VZ)(a.map((function(e){return e.node})));return n.hideEdgesToNodesOutsideQuery&&b(l,i),{allAssetKeys:t.map((function(e){return e.assetKey})),graphAssetKeys:a.map((function(e){return{path:e.node.assetKey.path}})),assetGraphData:l,graphQueryItems:r,applyingEmptyDefault:s}}),[i,e,n.hideEdgesToNodesOutsideQuery,n.hideNodesMatching]);return{fetchResult:r,assetGraphData:o.assetGraphData,graphQueryItems:o.graphQueryItems,graphAssetKeys:o.graphAssetKeys,allAssetKeys:o.allAssetKeys,applyingEmptyDefault:o.applyingEmptyDefault}}var j=function(e){var n,t={},r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=(0,y.Je)(i.assetKey);t[o]={node:i,name:o,inputs:i.dependencyKeys.map((function(e){return{dependsOn:[{solid:{name:(0,y.Je)(e)}}]}})),outputs:i.dependedByKeys.map((function(e){return{dependedBy:[{solid:{name:(0,y.Je)(e)}}]}}))}}}catch(s){r.e(s)}finally{r.f()}return Object.values(t)},b=function(e,n){for(var t=d()(n,(function(e){return(0,y.Wu)(e.assetKey)})),r=function(e){return!!t[e]},i=0,o=Object.keys(e.upstream);i<o.length;i++)for(var a=o[i],s=0,l=Object.keys(e.upstream[a]);s<l.length;s++){var c=l[s];!e.nodes[c]&&r(a)&&(delete e.upstream[a][c],delete e.downstream[c][a])}for(var u=0,p=Object.keys(e.downstream);u<p.length;u++)for(var f=p[u],m=0,h=Object.keys(e.downstream[f]);m<h.length;m++){var g=h[m];!e.nodes[g]&&r(f)&&(delete e.upstream[g][f],delete e.downstream[f][g])}},w=function(e,n){var t=p()(e,(function(e){return e.name})),r=t[(0,y.Je)(n)];if(!r)return{upstream:0,downstream:0};return{upstream:function e(n,r){var i=t[n].inputs.flatMap((function(e){return e.dependsOn.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[r].concat((0,o.Z)(i.map((function(n){return e(n,r+1)})))))}(r.name,0),downstream:function e(n,r){var i=t[n].outputs.flatMap((function(e){return e.dependedBy.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[r].concat((0,o.Z)(i.map((function(n){return e(n,r+1)})))))}(r.name,0)}},S=(0,l.Ps)(r||(r=(0,i.Z)(["\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      ...AssetNodeForGraphQuery\n    }\n  }\n\n  fragment AssetNodeForGraphQuery on AssetNode {\n    id\n    groupName\n    hasMaterializePermission\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    dependencyKeys {\n      path\n    }\n    dependedByKeys {\n      path\n    }\n    ...AssetNodeFragment\n  }\n\n  ","\n"])),x.zU)},64424:function(e,n,t){t.d(n,{l:function(){return b},m:function(){return S}});var r,i,o,a=t(99500),s=t(59019),l=t(73701),c=t(38565),d=t(70157),u=t(3159),p=t(58891),f=t.n(p),m=t(325),h=t(47678),g=t(55752),x=t(11540),y=t(39061),v=t(32289),j=2e3;function b(e){var n=(0,l.a)(N,{skip:0===e.length,variables:{assetKeys:e},notifyOnNetworkStatusChange:!0}),t=m.useMemo((function(){return n.data?(0,y.Qg)(n.data):{}}),[n.data]),r=m.useRef(!1);r.current=[c.I.refetch,c.I.loading].includes(n.networkStatus);var i=m.useRef(null),o=m.useCallback((function(){var e=n.refetch;i.current||(i.current=setTimeout((function n(){r.current?i.current=setTimeout(n,j):(i.current=null,e())}),j))}),[i,n.refetch]);m.useEffect((function(){return function(){i.current&&clearTimeout(i.current)}}),[]);var a=(0,h.C4)(n,3e4);(0,g.Qs)(n.refetch,j);var d=m.useMemo((function(){return new Set(e.map(y.Je))}),[e]),u=m.useMemo((function(){var e;return new Set((null===(e=n.data)||void 0===e?void 0:e.assetNodes.flatMap((function(e){return e.opNames})))||[])}),[n]),p=f()(Object.values(t).flatMap((function(e){return[].concat((0,s.Z)(e.unstartedRunIds),(0,s.Z)(e.inProgressRunIds))}))).sort().slice(0,3);return{liveDataByNode:t,liveDataRefreshState:a,runWatchers:(0,v.jsx)(v.Fragment,{children:p.map((function(e){return(0,v.jsx)(w,{runId:e,assetKeyTokens:d,assetStepKeys:u,callback:o},e)}))}),assetKeys:e}}var w=m.memo((function(e){var n=e.runId,t=e.assetKeyTokens,r=e.assetStepKeys,i=e.callback,o=m.useRef(0);return m.useEffect((function(){return console.log("Subscribed to ".concat(n)),function(){return console.log("Unsubscribed from ".concat(n," after ").concat(o.current," messages"))}}),[n]),(0,d.m)(C,{fetchPolicy:"no-cache",variables:{runId:n},onSubscriptionData:function(e){var n,a=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;"PipelineRunLogsSubscriptionSuccess"===(null===a||void 0===a?void 0:a.__typename)&&(o.current+=a.messages.length,a.messages.some((function(e){return"AssetMaterializationPlannedEvent"===e.__typename||"MaterializationEvent"===e.__typename||"ObservationEvent"===e.__typename?e.assetKey&&t.has((0,y.Je)(e.assetKey)):("ExecutionStepFailureEvent"===e.__typename||"ExecutionStepStartEvent"===e.__typename)&&(e.stepKey&&r.has(e.stepKey))}))&&i())}}),(0,v.jsx)("span",{})})),S=(0,u.Ps)(r||(r=(0,a.Z)(["\n  fragment AssetLatestInfoFragment on AssetLatestInfo {\n    assetKey {\n      path\n    }\n    unstartedRunIds\n    inProgressRunIds\n    latestRun {\n      id\n      ...AssetLatestInfoRun\n    }\n  }\n\n  fragment AssetLatestInfoRun on Run {\n    status\n    endTime\n    id\n  }\n"]))),N=(0,u.Ps)(i||(i=(0,a.Z)(["\n  query AssetGraphLiveQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      ...AssetNodeLiveFragment\n    }\n    assetsLatestInfo(assetKeys: $assetKeys) {\n      ...AssetLatestInfoFragment\n    }\n  }\n\n  ","\n  ","\n"])),x.oR,S),C=(0,u.Ps)(o||(o=(0,a.Z)(['\n  subscription AssetLiveRunLogsSubscription($runId: ID!) {\n    pipelineRunLogs(runId: $runId, cursor: "HEAD") {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          __typename\n          ... on AssetMaterializationPlannedEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on MaterializationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ObservationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ExecutionStepStartEvent {\n            stepKey\n          }\n          ... on ExecutionStepFailureEvent {\n            stepKey\n          }\n        }\n      }\n    }\n  }\n'])))},34449:function(e,n,t){t.d(n,{r:function(){return s}});var r,i=t(99500),o=t(3159),a=t(33774),s=(0,o.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetNodeConfigFragment on AssetNode {\n    id\n    configField {\n      name\n      isRequired\n      configType {\n        ...ConfigTypeSchemaFragment\n        recursiveConfigTypes {\n          ...ConfigTypeSchemaFragment\n        }\n      }\n    }\n  }\n\n  ","\n"])),a.S)},61460:function(e,n,t){t.d(n,{a:function(){return g},N:function(){return x}});var r,i=t(99500),o=t(73701),a=t(3159),s=t(32030),l=t(7838),c=t(60736),d=t(60652),u=(t(325),t(14156)),p=t(39061),f=t(37099),m=t(33902),h=t(32289),g="Multiple asset definitions found",x=function(e){var n=e.assetKey,t=e.loadedFromRepo,r=e.padded,i=(0,o.a)(y,{variables:{assetKeys:[{path:n.path}]}}).data,a=null===i||void 0===i?void 0:i.assetNodeDefinitionCollisions[0];if(!a)return(0,h.jsx)("span",{});var x=a.repositories.map((function(e){return(0,m.Uz)({name:e.name,location:e.location.name})}));return(0,h.jsx)(s.x,{padding:r?{vertical:16,left:24,right:12}:{},border:{side:"bottom",width:1,color:l.w.KeylineGray},children:(0,h.jsx)(c.b,{intent:"warning",title:g,description:(0,h.jsxs)(h.Fragment,{children:["This asset was loaded from"," ",(0,f.At)(t.name,t.location),", but duplicate definitions were found in"," ",(0,h.jsxs)(d.Z,{underline:"always",color:l.w.Yellow700,onClick:function(){return(0,u._)({title:g,body:(0,h.jsxs)(h.Fragment,{children:["Code locations containing an asset definition for"," ",(0,h.jsx)("strong",{children:(0,p.ll)(n)}),":",(0,h.jsx)("ul",{children:x.map((function(e){return(0,h.jsx)("li",{children:e},e)}))})]})})},children:[x.length-1," other repo",2===x.length?"":"s"]}),". You should rename these assets to avoid collisions."]})})})},y=(0,a.Ps)(r||(r=(0,i.Z)(["\n  query AssetDefinitionCollisionQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n"])))},6596:function(e,n,t){t.d(n,{cJ:function(){return x},Qe:function(){return y},gC:function(){return v}});var r=t(922),i=t(32030),o=t(7838),a=t(75497),s=t(54268),l=t(12745),c=t(519),d=t(325),u=t(55419),p=t(79714),f=t(59549),m=t(55752),h=t(3580),g=t(32289),x=function(e){var n=e.groups,t=e.focused,r=e.setFocused,a=e.xAxis,s=d.useRef(null),l=d.useRef(null),u=(0,c.useVirtualizer)({count:n.length,getScrollElement:function(){return s.current},estimateSize:function(){return 80},overscan:10}),p=u.getTotalSize(),f=u.getVirtualItems();return d.useEffect((function(){if(l.current){var e=l.current;e&&e instanceof HTMLElement&&"scrollIntoView"in e&&e.scrollIntoView({block:"nearest"})}}),[t]),(0,g.jsx)(y,{ref:s,children:(0,g.jsx)(h.Nh,{$totalHeight:p,children:f.map((function(e){var s=e.index,c=e.key,d=e.size,u=e.start,p=n[s];return(0,g.jsx)(v,{$height:d,$start:u,$focused:p===t,ref:p===t?l:void 0,onClick:function(e){e.target instanceof HTMLElement&&e.target.closest("a")||null===r||void 0===r||r(t!==p?p:void 0)},children:(0,g.jsx)(i.x,{style:{height:d},padding:{left:24,right:12},flex:{direction:"column",justifyContent:"center",gap:8},border:{side:"bottom",width:1,color:o.w.KeylineGray},children:"partition"===a?(0,g.jsx)(j,{group:p}):(0,g.jsx)(b,{group:p})})},c)}))})})},y=(0,r.ZP)(h.W2).withConfig({displayName:"AssetEventList__AssetListContainer",componentId:"y5fuyp-0"})(["outline:none;&:focus{box-shadow:0 -1px ",";}"],o.w.Blue500),v=(0,r.ZP)(h.X2).withConfig({displayName:"AssetEventList__AssetListRow",componentId:"y5fuyp-1"})(["cursor:pointer;user-select:none;:focus,:active,:hover{outline:none;background:",";}",""],o.w.Gray100,(function(e){return e.$focused&&"background: ".concat(o.w.Blue50,";\n     color: ").concat(o.w.Blue700,";\n     :hover {\n       background: ").concat(o.w.Blue50,";\n     }\n    ")})),j=function(e){var n=e.group,t=n.partition,r=n.latest,c=n.timestamp;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(i.x,{flex:{gap:4,direction:"row",alignItems:"flex-start"},children:[(0,g.jsx)(a.JO,{name:"partition"}),t,(0,g.jsx)("div",{style:{flex:1}}),r?(0,g.jsx)(s.V,{intent:"success",children:"Materialized"}):(0,g.jsx)(s.V,{intent:"none",children:"Missing"})]}),(0,g.jsx)(l.YS,{color:o.w.Gray600,style:{userSelect:"none"},children:c?(0,g.jsxs)("span",{children:["Materialized ",(0,g.jsx)(u.E,{timestamp:{ms:Number(c)}})]}):"Never materialized"})]})},b=function(e){var n=e.group,t=n.latest,r=n.partition,o=n.timestamp,l="Run"===(null===t||void 0===t?void 0:t.runOrError.__typename)?t.runOrError:null;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(i.x,{flex:{gap:4,direction:"row"},children:["MaterializationEvent"===(null===t||void 0===t?void 0:t.__typename)?(0,g.jsx)(a.JO,{name:"materialization"}):(0,g.jsx)(a.JO,{name:"observation"}),(0,g.jsx)(u.E,{timestamp:{ms:Number(o)}})]}),(0,g.jsxs)(i.x,{flex:{gap:4,direction:"row"},children:[r&&(0,g.jsx)(s.V,{children:r}),t&&l&&(0,g.jsx)(s.V,{children:(0,g.jsx)(p.T,{runId:l.runId,event:{stepKey:t.stepKey,timestamp:t.timestamp},children:(0,g.jsxs)(i.x,{flex:{gap:4,direction:"row",alignItems:"center"},children:[(0,g.jsx)(f.hk,{runId:l.runId,status:l.status,size:8}),(0,m.EI)(l)]})})})]})]})}},91847:function(e,n,t){t.d(n,{M:function(){return h}});var r=t(59019),i=t(19065),o=t(922),a=t(12745),s=t(60652),l=t(32030),c=t(75497),d=t(7838),u=(t(325),t(76314)),p=t(28064),f=t(32289),m=[p.H.AssetEventDataVersion.valueOf(),p.H.AssetEventDataVersionDeprecated.valueOf(),p.H.AssetEventCodeVersion.valueOf()],h=function(e){var n=e.event,t=e.paddingLeft,o=e.collapsible,d=(0,u.U)("show-asset-system-tags",Boolean),h=(0,i.Z)(d,2),x=h[0],y=h[1];return o&&!x?(0,f.jsx)(a.YS,{children:(0,f.jsx)(s.Z,{onClick:function(){return y(!0)},children:(0,f.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,f.jsxs)("span",{children:["Show tags (",(null===n||void 0===n?void 0:n.tags.length)||0,")"]}),(0,f.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:"rotate(0deg)"}})]})})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{children:(0,f.jsx)("tbody",{children:null!==n&&void 0!==n&&n.tags.length?(0,r.Z)(n.tags).sort((function(e,n){return m.indexOf(n.key)-m.indexOf(e.key)})).map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{paddingLeft:t},children:(0,f.jsx)(a.fv,{children:e.key.replace(p.H.Namespace,"")})}),(0,f.jsx)("td",{children:e.value})]},e.key)})):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{style:{paddingLeft:t},children:"No tags to display."})})})}),o&&(0,f.jsx)(a.YS,{children:(0,f.jsx)(s.Z,{onClick:function(){return y(!1)},children:(0,f.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,f.jsx)("span",{children:"Hide tags"}),(0,f.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:"rotate(180deg)"}})]})})})]})},g=o.ZP.table.withConfig({displayName:"AssetEventSystemTags__AssetEventSystemTagsTable",componentId:"sc-186zkuz-0"})(["width:100%;border-spacing:0;border-collapse:collapse;tr td:first-child{max-width:300px;word-wrap:break-word;width:25%;}tr td{border:1px solid ",";padding:8px 12px;font-size:14px;vertical-align:top;}"],d.w.KeylineGray)},52598:function(e,n,t){t.d(n,{i:function(){return x},Q:function(){return y}});var r,i=t(99500),o=t(19065),a=t(59019),s=t(3159),l=t(32030),c=t(11831),d=t(60652),u=t(325),p=t(74549),f=t(55419),m=t(77171),h=t(32289),g=function(e){var n=e.lineage_info,t=e.timestamp,r=1===n.partitions.length?"Partition":"Partitions",i=n.partitions.map((function(e){return'"'.concat(e,'"')})).join(", "),o=(0,m.p)(n.assetKey,{asOf:t});return(0,h.jsxs)(l.x,{margin:{bottom:4},children:[n.partitions.length>0?"".concat(r," ").concat(i," of "):"",(0,h.jsx)(c.u,{content:(0,h.jsxs)(h.Fragment,{children:["View snapshot as of"," ",(0,h.jsx)(f.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})]}),modifiers:{offset:{enabled:!0,options:{offset:[0,16]}}},placement:"right",children:(0,h.jsx)(p.rU,{to:o,children:(0,h.jsx)(l.x,{flex:{display:"inline-flex",alignItems:"center"},children:n.assetKey.path.map((function(e,n){return(0,h.jsx)("span",{children:e},n)})).reduce((function(e,n,t){return[].concat((0,a.Z)(e),[t>0?(0,h.jsxs)(u.Fragment,{children:["\xa0",">","\xa0"]},"".concat(t,"-space")):null,n])}),[])})})})]})},x=function(e){var n=e.elements,t=e.timestamp,r=u.useState(!0),i=(0,o.Z)(r,2),a=i[0],s=i[1];return(0,h.jsxs)("div",{children:[n.length>5&&(0,h.jsx)(d.Z,{onClick:function(){return s(!a)},children:a?"Show More":"Show Less"}),(a?n.slice(n.length-5):n).map((function(e,n){return(0,h.jsx)(g,{lineage_info:e,timestamp:t},n)}))]})},y=(0,s.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n"])))},4041:function(e,n,t){t.d(n,{l:function(){return y}});var r=t(47427),i=t(59019),o=t(19065),a=t(32030),s=t(7838),l=t(12745),c=t(89646),d=t(75453),u=t(62816),p=t.n(u),f=t(58891),m=t.n(f),h=t(325),g=t(55853),x=t(32289),y=function(e){var n=h.useState(null),t=(0,o.Z)(n,2),r=t[0],u=t[1],p=h.useMemo((function(){return(0,i.Z)(e.groups).reverse()}),[e.groups]),f=v(p,e.xAxis),m=Object.keys(f).slice(0,20).sort();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr ".repeat(e.columnCount||2),justifyContent:"stretch"},children:m.map((function(n){return(0,x.jsx)(a.x,{style:{width:"100%"},border:{side:"bottom",width:1,color:s.w.KeylineGray},children:(0,x.jsxs)(a.x,{style:{width:"100%"},border:{side:"right",width:1,color:s.w.KeylineGray},children:[e.asSidebarSection?(0,x.jsx)(a.x,{padding:{horizontal:24,top:8},flex:{justifyContent:"space-between"},children:(0,x.jsx)(l.YS,{style:{fontWeight:700},children:n})}):(0,x.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:s.w.KeylineGray},flex:{justifyContent:"space-between"},children:(0,x.jsx)(l.pm,{children:n})}),(0,x.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,x.jsx)(g.K,{label:n,width:"100%",data:f[n],xHover:r,onHoverX:function(e){return e!==r&&u(e)}})})]})},n)}))}),0===m.length?e.asSidebarSection?(0,x.jsx)(a.x,{margin:{horizontal:24,vertical:12},style:{color:s.w.Gray500,fontSize:"0.8rem"},children:"No numeric metadata entries available to be graphed."}):(0,x.jsx)(a.x,{padding:{horizontal:24,top:64},children:(0,x.jsx)(c.t,{shrinkable:!0,icon:"asset_plot",title:"Asset plots are automatically generated by metadata",description:"Include numeric metadata entries in your materializations and observations to see data graphed by time or partition.",action:(0,x.jsx)(d.fr,{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata",children:"View documentation"})})}):"partition"===e.xAxis&&(0,x.jsx)(a.x,{padding:{vertical:16,horizontal:24},style:{color:s.w.Gray400},children:"When graphing values by partition, the highest data point for each materialized event label is displayed."})]})},v=function(e,n){var t,o={},a=m()(p()(e,(function(e){var n;return((null===(n=e.latest)||void 0===n?void 0:n.metadataEntries)||[]).filter((function(e){return["IntMetadataEntry","FloatMetadataEntry"].includes(e.__typename)})).map((function(e){return e.label}))}))),s=function(e,t){var r=t.x,i=t.y;if(o[e]=o[e]||{minX:0,maxX:0,minY:0,maxY:0,values:[],xAxis:n},"partition"===n){var a=o[e].values.find((function(e){return e.x===r}));if(a)return void(isNaN(i)||(a.y=i))}o[e].values.push({xNumeric:"number"===typeof r?r:o[e].values.length,x:r,y:i})},l=(0,r.Z)(e);try{for(l.s();!(t=l.n()).done;){var c=t.value,d=c.partition,u=c.latest,f=("partition"===n?d:Number(null===u||void 0===u?void 0:u.timestamp))||null;if(null!==f){var h,g=(0,r.Z)(a);try{var x=function(){var e=h.value,n=null===u||void 0===u?void 0:u.metadataEntries.find((function(n){return n.label===e}));if(!n)return s(e,{x:f,y:NaN}),"continue";var t=NaN;"IntMetadataEntry"===n.__typename&&(t=null!==n.intValue?n.intValue:parseInt(n.intRepr)),"FloatMetadataEntry"===n.__typename&&null!==n.floatValue&&(t=n.floatValue),s(e,{x:f,y:t})};for(g.s();!(h=g.n()).done;)x()}catch(S){g.e(S)}finally{g.f()}}}}catch(S){l.e(S)}finally{l.f()}for(var y=0,v=Object.values(o);y<v.length;y++){var j=v[y],b=j.values.map((function(e){return e.xNumeric})),w=j.values.map((function(e){return e.y})).filter((function(e){return!isNaN(e)}));j.minXNumeric=Math.min.apply(Math,(0,i.Z)(b)),j.maxXNumeric=Math.max.apply(Math,(0,i.Z)(b)),j.minY=Math.min.apply(Math,(0,i.Z)(w)),j.maxY=Math.max.apply(Math,(0,i.Z)(w))}return o}},7713:function(e,n,t){t.d(n,{U6:function(){return u},mQ:function(){return p},Ws:function(){return f}});var r,i=t(99500),o=t(3159),a=t(32030),s=t(57753),l=(t(325),t(33208)),c=t(4735),d=t(32289),u=function(e){return{assetType:e.type?e.type:void 0,assetMetadata:e.metadataEntries||[]}},p=function(e){var n=e.assetMetadata,t=e.repoLocation,r=n.map((function(e){return{key:e.label,value:(0,d.jsx)(c.BL,{entry:e,repoLocation:t})}}));return(0,d.jsx)(a.x,{padding:{vertical:16,horizontal:24},children:(0,d.jsx)(s.nZ,{rows:r})})},f=(0,o.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      __typename\n      ...DagsterTypeFragment\n    }\n  }\n\n  ","\n  ","\n"])),c.it,l.rB)},4445:function(e,n,t){t.d(n,{_e:function(){return p},g8:function(){return m},oS:function(){return h},ux:function(){return x}});var r,i=t(16798),o=t(922),a=t(7838),s=t(32030),l=t(11831),c=t(75497),d=(t(325),t(23300)),u=t(32289),p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(void 0===e?"-":e.toLocaleString()," ").concat(n).concat(n?" ":"").concat(1===e?"partition":"partitions")},f=function(e){return e?e.numPartitions-e.numFailed-e.numMaterializing-e.numMaterialized:void 0},m=(r={},(0,i.Z)(r,d.yo.FAILED,{background:a.w.Red50,foreground:a.w.Red700,border:a.w.Red500,icon:"partition_failure",adjective:"failed"}),(0,i.Z)(r,d.yo.MATERIALIZED,{background:a.w.Green50,foreground:a.w.Green700,border:a.w.Green500,icon:"partition_success",adjective:"materialized"}),(0,i.Z)(r,d.yo.MATERIALIZING,{background:a.w.Blue50,foreground:a.w.Blue700,border:a.w.Blue500,icon:"partition_success",adjective:"materializing"}),(0,i.Z)(r,d.yo.MISSING,{background:a.w.Gray100,foreground:a.w.Gray900,border:a.w.Gray500,icon:"partition_missing",adjective:"missing"}),r),h=function(e){var n,t=null===(n=e.liveData)||void 0===n?void 0:n.partitionStats;return(0,u.jsxs)(s.x,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:2},children:[(0,u.jsx)(g,{status:d.yo.MATERIALIZED,value:null===t||void 0===t?void 0:t.numMaterialized,total:null===t||void 0===t?void 0:t.numPartitions}),(0,u.jsx)(g,{status:d.yo.MISSING,value:f(t),total:null===t||void 0===t?void 0:t.numPartitions}),(0,u.jsx)(g,{status:d.yo.FAILED,value:null===t||void 0===t?void 0:t.numFailed,total:null===t||void 0===t?void 0:t.numPartitions})]})},g=function(e){var n=e.status,t=e.value,r=e.total,i=m[n],o=t?i.foreground:a.w.Gray500,s=t?i.background:a.w.Gray50;return(0,u.jsx)(l.u,{display:"block",position:"top",canShow:void 0!==t,content:p(t,i.adjective),children:(0,u.jsxs)(v,{style:{color:o,background:s},children:[(0,u.jsx)(c.JO,{name:i.icon,color:o,size:12}),void 0===t?"\u2014":t===r?"All":t>1e3?"999+":t]})})},x=function(e){var n=e.partitionStats;return(0,u.jsxs)(s.x,{style:{display:"flex",gap:8},children:[(0,u.jsx)(y,{status:d.yo.MATERIALIZED,value:null===n||void 0===n?void 0:n.numMaterialized,total:null===n||void 0===n?void 0:n.numPartitions}),(0,u.jsx)(y,{status:d.yo.MISSING,value:f(n),total:null===n||void 0===n?void 0:n.numPartitions}),(0,u.jsx)(y,{status:d.yo.FAILED,value:null===n||void 0===n?void 0:n.numFailed,total:null===n||void 0===n?void 0:n.numPartitions}),(0,u.jsx)(y,{status:d.yo.MATERIALIZING,value:null===n||void 0===n?void 0:n.numMaterializing,total:null===n||void 0===n?void 0:n.numPartitions})]})},y=function(e){var n=e.status,t=e.value,r=e.total,i=m[n];return(0,u.jsx)(l.u,{display:"block",position:"top",canShow:void 0!==t,content:p(t,i.adjective),children:(0,u.jsxs)(s.x,{flex:{gap:4,alignItems:"center"},style:{color:void 0===t||0===t?a.w.Gray300:a.w.Dark},children:[(0,u.jsx)(c.JO,{name:i.icon,color:t?i.border:a.w.Gray300,size:12}),void 0===t?"\u2014":t===r?"All":t.toLocaleString()]})})},v=o.ZP.div.withConfig({displayName:"AssetNodePartitionCounts__PartitionCountContainer",componentId:"yxh173-0"})(["width:100%;border-radius:6px;font-size:12px;gap:4px;display:flex;align-items:center;justify-content:center;padding:4px;"])},6291:function(e,n,t){t.d(n,{k:function(){return p},d:function(){return f}});var r=t(95764),i=t(32030),o=t(7838),a=t(519),s=t(325),l=t(3580),c=t(6596),d=t(23300),u=t(32289),p=function(e){var n=e.focusedDimensionKey,t=e.setFocusedDimensionKey,r=e.statusForPartition,p=e.partitions,m=s.useRef(null),h=(0,a.useVirtualizer)({count:p.length,getItemKey:function(e){return p[e]},getScrollElement:function(){return m.current},estimateSize:function(){return 36},overscan:10}),g=h.getTotalSize(),x=h.getVirtualItems();return s.useEffect((function(){n&&h.scrollToIndex(p.indexOf(n),{smoothScroll:!1,align:"auto"})}),[n,h,p]),(0,u.jsx)(c.Qe,{ref:m,tabIndex:-1,onKeyDown:function(e){var r={ArrowDown:1,ArrowUp:-1}[e.key];if(t&&r&&n&&!e.isDefaultPrevented()){var i=p.indexOf(n)+r,o=p[i];o&&(e.preventDefault(),t(o))}},children:(0,u.jsx)(l.Nh,{$totalHeight:g,children:x.map((function(e){var a=e.index,s=e.key,l=e.size,m=e.start,h=p[a],g=r(h);return(0,u.jsx)(c.gC,{$height:l,$start:m,$focused:h===n,onClick:function(e){e.target instanceof HTMLElement&&e.target.closest("a")||null===t||void 0===t||t(n!==h?h:void 0)},children:(0,u.jsx)(i.x,{style:{height:l},padding:{left:24,right:12},flex:{direction:"column",justifyContent:"center",gap:8},border:{side:"bottom",width:1,color:o.w.KeylineGray},children:(0,u.jsxs)(i.x,{flex:{gap:4,direction:"row",alignItems:"center"},children:[h,(0,u.jsx)("div",{style:{flex:1}}),g.includes(d.yo.MISSING)&&(0,u.jsx)(f,{status:[d.yo.MISSING]}),g.includes(d.yo.FAILED)&&(0,u.jsx)(f,{status:[d.yo.FAILED]}),g.includes(d.yo.MATERIALIZING)&&(0,u.jsx)(f,{status:[d.yo.MATERIALIZING]}),g.includes(d.yo.MATERIALIZED)&&(0,u.jsx)(f,{status:[d.yo.MATERIALIZED]})]})})},s)}))})})},f=function(e){var n=e.status;return(0,u.jsx)("div",{style:(0,r.Z)({width:10,height:10,borderRadius:"100%",flexShrink:0},(0,d.Tg)(n))})}},79986:function(e,n,t){t.d(n,{Tx:function(){return f},Dn:function(){return m},vy:function(){return h},jY:function(){return g}});var r=t(11831),i=t(54268),o=t(13008),a=t.n(o),s=t(55386),l=t.n(s),c=t(93975),d=t.n(c),u=(t(325),t(36243)),p=t(32289);function f(e){return(null===e||void 0===e?void 0:e.freshnessInfo)&&((null===e||void 0===e?void 0:e.freshnessInfo.currentMinutesLate)||0)>0||!1}a().extend(l()),a().extend(d());var m=function(e){return"".concat(a().duration(e,"minutes").humanize(!1)," overdue")},h=function(e){var n=e.liveData,t=e.policyOnHover,o=n.freshnessInfo,a=n.freshnessPolicy,s=t?g(a):"";return o?null===o.currentMinutesLate?(0,p.jsx)(r.u,{content:(0,p.jsx)("div",{style:{maxWidth:400},children:"".concat("This asset has never been materialized."," ").concat(s)}),children:(0,p.jsx)(i.V,{intent:"danger",icon:"warning",children:"Overdue"})}):0===o.currentMinutesLate?s?(0,p.jsx)(r.u,{content:g(a),children:(0,p.jsx)(i.V,{intent:"success",icon:"check_circle"})}):(0,p.jsx)(i.V,{intent:"success",icon:"check_circle"}):(0,p.jsx)(r.u,{content:(0,p.jsx)("div",{style:{maxWidth:400},children:"".concat("A materialization incorporating more recent upstream data is overdue."," ").concat(s)}),children:(0,p.jsx)(i.V,{intent:"danger",icon:"warning",children:m(o.currentMinutesLate)})}):null},g=function(e){if(!e)return"";var n=e.cronSchedule,t=e.maximumLagMinutes,r=e.cronScheduleTimezone,i=n?(0,u.A)(n,r||"UTC").replace(/^At /,""):"",o=t%30===0?"".concat(t/60," hour").concat(t/60!==1?"s":""):"".concat(t," min");return i?"By ".concat(i,", this asset should incorporate all data up to ").concat(o," before that").concat("\xa0","time."):"At any point in time, this asset should incorporate all data up to ".concat(o," before that").concat("\xa0","time.")}},73522:function(e,n,t){t.d(n,{j:function(){return d}});var r=t(32030),i=t(60736),o=t(34595),a=t(325),s=t(74549),l=t(55752),c=t(32289),d=function(e){var n=e.liveData,t=e.border,d=n||{},u=d.inProgressRunIds,p=void 0===u?[]:u,f=d.unstartedRunIds,m=void 0===f?[]:f;return 0===p.length&&0===m.length?null:(0,c.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:t,children:(0,c.jsx)(i.b,{intent:"info",icon:(0,c.jsx)(o.$,{purpose:"body-text"}),title:(0,c.jsxs)("div",{style:{fontWeight:400},children:[p.length>0&&(0,c.jsxs)(c.Fragment,{children:[p.map((function(e){return(0,c.jsxs)(a.Fragment,{children:["Run"," ",(0,c.jsx)(s.rU,{to:"/runs/".concat(e),children:(0,l.EI)({runId:e})})]},e)}))," ",1===p.length?"is":"are"," currently refreshing this asset."]}),m.length>0&&(0,c.jsxs)(c.Fragment,{children:[m.map((function(e){return(0,c.jsxs)(a.Fragment,{children:["Run"," ",(0,c.jsx)(s.rU,{to:"/runs/".concat(e),children:(0,l.EI)({runId:e})})]},e)}))," ",1===m.length?"has":"have"," started and will refresh this asset."]})]})})})}},11936:function(e,n,t){t.d(n,{x:function(){return l}});var r=t(32030),i=t(7838),o=t(60736),a=t(75497),s=(t(325),t(32289)),l=function(){return(0,s.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:{side:"bottom",width:1,color:i.w.KeylineGray},children:(0,s.jsx)(o.b,{intent:"info",icon:(0,s.jsx)(a.JO,{name:"history_toggle_off",size:16,color:i.w.Blue700,style:{marginTop:1}}),title:(0,s.jsx)("div",{style:{fontWeight:400},children:"This asset depends on earlier partitions of itself. "})})})}},25329:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(32030),i=t(60736),o=(t(325),t(74549)),a=t(55752),s=t(32289),l=function(e){var n=e.run,t=e.border,l=e.padding,c=void 0===l?{vertical:16,left:24,right:12}:l;return n?(0,s.jsx)(r.x,{padding:c,border:t,children:(0,s.jsx)(i.b,{intent:"error",title:(0,s.jsxs)("div",{style:{fontWeight:400},children:["Run ",(0,s.jsx)(o.rU,{to:"/runs/".concat(n.id),children:(0,a.EI)({runId:n.id})})," failed to materialize this asset."]})})}):null}},52165:function(e,n,t){t.d(n,{U2:function(){return Ge},XE:function(){return Ie},VF:function(){return Le},Ot:function(){return Fe},ZP:function(){return Ke},DO:function(){return Ae}});var r,i,o,a,s,l,c=t(99500),d=t(85358),u=t(19065),p=t(95550),f=t.n(p),m=t(31522),h=t(3159),g=t(75497),x=t(11831),y=t(75453),v=t(32030),j=t(34595),b=t(762),w=t(8412),S=t(26966),N=t.n(S),C=t(58891),k=t.n(C),P=t(325),E=t(14156),_=t(79540),I=t(39061),A=t(20021),Z=t(25859),O=t(1520),K=t(33774),M=t(37099),D=t(33902),z=t(34449),T=t(61460),F=t(59019),L=t(95764),R=t(922),G=t(73701),$=t(77843),B=t(8358),V=t(12745),J=t(7838),U=t(60736),q=t(50346),Q=R.ZP.div.withConfig({displayName:"Radio__RadioContainer",componentId:"sc-1a1frnn-0"})([".bp4-control{margin-bottom:0;display:flex;flex-direction:row;align-items:center;input{display:none;}}.bp4-control.bp4-radio{padding:4px 4px 4px 0;}.bp4-control.bp4-radio.bp4-disabled{cursor:default;color:",";","{opacity:0.3;}}.bp4-control .bp4-control-indicator{margin:0;margin-right:8px;}.bp4-control input:checked ~ .bp4-control-indicator{background-color:",";}.bp4-control.bp4-radio input:disabled ~ .bp4-control-indicator{cursor:default;opacity:0.7;}.bp4-control.bp4-radio input:disabled:checked ~ .bp4-control-indicator{background-color:",";}.bp4-control .bp4-control-indicator,.bp4-control .bp4-control-indicator::before{width:18px;height:18px;}"],J.w.Gray300,g.a1,J.w.Blue500,J.w.Blue200),H=t(60652),Y=t(24083),W=t.n(Y),X=t(27601),ee=t(63579),ne=t(12436),te=t(69305),re=t(22013),ie=t(89493),oe=t(33547),ae=t(79253),se=t(29399),le=t(26961),ce=t(28064),de=t(23300),ue=t(36613),pe=t(95609),fe=t(74549),me=t(32289),he=function(e){var n=e.partitionSetName,t=(0,G.a)(ge).data,r=("PartitionBackfills"===(null===t||void 0===t?void 0:t.partitionBackfillsOrError.__typename)?t.partitionBackfillsOrError.results:[]).filter((function(e){return e.partitionSetName===n})).length;return 0===r?(0,me.jsx)("span",{}):(0,me.jsxs)("div",{style:{color:J.w.Gray400,maxWidth:350},children:[1===r?"Note: A backfill has been requested for this job and may be refreshing displayed assets. ":"Note: ".concat(r," backfills have been requested for this job and may be refreshing displayed assets. "),(0,me.jsx)(fe.rU,{to:"/overview/backfills",target:"_blank",children:(0,me.jsxs)(v.x,{flex:{gap:4,display:"inline-flex",alignItems:"center"},children:["View ",(0,me.jsx)(g.JO,{name:"open_in_new",color:J.w.Link})]})})]})},ge=(0,h.Ps)(r||(r=(0,c.Z)(["\n  query RunningBackfillsNoticeQuery {\n    partitionBackfillsOrError(status: REQUESTED) {\n      __typename\n      ... on PartitionBackfills {\n        results {\n          id\n          partitionSetName\n        }\n      }\n    }\n  }\n"]))),xe=t(30885),ye=t(47619),ve=function(e){var n=e.assets.length>1?"".concat(e.assets.length," assets"):(0,I.ll)(e.assets[0].assetKey),t="Launch runs to materialize ".concat(n);return(0,me.jsxs)(B.Vq,{style:{width:700},isOpen:e.open,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return e.setOpen(!1)},children:[(0,me.jsx)(B.fK,{icon:"layers",label:t}),(0,me.jsx)(je,(0,L.Z)({},e))]})},je=function(e){var n,t=e.setOpen,r=e.assets,i=e.repoAddress,o=e.target,a=e.upstreamAssetKeys,s=e.refetch,l=r.filter((function(e){return!!e.partitionDefinition})),c=(0,ee.xz)(i.location),p=c.permissions,h=p.canLaunchPipelineExecution,j=p.canLaunchPartitionBackfill,b=c.disabledReasons,w=P.useState(!1),S=(0,u.Z)(w,2),N=S[0],C=S[1],k=P.useState(!1),_=(0,u.Z)(k,2),Z=_[0],K=_[1],M=P.useState([]),D=(0,u.Z)(M,2),z=D[0],T=D[1],R=P.useState(0),G=(0,u.Z)(R,2),Y=G[0],W=G[1],le=l.length-Y,fe=P.useState(Date.now()),ge=(0,u.Z)(fe,2),ve=ge[0],je=ge[1],be=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===s||void 0===s?void 0:s();case 2:je(Date.now());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=(0,ye.mR)(l.map((function(e){return e.assetKey})),ve.toString(),"immediate"),Ce=0===we.length,ke=P.useMemo((function(){return"job"===o.type||Ce?(0,ue.$G)(we):we.find((0,I.Bl)(o.anchorAssetKey))||(0,ue.$G)([])}),[we,Ce,o]),Pe="job"===o.type?l[0]:l.find((0,I.Bl)(o.anchorAssetKey)),Ee=null===Pe||void 0===Pe?void 0:Pe.partitionDefinition,_e=(null===(n=l[0].partitionDefinition)||void 0===n?void 0:n.dimensionTypes)||[],Ie=P.useState(!0),Ae=(0,u.Z)(Ie,2),Ze=Ae[0],Oe=Ae[1],Ke=(0,xe.q)({knownDimensionNames:_e.map((function(e){return e.name})),modifyQueryString:!1,assetHealth:ke,skipPartitionKeyValidation:(null===Ee||void 0===Ee?void 0:Ee.type)===te.iVC.DYNAMIC,shouldReadPartitionQueryStringParam:!0}),Me=(0,u.Z)(Ke,2),De=Me[0],ze=Me[1],Te=P.useMemo((function(){return(0,ue.f1)(De,(function(e){var n=ke.stateForKey(e);return n instanceof Array||(n=[n]),n}))}),[De,ke]),Le=P.useState(!1),Re=(0,u.Z)(Le,2),Ge=Re[0],$e=Re[1],Be=De.every((function(e){return 1===e.selectedRanges.length}))&&De.some((function(e){return e.selectedKeys.length>1})),Ve=P.useMemo((function(){return Ze?Te.filter((function(e){return[de.yo.MISSING,de.yo.FAILED].some((function(n){return e.state.includes(n)}))})):Te}),[Te,Ze]),Je=(0,m.x)(),Ue=(0,X.k6)(),qe=(0,(0,A.C)().useLaunchWithTelemetry)(),Qe="pureWithAnchorAsset"===o.type||!Ge&&1!==Ve.length;P.useEffect((function(){!Be&&$e(!1)}),[Be]),P.useEffect((function(){Ge&&Oe(!1)}),[Ge]),P.useEffect((function(){"pureWithAnchorAsset"===o.type&&Oe(!1)}),[o]);var He=function(){var e=(0,d.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),!Qe){e.next=6;break}return e.next=4,We();case 4:e.next=8;break;case 6:return e.next=8,Ye();case 8:C(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,d.Z)(f().mark((function e(){var n,a,s,l,c,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("jobName"in o){e.next=3;break}return(0,E._)({title:"Unable to launch as single run",body:"This selection is not valid for a single run launch. Please report this error to the Dagster team."}),e.abrupt("return");case 3:return h||(0,E._)({title:"Unable to launch as single run",body:"You do not have permission to launch this job."}),e.next=6,Je.query({query:ie.Fp,fetchPolicy:"network-only",variables:{repositorySelector:{repositoryLocationName:i.location,repositoryName:i.name},partitionSetName:o.partitionSetName,partitionName:Ve[0].partitionKey}});case 6:if(n=e.sent,(a=n.data)&&a.partitionSetOrError&&"PartitionSet"===a.partitionSetOrError.__typename&&a.partitionSetOrError.partition){e.next=10;break}return e.abrupt("return");case 10:if("PythonError"!==(s=a.partitionSetOrError.partition).tagsOrError.__typename){e.next=14;break}return(0,E._)({title:"Unable to load tags",body:(0,me.jsx)(ne.T,{error:s.tagsOrError})}),e.abrupt("return");case 14:if("PythonError"!==s.runConfigOrError.__typename){e.next=17;break}return(0,E._)({title:"Unable to load tags",body:(0,me.jsx)(ne.T,{error:s.runConfigOrError})}),e.abrupt("return");case 17:return l=s.runConfigOrError.yaml||"",c=[].concat((0,F.Z)(s.tagsOrError.results),(0,F.Z)(z)),Ge&&((c=c.filter((function(e){return!e.key.startsWith(ce.H.Partition)}))).push({key:ce.H.AssetPartitionRangeStart,value:Te[0].partitionKey}),c.push({key:ce.H.AssetPartitionRangeEnd,value:Te[Te.length-1].partitionKey})),e.next=22,qe({executionParams:(0,L.Z)((0,L.Z)({},Fe(i,o.jobName,r,c)),{},{runConfigData:l,mode:s.mode})},"toast");case 22:"LaunchRunSuccess"===(null===(d=e.sent)||void 0===d?void 0:d.__typename)&&t(!1);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=(0,d.Z)(f().mark((function e(){var n,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="jobName"in o&&!(0,I.pv)(o.jobName)?{partitionSetName:o.partitionSetName,repositorySelector:{repositoryLocationName:i.location,repositoryName:i.name}}:void 0,e.next=3,Je.mutate({mutation:re.f,variables:{backfillParams:{selector:n,assetSelection:r.map((function(e){return{path:e.assetKey.path}})),partitionNames:Ve.map((function(e){return e.partitionKey})),fromFailure:!1,tags:z}}});case 3:a=e.sent,"LaunchBackfillSuccess"===(null===(s=a.data)||void 0===s?void 0:s.launchPartitionBackfill.__typename)?((0,ae.Xd)(Ue,null===s||void 0===s?void 0:s.launchPartitionBackfill.backfillId,!0),t(!1)):(0,ae.mv)(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)("div",{"data-testid":(0,O.N)("choose-partitions-dialog"),children:[(0,me.jsx)(Se,{launchAsBackfill:Qe,upstreamAssetKeys:a,selections:De,setSelections:ze}),(0,me.jsxs)(Ne,{title:(0,me.jsx)(V.pm,{children:"Partition selection"}),isInitiallyOpen:!0,children:["pureWithAnchorAsset"===o.type&&(0,me.jsxs)(v.x,{flex:{alignItems:"center",gap:8},padding:{top:12,horizontal:24},"data-testid":(0,O.N)("anchor-asset-label"),children:[(0,me.jsx)(g.JO,{name:"asset"}),(0,me.jsx)(V.pm,{children:(0,I.ll)(o.anchorAssetKey)})]}),De.map((function(e,n){var t,r;return(0,me.jsxs)(v.x,{border:{side:"bottom",width:1,color:J.w.KeylineGray},padding:{vertical:12,horizontal:24},children:[(0,me.jsxs)(v.x,{as:V.pm,flex:{alignItems:"center",gap:8},children:[(0,me.jsx)(g.JO,{name:"partition"}),e.dimension.name]}),(0,me.jsxs)(v.x,{children:["Select partitions to materialize."," ",e.dimension.type===te.iVC.TIME_WINDOW?"Click and drag to select a range on the timeline.":null]}),(0,me.jsx)(se.x,{partitionKeys:e.dimension.partitionKeys,health:{ranges:ke.rangesForSingleDimension(n,2===De.length?De[1-n].selectedRanges:void 0)},dimensionType:e.dimension.type,selected:e.selectedKeys,setSelected:function(n){return ze((function(t){return t.map((function(t){return t.dimension===e.dimension?(0,L.Z)((0,L.Z)({},t),{},{selectedKeys:n}):t}))}))},partitionDefinitionName:(null===Ee||void 0===Ee?void 0:Ee.name)||(null===Pe||void 0===Pe||null===(t=Pe.partitionDefinition)||void 0===t||null===(r=t.dimensionTypes.find((function(n){return n.name===e.dimension.name})))||void 0===r?void 0:r.dynamicPartitionsDefinitionName),repoAddress:i,refetch:be}),"pureWithAnchorAsset"===o.type&&(0,me.jsx)(U.b,{intent:"info",title:"Dagster will materialize all partitions downstream of the selected partitions for the selected assets, using separate runs as needed."},"alert")]},e.dimension.name)}))]}),(0,me.jsx)(Ne,{title:(0,me.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,me.jsx)(V.pm,{children:"Tags"}),(0,me.jsxs)("span",{children:[z.length," tags"]})]}),isInitiallyOpen:!1,children:(0,me.jsxs)(v.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:12},children:[(0,me.jsx)(oe.U,{tagsFromSession:z,onChange:T,open:Z,onRequestClose:function(){return K(!1)}}),(0,me.jsx)("div",{children:"Tags will be applied to all backfill runs"}),z.length?(0,me.jsx)(oe.x,{tagsFromSession:z,onRequestEdit:function(){return K(!0)},actions:[{label:"Remove",onClick:function(e){T(z.filter((function(n){return n.key!==e.key})))}}]}):null,(0,me.jsx)("div",{children:(0,me.jsx)(y.zx,{onClick:function(){return K(!0)},children:"".concat(z.length?"Edit":"Add"," tags")})})]})}),(0,me.jsx)(Ne,{title:(0,me.jsx)(V.pm,{"data-testid":(0,O.N)("backfill-options"),children:"Backfill options"}),isInitiallyOpen:!0,children:"job"===o.type&&(0,me.jsxs)(v.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:12},children:[(0,me.jsx)(q.X,{"data-testid":(0,O.N)("missing-only-checkbox"),label:"Backfill only failed and missing partitions within selection",checked:Ze,disabled:Ge,onChange:function(){return Oe(!Ze)}}),(0,me.jsxs)(Q,{children:[(0,me.jsx)(V.pm,{children:"Launch as..."}),(0,me.jsx)($.Y8,{"data-testid":(0,O.N)("ranges-as-tags-true-radio"),checked:Be&&Ge,disabled:!Be,onChange:function(){return $e(!Ge)},children:(0,me.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,me.jsx)("span",{children:"Single run"}),(0,me.jsx)(x.u,{targetTagName:"div",position:"top-left",content:(0,me.jsx)("div",{style:{maxWidth:300},children:"This option requires that your assets are written to operate on a partition key range via context.asset_partition_key_range_for_output or context.asset_partitions_time_window_for_output."}),children:(0,me.jsx)(g.JO,{name:"info",color:J.w.Gray500})})]})}),(0,me.jsx)($.Y8,{"data-testid":(0,O.N)("ranges-as-tags-false-radio"),checked:!Be||!Ge,disabled:!Be,onChange:function(){return $e(!Ge)},children:"Multiple runs (One per selected partition)"})]})]})}),(0,me.jsxs)(v.x,{padding:{horizontal:24},children:[Y>0&&(0,me.jsxs)(v.x,{margin:{top:16},flex:{direction:"column",gap:8},padding:{vertical:16,horizontal:20},border:{side:"horizontal",width:1,color:J.w.KeylineGray},background:J.w.Gray100,style:{marginLeft:-20,marginRight:-20,overflowY:"auto",overflowX:"visible",maxHeight:"35vh"},children:[l.slice(0,Y).map((function(e){return(0,me.jsx)(pe.m,{assetKey:e.assetKey,showAssetKey:!0,data:we,selections:e.partitionDefinition&&Ee&&(0,ue.z3)(e.partitionDefinition,Ee)?De:void 0},(0,I.ll)(e.assetKey))})),le>0&&(0,me.jsx)(v.x,{margin:{vertical:8},children:(0,me.jsxs)(H.Z,{onClick:function(){return W(l.length)},children:["Show ",le," more ",le>1?"previews":"preview"]})})]}),0===Y&&l.length>1&&(0,me.jsx)(v.x,{margin:{top:16,bottom:8},children:(0,me.jsx)(H.Z,{onClick:function(){return W(5)},children:"Show per-asset partition health"})})]})]}),(0,me.jsxs)(B.cN,{topBorder:!0,left:"partitionSetName"in o&&(0,me.jsx)(he,{partitionSetName:o.partitionSetName}),children:[(0,me.jsx)(y.zx,{intent:"none",onClick:function(){return t(!1)},children:"Cancel"}),Qe&&!j?(0,me.jsx)(x.u,{content:b.canLaunchPartitionBackfill,children:(0,me.jsx)(y.zx,{disabled:!0,children:"job"===o.type?"Launch ".concat(Ve.length,"-run backfill"):"Launch backfill"})}):Qe||h?(0,me.jsx)(y.zx,{"data-testid":(0,O.N)("launch-button"),intent:"primary",onClick:He,disabled:0===Ve.length,loading:N,children:N?"Launching...":Qe?"job"===o.type?"Launch ".concat(Ve.length,"-run backfill"):"Launch backfill":"Launch 1 run"}):(0,me.jsx)(x.u,{content:b.canLaunchPipelineExecution,children:(0,me.jsx)(y.zx,{disabled:!0,children:"Launch 1 run"})})]})]})},be=function(e){var n=e.upstreamAssetKeys,t=e.selections,r=e.setSelections,i=(0,ye.mR)(n);if(0===i.length)return null;var o=function(e){return i.some((function(n){return n.dimensions.length&&n.stateForKey([e])===de.yo.MISSING}))},a=1===t.length?(0,le.lU)(t[0].selectedKeys,o).filter((function(e){return!0===e.status})):[];if(0===a.length)return null;return(0,me.jsx)(U.b,{intent:"warning",title:"Upstream data missing",description:(0,me.jsxs)(me.Fragment,{children:[a.map((function(e){return(0,le.ZX)(e,t[0].selectedKeys)})).join(", ")," cannot be materialized because upstream materializations are missing. Consider materializing upstream assets or ",(0,me.jsx)(H.Z,{underline:"always",onClick:function(){if(t.length>1)throw new Error("Assertion failed, this feature is only available for 1 dimensional assets");r([(0,L.Z)((0,L.Z)({},t[0]),{},{selectedKeys:W()(t[0].selectedKeys,o)})])},children:"remove these partitions"})," to avoid failures."]})})},we=(0,h.Ps)(i||(i=(0,c.Z)(["\n  query LaunchAssetChoosePartitionsQuery {\n    instance {\n      ...DaemonNotRunningAlertInstanceFragment\n      ...UsingDefaultLauncherAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n"])),ae.op,ae.gk),Se=function(e){var n,t=e.launchAsBackfill,r=e.upstreamAssetKeys,i=e.selections,o=e.setSelections,a=null===(n=(0,G.a)(we).data)||void 0===n?void 0:n.instance,s=[be({upstreamAssetKeys:r,selections:i,setSelections:o}),a&&t&&(0,ae.So)({instance:a}),a&&t&&(0,ae.d)({instance:a})].filter((function(e){return!!e})).map((function(e,n){return(0,me.jsx)(v.x,{children:e},n)}));return a&&s.length?(0,me.jsx)(Ne,{background:J.w.Yellow50,isInitiallyOpen:!1,title:(0,me.jsxs)(v.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{color:J.w.Yellow700},children:[(0,me.jsxs)(v.x,{flex:{alignItems:"center",gap:12},children:[(0,me.jsx)(g.JO,{name:"warning",color:J.w.Yellow700}),(0,me.jsx)(V.pm,{children:"Warnings"})]}),(0,me.jsxs)("span",{children:[s.length," warnings"]})," "]}),children:(0,me.jsx)(v.x,{flex:{direction:"column",gap:16},padding:{vertical:12,horizontal:24},children:s})}):null},Ne=function(e){var n=e.isInitiallyOpen,t=e.title,r=e.children,i=e.background,o=P.useState(n),a=(0,u.Z)(o,2),s=a[0],l=a[1];return(0,me.jsxs)(v.x,{children:[(0,me.jsxs)(v.x,{onClick:function(){return l(!s)},background:null!==i&&void 0!==i?i:J.w.Gray50,border:{side:"bottom",color:J.w.KeylineGray,width:1},flex:{alignItems:"center",direction:"row"},padding:{vertical:12,horizontal:24},style:{cursor:"pointer"},children:[(0,me.jsx)(Ce,{$rotate:!s,children:(0,me.jsx)(g.JO,{name:"arrow_drop_down"})}),(0,me.jsx)("div",{style:{flex:1},children:t})]}),s&&(0,me.jsx)(v.x,{children:r})]})},Ce=R.ZP.span.withConfig({displayName:"LaunchAssetChoosePartitionsDialog__Rotateable",componentId:"sc-1mfaiz8-0"})(["",""],(function(e){return e.$rotate?"transform: rotate(-90deg);":""})),ke=t(74948),Pe=function(e){return e.length>1?" (".concat(e.length,")"):""},Ee=function(e){return e.some((function(e){return"partitionDefinition"in e&&!!e.partitionDefinition||"isPartitioned"in e&&e.isPartitioned}))},_e="Assets can only be materialized together if they are defined in the same code location and share a partition space, or form a connected graph in which root assets share the same partitioning.";var Ie=function(e){var n=e.scope,t=e.liveDataForStale,r=e.preferredJobName,i=e.intent,o=void 0===i?"primary":i,a=Ae(r),s=a.onClick,l=a.loading,c=a.launchpadElement,d=P.useState(!1),p=(0,u.Z)(d,2),f=p[0],m=p[1],h=function(e,n){if("selected"in e){var t=e.selected.filter((function(e){return!e.isSource})),r=e.selected.every((function(e){return e.hasMaterializePermission}));return[{assetKeys:t.map((function(e){return e.assetKey})),label:"Materialize selected".concat(Pe(t)).concat(Ee(t)?"\u2026":""),hasMaterializePermission:r}]}var i=[],o=e.all.filter((function(e){return!e.isSource})),a=o.every((function(e){return e.hasMaterializePermission}));if(i.push({assetKeys:o.map((function(e){return e.assetKey})),label:o.length>1&&!e.skipAllTerm?"Materialize all".concat(Ee(o)?"\u2026":""):"Materialize".concat(Ee(o)?"\u2026":""),hasMaterializePermission:a}),n){var s=o.filter((function(e){return(0,ke.KO)(n[(0,I.Wu)(e.assetKey)])||(0,ke.KM)(n[(0,I.Wu)(e.assetKey)])}));i.push({assetKeys:s.map((function(e){return e.assetKey})),label:"Propagate changes".concat(Pe(s)),hasMaterializePermission:a,icon:(0,me.jsx)(g.JO,{name:"changes_present"})})}return i}(n,t),S=h[0],N=S.hasMaterializePermission,C=(0,A.C)().MaterializeButton;return S?N?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)(v.x,{flex:{alignItems:"center"},children:[(0,me.jsx)(x.u,{content:"Shift+click to add configuration",position:"bottom-right",useDisabledButtonTooltipFix:!0,children:(0,me.jsx)(C,{intent:o,"data-testid":(0,O.N)("materialize-button"),onClick:function(e){return s(S.assetKeys,e)},style:{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"1px solid rgba(255,255,255,0.2)"},disabled:!S.assetKeys.length,icon:l?(0,me.jsx)(j.$,{purpose:"body-text"}):(0,me.jsx)(g.JO,{name:"materialization"}),children:S.label})}),(0,me.jsx)(b.J,{isOpen:f,onInteraction:function(e){return m(e)},position:"bottom-right",content:(0,me.jsxs)(w.v2,{children:[(0,me.jsx)(w.sN,{text:"Open in launchpad",icon:(0,me.jsx)(g.JO,{name:"open_in_new"}),onClick:function(e){s(S.assetKeys,e,!0)}}),h.slice(1).map((function(e){return(0,me.jsx)(w.sN,{text:e.label,icon:e.icon||"materialization",disabled:0===e.assetKeys.length,onClick:function(n){return s(e.assetKeys,n)}},e.label)}))]}),children:(0,me.jsx)(y.zx,{role:"button",style:{minWidth:"initial",borderTopLeftRadius:0,borderBottomLeftRadius:0},icon:(0,me.jsx)(g.JO,{name:"arrow_drop_down"}),disabled:!S.assetKeys.length,intent:o})})]}),c]}):(0,me.jsx)(x.u,{content:"You do not have permission to materialize assets",position:"bottom-right",children:(0,me.jsx)(y.zx,{intent:o,icon:(0,me.jsx)(g.JO,{name:"materialization"}),disabled:!0,children:S.label})}):(0,me.jsx)("span",{})},Ae=function(e){var n=(0,(0,A.C)().useLaunchWithTelemetry)(),t=(0,m.x)(),r=(0,_.p)(),i=P.useState({type:"none"}),o=(0,u.Z)(i,2),a=o[0],s=o[1],l=function(){var i=(0,d.Z)(f().mark((function i(o,l){var c,d,u,p,m,h,g=arguments;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c=g.length>2&&void 0!==g[2]&&g[2],"loading"!==a.type){i.next=3;break}return i.abrupt("return");case 3:return s({type:"loading"}),i.next=6,t.query({query:Ge,variables:{assetKeys:o.map((function(e){return{path:e.path}}))}});case 6:if(!(d=i.sent).data.assetNodeDefinitionCollisions.length){i.next=11;break}return(0,E._)(Le(d.data)),s({type:"none"}),i.abrupt("return");case 11:return u=d.data.assetNodes,p=l.shiftKey||c,i.next=15,Ze(t,u,p,e);case 15:if("error"!==(m=i.sent).type){i.next=20;break}return(0,E._)({title:"Unable to Materialize",body:m.error}),s({type:"none"}),i.abrupt("return");case 20:return i.next=22,ze(t,u);case 22:if(!(h=i.sent).length){i.next=34;break}return s({type:"none"}),i.prev=25,i.next=28,r({title:"Are you sure?",description:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("div",{children:"Materializing these assets may fail because the upstream assets listed below have not been materialized yet."}),(0,me.jsx)("ul",{children:h.map((function(e,n){return(0,me.jsx)("li",{children:(0,I.ll)(e)},n)}))})]})});case 28:s({type:"loading"}),i.next=34;break;case 31:return i.prev=31,i.t0=i.catch(25),i.abrupt("return");case 34:if("single-run"!==m.type){i.next=40;break}return i.next=37,n({executionParams:m.executionParams},"toast");case 37:s({type:"none"}),i.next=41;break;case 40:s(m);case 41:case"end":return i.stop()}}),i,null,[[25,31]])})));return function(e,n){return i.apply(this,arguments)}}();return{onClick:l,loading:"loading"===a.type,launchpadElement:"launchpad"===a.type?(0,me.jsx)(Z.e,{assetJobName:a.jobName,repoAddress:a.repoAddress,sessionPresets:a.sessionPresets,open:!0,setOpen:function(){return s({type:"none"})}}):"partitions"===a.type?(0,me.jsx)(ve,{assets:a.assets,upstreamAssetKeys:a.upstreamAssetKeys,repoAddress:a.repoAddress,target:a.target,open:!0,setOpen:function(){return s({type:"none"})},refetch:(0,d.Z)(f().mark((function n(){var r,i,o;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.query({query:Ge,variables:{assetKeys:a.assets.map((function(e){return{path:e.assetKey.path}}))}});case 2:return r=n.sent,i=r.data.assetNodes,n.next=6,Ze(t,i,!1,e);case 6:if("error"!==(o=n.sent).type){n.next=11;break}return(0,E._)({title:"Unable to Materialize",body:o.error}),s({type:"none"}),n.abrupt("return");case 11:s(o);case 12:case"end":return n.stop()}}),n)})))}):null}};function Ze(e,n,t,r){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(f().mark((function e(n,t,r,i){var o,a,s,l,c,d,u,p,m,h,g,x,y,v,j,b,w,S,N,C;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more source assets are selected and cannot be materialized."});case 2:if(c=(0,M.kQ)((null===(o=t[0])||void 0===o?void 0:o.repository.name)||"",(null===(a=t[0])||void 0===a?void 0:a.repository.location.name)||""),d=Ke(t,i),u=null===(s=t.find((function(e){return!!e.partitionDefinition})))||void 0===s?void 0:s.partitionDefinition,p=t.every((function(e){return e.repository.name===c.name&&e.repository.location.name===c.location})),m=t.every((function(e){return!e.partitionDefinition||!u||(0,ue.z3)(e.partitionDefinition,u)})),p&&m&&d){e.next=12;break}if(h=Me(t)){e.next=11;break}return e.abrupt("return",{type:"error",error:_e});case 11:return e.abrupt("return",{type:"partitions",assets:t,target:{type:"pureWithAnchorAsset",anchorAssetKey:h.assetKey},upstreamAssetKeys:De(t),repoAddress:c});case 12:return e.next=14,n.query({query:$e,variables:{pipelineName:d,repositoryName:t[0].repository.name,repositoryLocationName:t[0].repository.location.name}});case 14:if(g=e.sent,"Pipeline"===(x=g.data.pipelineOrError).__typename){e.next=18;break}return e.abrupt("return",{type:"error",error:x.message});case 18:if("PartitionSets"===(y=g.data.partitionSetsOrError).__typename){e.next=21;break}return e.abrupt("return",{type:"error",error:y.message});case 21:if(v=null===(l=y.results[0])||void 0===l?void 0:l.name,j=t.flatMap((function(e){return e.requiredResources.map((function(e){return e.resourceKey}))})),b=x.modes[0].resources.filter((function(e){return j.includes(e.name)})),w=b.some((function(e){var n;return null===(n=e.configField)||void 0===n?void 0:n.isRequired})),S=t.some((function(e){var n;return null===(n=e.configField)||void 0===n?void 0:n.isRequired})),N=u&&!(0,I.pv)(d),!(!N&&(S||w))&&!r){e.next=31;break}return C=t.flatMap((function(e){return e.opNames||[]})),e.abrupt("return",{type:"launchpad",jobName:d,repoAddress:c,sessionPresets:{flattenGraphs:!0,assetSelection:t.map((function(e){return{assetKey:e.assetKey,opNames:e.opNames}})),solidSelectionQuery:C.map((function(e){return'"'.concat(e,'"')})).join(", "),base:v?{partitionsSetName:v,partitionName:null,tags:[]}:void 0}});case 31:if(!u){e.next=33;break}return e.abrupt("return",{type:"partitions",assets:t,target:{type:"job",jobName:d,partitionSetName:v},upstreamAssetKeys:De(t),repoAddress:c});case 33:return e.abrupt("return",{type:"single-run",executionParams:Fe(c,d,t,[])});case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,n){var t=e[0]?e[0].jobNames.filter((function(n){return e.every((function(e){return e.jobNames.includes(n)}))})):[];return t.find((function(e){return e===n}))||t[0]||null}function Me(e){var n=e.filter((function(n){var t=n.dependencyKeys.map(I.Je);return!e.some((function(e){return t.includes((0,I.Je)(e.assetKey))}))})).filter((function(e){return!!e.partitionDefinition})).sort((function(e,n){return(0,I.ll)(e.assetKey).localeCompare((0,I.ll)(n.assetKey))}));if(!n.length)return null;var t=n[0];return n.every((function(e){return(0,ue.z3)(t.partitionDefinition,e.partitionDefinition)}))?t:null}function De(e){var n=new Set(e.map((function(e){return JSON.stringify({path:e.assetKey.path})})));return k()(e.flatMap((function(e){return e.dependencyKeys.map((function(e){var n=e.path;return JSON.stringify({path:n})}))}))).filter((function(e){return!n.has(e)})).map((function(e){return JSON.parse(e)}))}function ze(e,n){return Te.apply(this,arguments)}function Te(){return(Te=(0,d.Z)(f().mark((function e(n,t){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(r=De(t)).length){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.query({query:Be,variables:{assetKeys:r}});case 5:return i=e.sent,e.abrupt("return",i.data.assetNodes.filter((function(e){return!e.isSource&&0===e.assetMaterializations.length})).map((function(e){return e.assetKey})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,n,t,r){return{mode:"default",executionMetadata:{tags:r.map((function(e){return N()(e,["key","value"])}))},runConfigData:"{}",selector:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n,assetSelection:t.map((function(e){return{path:e.assetKey.path}}))}}}function Le(e){return{title:T.a,body:(0,me.jsxs)("div",{style:{overflow:"auto"},children:["One or more of the selected assets are defined in multiple code locations. Rename these assets to avoid collisions and then try again.",(0,me.jsx)("ul",{children:e.assetNodeDefinitionCollisions.map((function(e,n){return(0,me.jsxs)("li",{children:[(0,me.jsx)("strong",{children:(0,I.ll)(e.assetKey)}),(0,me.jsx)("ul",{children:e.repositories.map((function(e,n){return(0,me.jsx)("li",{children:(0,D.Uz)({name:e.name,location:e.location.name})},n)}))})]},n)}))})]})}}var Re=(0,h.Ps)(o||(o=(0,c.Z)(["\n  fragment LaunchAssetExecutionAssetNodeFragment on AssetNode {\n    id\n    opNames\n    jobNames\n    graphName\n    hasMaterializePermission\n    partitionDefinition {\n      ...PartitionDefinitionForLaunchAsset\n    }\n    isObservable\n    isSource\n    assetKey {\n      path\n    }\n    dependencyKeys {\n      path\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n    ...AssetNodeConfigFragment\n  }\n\n  fragment PartitionDefinitionForLaunchAsset on PartitionDefinition {\n    description\n    type\n    name\n    dimensionTypes {\n      name\n      dynamicPartitionsDefinitionName\n    }\n  }\n\n  ","\n"])),z.r),Ge=(0,h.Ps)(a||(a=(0,c.Z)(["\n  query LaunchAssetLoaderQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      ...LaunchAssetExecutionAssetNodeFragment\n    }\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n\n  ","\n"])),Re),$e=(0,h.Ps)(s||(s=(0,c.Z)(["\n  query LaunchAssetLoaderResourceQuery(\n    $pipelineName: String!\n    $repositoryLocationName: String!\n    $repositoryName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n        }\n      }\n    }\n\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        modes {\n          id\n          resources {\n            name\n            description\n            configField {\n              name\n              isRequired\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),K.S),Be=(0,h.Ps)(l||(l=(0,c.Z)(["\n  query LaunchAssetCheckUpstreamQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      assetKey {\n        path\n      }\n      isSource\n      opNames\n      graphName\n      assetMaterializations(limit: 1) {\n        runId\n      }\n    }\n  }\n"])))},52063:function(e,n,t){t.d(n,{y:function(){return v}});var r=t(85358),i=t(19065),o=t(95550),a=t.n(o),s=t(31522),l=t(11831),c=t(75453),d=t(75497),u=t(34595),p=t(325),f=t(14156),m=t(20021),h=t(37099),g=t(33902),x=t(52165),y=t(32289),v=function(e){var n=e.scope,t=e.preferredJobName,o=e.intent,h=void 0===o?"none":o,g=(0,(0,m.C)().useLaunchWithTelemetry)(),v=p.useState({type:"none"}),b=(0,i.Z)(v,2),w=b[0],S=b[1],N=(0,s.x)(),C="selected"in n?n.selected:n.all;if(!C.length)return(0,y.jsx)("span",{});var k=C.length>1?" (".concat(C.length,")"):"",P="selected"in n?"Observe selected".concat(k):n.skipAllTerm?"Observe".concat(k):"Observe sources ".concat(k);if(!C.every((function(e){return e.hasMaterializePermission})))return(0,y.jsx)(l.u,{content:"You do not have permission to observe source assets",children:(0,y.jsx)(c.zx,{intent:h,icon:(0,y.jsx)(d.JO,{name:"observation"}),disabled:!0,children:P})});var E=function(){var e=(0,r.Z)(a().mark((function e(n){var r,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==w.type){e.next=2;break}return e.abrupt("return");case 2:return S({type:"loading"}),e.next=5,N.query({query:x.U2,variables:{assetKeys:C.map((function(e){return{path:e.assetKey.path}}))}});case 5:if(!(r=e.sent).data.assetNodeDefinitionCollisions.length){e.next=10;break}return(0,f._)((0,x.VF)(r.data)),S({type:"none"}),e.abrupt("return");case 10:return i=r.data.assetNodes,o=n.shiftKey,e.next=14,j(N,i,o,t);case 14:if("error"!==(s=e.sent).type){e.next=19;break}return(0,f._)({title:"Unable to observe",body:s.error}),S({type:"none"}),e.abrupt("return");case 19:if("single-run"!==s.type){e.next=25;break}return e.next=22,g({executionParams:s.executionParams},"toast");case 22:S({type:"none"}),e.next=26;break;case 25:S(s);case 26:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)(c.zx,{intent:h,onClick:E,icon:"loading"===w.type?(0,y.jsx)(u.$,{purpose:"body-text"}):(0,y.jsx)(d.JO,{name:"observation"}),children:P})};function j(e,n,t,r){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)(a().mark((function e(n,t,r,i){var o,s,l,c,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return!e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more non-source assets are selected and cannot be observed."});case 2:if(!t.some((function(e){return!e.isObservable}))){e.next=4;break}return e.abrupt("return",{type:"error",error:"One or more of the selected source assets are unversioned and cannot be observed."});case 4:if(l=(0,h.kQ)((null===(o=t[0])||void 0===o?void 0:o.repository.name)||"",(null===(s=t[0])||void 0===s?void 0:s.repository.location.name)||""),c=(0,g.Uz)(l),t.every((function(e){return e.repository.name===l.name&&e.repository.location.name===l.location}))){e.next=8;break}return e.abrupt("return",{type:"error",error:"Assets must be in ".concat(c," to be materialized together.")});case 8:if(d=(0,x.ZP)(t,i)){e.next=11;break}return e.abrupt("return",{type:"error",error:"Assets must be in the same job to be observed together."});case 11:return e.abrupt("return",{type:"single-run",executionParams:(0,x.Ot)(l,d,t,[])});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},95609:function(e,n,t){t.d(n,{m:function(){return m}});var r=t(59019),i=t(34595),o=t(32030),a=t(7838),s=t(12745),l=t(325),c=t(39061),d=t(54920),u=t(23300),p=t(36613),f=t(32289),m=l.memo((function(e){var n=e.showAssetKey,t=e.assetKey,l=e.data,m=e.selections,h=l.find((function(e){return JSON.stringify(e.assetKey)===JSON.stringify(t)}));if(!h)return(0,f.jsx)("div",{style:{minHeight:55,position:"relative"},children:(0,f.jsx)(i.$,{purpose:"section"})});var g=m?m.map((function(e){return e.selectedKeys})):h.dimensions.map((function(e){return e.partitionKeys})),x=g.reduce((function(e,n){return n.length*e}),1),y=g.reduce((function(e,n){return e.length?e.flatMap((function(e){return n.map((function(n){return[].concat((0,r.Z)(e),[n])}))})):n.map((function(e){return[e]}))}),[]).filter((function(e){return h.stateForKey(e)===u.yo.MATERIALIZED})).length;return(0,f.jsxs)(o.x,{color:a.w.Gray500,children:[(0,f.jsxs)(o.x,{flex:{justifyContent:"space-between"},style:{fontWeight:600},margin:{bottom:4},children:[(0,f.jsx)(s.YS,{children:n?(0,c.ll)(t):"Materialized"}),(0,f.jsx)(s.YS,{children:"".concat(y.toLocaleString(),"/").concat(x.toLocaleString())})]}),h.dimensions.map((function(e,n){return(0,f.jsxs)(o.x,{margin:{bottom:4},children:[h.dimensions.length>1&&(0,f.jsx)(s.YS,{children:e.name}),(0,f.jsx)(d.b,{small:!0,partitionNames:e.partitionKeys,splitPartitions:!(0,p.nv)(e),selected:m?m[n].selectedKeys:void 0,health:{ranges:h.rangesForSingleDimension(n,2===(null===m||void 0===m?void 0:m.length)?m[1-n].selectedRanges:void 0)}})]},n)}))]})}))},74948:function(e,n,t){t.d(n,{KO:function(){return w},KM:function(){return S},f4:function(){return C},d9:function(){return k}});var r,i,o=t(95764),a=t(19065),s=t(16798),l=t(12745),c=t(7838),d=t(11831),u=t(58591),p=t(75497),f=t(60652),m=t(32030),h=t(21663),g=t.n(h),x=t(90428),y=t.n(x),v=(t(325),t(39061)),j=t(69305),b=t(32289),w=function(e){return e&&e.staleStatus===j.D9X.MISSING},S=function(e){return e&&e.staleStatus===j.D9X.STALE},N={self:(r={},(0,s.Z)(r,j.R$Y.CODE,"Code version"),(0,s.Z)(r,j.R$Y.DATA,"Data version"),(0,s.Z)(r,j.R$Y.DEPENDENCIES,"Dependencies"),r),upstream:(i={},(0,s.Z)(i,j.R$Y.CODE,"Upstream code version"),(0,s.Z)(i,j.R$Y.DATA,"Upstream data"),(0,s.Z)(i,j.R$Y.DEPENDENCIES,"Upstream dependencies"),i)},C=function(e){var n=e.liveData,t=e.include,r=e.assetKey;return S(n)&&null!==n&&void 0!==n&&n.staleCauses.length?(0,b.jsx)(l.uT,{color:c.w.Yellow700,children:(0,b.jsx)(d.u,{position:"top",content:(0,b.jsx)(E,{causes:n.staleCauses}),children:Object.keys(P(r,t,n)).join(", ")})}):null},k=function(e){var n=e.liveData,t=e.include,r=e.assetKey,i=e.onClick;return S(n)&&null!==n&&void 0!==n&&n.staleCauses.length?(0,b.jsx)(b.Fragment,{children:Object.entries(P(r,t,n)).map((function(e){var n=(0,a.Z)(e,2),t=n[0],r=n[1];return(0,b.jsx)(d.u,{position:"top",content:(0,b.jsx)(E,{causes:r}),children:(0,b.jsx)(u.m,{fillColor:c.w.Yellow50,textColor:c.w.Yellow700,interactive:!!i,icon:(0,b.jsx)(p.JO,{name:"changes_present",color:c.w.Yellow700}),label:i?(0,b.jsx)(f.Z,{underline:"never",onClick:i,color:c.w.Yellow700,children:t}):t})},t)}))}):null};function P(e,n,t){var r=((null===t||void 0===t?void 0:t.staleCauses)||[]).map((function(n){var t=y()(e.path,n.key.path)?"self":"upstream";return(0,o.Z)((0,o.Z)({},n),{},{target:t,label:N[t][n.category]})})).filter((function(e){return"all"===n||n===e.target}));return g()(r,(function(e){return e.label}))}var E=function(e){var n=e.causes;return(0,b.jsxs)(m.x,{children:[(0,b.jsx)("strong",{children:"Changes since last materialization:"}),(0,b.jsxs)("ul",{style:{margin:0,padding:"4px 12px"},children:[n.slice(0,4).map((function(e,n){return(0,b.jsxs)("li",{children:["[",(0,v.ll)(e.key),"] ",e.reason," ",e.dependency?"(".concat((0,v.ll)(e.dependency),")"):""]},n)})),n.length>4?(0,b.jsx)("span",{style:{color:c.w.Gray400},children:"and ".concat(n.length-4," more...")}):""]})]})}},49720:function(e,n,t){t.d(n,{d:function(){return f},D:function(){return m}});var r,i=t(99500),o=t(3159),a=t(32030),s=t(75497),l=t(12745),c=(t(325),t(74549)),d=t(39061),u=t(25582),p=t(32289),f=function(e){var n=e.assetNode,t=e.repoAddress,r=e.minimal,i=n.assetKey,o=n.graphName,f=n.opNames,m=n.jobNames,h=f.length;if(!h)return null;if(!o){var g=f[0];if((0,d.ll)(i)===g)return null;var x=(0,u.$U)(t,"/ops/".concat(g));return(0,p.jsxs)(a.x,{flex:{gap:4,alignItems:"center"},children:[(0,p.jsx)(s.JO,{name:"op",size:16}),(0,p.jsx)(l.fv,{children:(0,p.jsx)(c.rU,{to:x,children:g})})]})}return m.length?(0,p.jsxs)(a.x,{flex:{gap:4,alignItems:"center"},children:[(0,p.jsx)(s.JO,{name:"schema",size:16}),r?(0,p.jsx)(c.rU,{to:(0,u.$U)(t,"/graphs/".concat(m[0],"/").concat(o,"/")),children:"View graph"}):(0,p.jsxs)(l.fv,{children:[(0,p.jsx)(c.rU,{to:(0,u.$U)(t,"/graphs/".concat(m[0],"/").concat(o,"/")),children:o})," (".concat(1===h?"1 op":"".concat(h," ops"),")")]})]}):null},m=(0,o.Ps)(r||(r=(0,i.Z)(["\n  fragment UnderlyingOpsAssetNodeFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    graphName\n    opNames\n    jobNames\n  }\n"])))},33682:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(59019),i=t(21663),o=t.n(i),a=t(325),s="__NO_PARTITION__",l=function(e,n){return Number(null===n||void 0===n?void 0:n.timestamp)-Number(null===e||void 0===e?void 0:e.timestamp)};function c(e,n,t,i){return a.useMemo((function(){var a=[].concat((0,r.Z)(n),(0,r.Z)(t)).sort((function(e,n){return Number(n.timestamp)-Number(e.timestamp)}));return"partition"===e&&i?function(e,n){var t=o()(e,(function(e){return e.partition||s})),i=(0,r.Z)(n).reverse();return s in t&&i.push(s),i.filter((function(e){return e!==s})).map((function(e){var n=(0,r.Z)(t[e]||[]).sort(l),i=n.find((function(e){return"MaterializationEvent"===e.__typename}))||n[0]||null;return{all:n,latest:i,timestamp:null===i||void 0===i?void 0:i.timestamp,partition:e}}))}(a,i):a.map((function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}}))}),[i,n,t,e])}},30885:function(e,n,t){t.d(n,{q:function(){return u}});var r=t(59019),i=t(95764),o=t(19065),a=t(325),s=t(44198);function l(e,n){var t=a.useRef(e);t.current=e;var r=a.useRef(n);return r.current=n,a.useCallback((function(e){t.current=e instanceof Function?e(t.current):e,r.current(t.current)}),[])}var c=t(26961),d=t(36613);var u=function(e){var n=e.assetHealth,t=e.knownDimensionNames,u=void 0===t?[]:t,p=e.modifyQueryString,f=e.skipPartitionKeyValidation,m=e.shouldReadPartitionQueryStringParam,h=void 0!==m&&m,g=a.useMemo((function(){return function(e){return{defaults:{},encode:function(e){return Object.fromEntries(e.map((function(e){return["".concat(e.name,"_range"),e.rangeText]})))},decode:function(n){var t={};for(var r in n)if(r.endsWith("_range"))t[r.replace(/_range$/,"")]={text:n[r],isFromPartitionQueryStringParam:!1};else if("partition"===r)for(var i=n[r].split("|"),a=0;a<i.length;a++){var s,l=i[a],c=null===e||void 0===e||null===(s=e.dimensions[a])||void 0===s?void 0:s.name;c&&(t[c]={text:l,isFromPartitionQueryStringParam:!0})}return Object.entries(t).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return{name:t,rangeText:r.text,isFromPartitionQueryStringParam:r.isFromPartitionQueryStringParam}}))}}}(n)}),[n]),x=(0,s.q)(g),y=(0,o.Z)(x,2),v=y[0],j=y[1],b=a.useState([]),w=(0,o.Z)(b,2),S=w[0],N=w[1],C=JSON.stringify(u),k=a.useMemo((function(){return n&&n.dimensions.length?n.dimensions.map((function(e){var n=S.find((function(n){return n.name===e.name}))||v.find((function(n){return n.name===e.name}));return void 0===(null===n||void 0===n?void 0:n.rangeText)||!h&&null!==n&&void 0!==n&&n.isFromPartitionQueryStringParam?{dimension:e,selectedRanges:[(0,c.$0)(e)],selectedKeys:(0,r.Z)(e.partitionKeys)}:(0,i.Z)({dimension:e},(0,c.w$)(e.partitionKeys,n.rangeText,f))})):JSON.parse(C).map(d.xy)}),[n,C,S,v,h,f]);return[k,l(k,(function(e){var n=e.map((function(e){var n=(0,c.Z8)(e.selectedKeys,f?void 0:e.dimension.partitionKeys),t=S.find((function(n){return n.name===e.dimension.name}))||v.find((function(n){return n.name===e.dimension.name}));return{name:e.dimension.name,rangeText:n!==(0,c.NN)(e.dimension)?n:void 0,isFromPartitionQueryStringParam:(null===t||void 0===t?void 0:t.rangeText)===n&&t.isFromPartitionQueryStringParam}}));p?j(n):N(n)}))]}},66855:function(e,n,t){t.d(n,{fE:function(){return h},ZC:function(){return g},T8:function(){return x}});var r,i,o,a=t(99500),s=t(59019),l=t(73701),c=t(3159),d=t(58891),u=t.n(d),p=t(325),f=t(4735),m=t(52598);function h(e,n,t){var r=t.assetHasDefinedPartitions,i=n.asOf?"".concat(Number(n.asOf)+1):void 0,o=r?"partition":"time",a=void 0!==n.partition?"partition":void 0!==n.time||i?"time":o,c=r&&"partition"===a,d=(0,l.a)(y,{variables:c?{assetKey:{path:e.path},before:i,partitionInLast:120}:{assetKey:{path:e.path},before:i,limit:100}}),f=d.data,m=d.loading,h=d.refetch;return p.useMemo((function(){var e,n="Asset"===(null===f||void 0===f?void 0:f.assetOrError.__typename)?null===f||void 0===f?void 0:f.assetOrError:null,t=(null===n||void 0===n?void 0:n.assetMaterializations)||[],r=(null===n||void 0===n?void 0:n.assetObservations)||[],i=null===n||void 0===n||null===(e=n.definition)||void 0===e?void 0:e.partitionKeys;return{asset:n,loadedPartitionKeys:c&&i?i.slice(i.length-120):u()([].concat((0,s.Z)(t),(0,s.Z)(r)).map((function(e){return e.partition})).filter(Boolean)).sort(),materializations:t,observations:r,loading:m,refetch:h,xAxis:a}}),[f,m,h,c,a])}var g=(0,c.Ps)(r||(r=(0,a.Z)(["\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n\n  ","\n  ","\n"])),f.it,m.Q),x=(0,c.Ps)(i||(i=(0,a.Z)(["\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n\n  ","\n"])),f.it),y=(0,c.Ps)(o||(o=(0,a.Z)(["\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),x,g)},89493:function(e,n,t){t.d(n,{KC:function(){return T},Kz:function(){return R},Fp:function(){return B},UU:function(){return V},L9:function(){return J}});var r,i,o,a,s=t(99500),l=t(85358),c=t(95764),d=t(19065),u=t(59019),p=t(922),f=t(95550),m=t.n(f),h=t(73701),g=t(3159),x=t(34056),y=t(75497),v=t(7838),j=t(42872),b=t(32030),w=t(34595),S=t(8412),N=t(75453),C=t(6474),k=t(325),P=t(52848),E=t(14156),_=t(79082),I=t(12436),A=t(27719),Z=t(69305),O=t(76314),K=t(20346),M=t(33902),D=t(26306),z=t(32289),T=function(e){var n=e.pipeline,t=e.base,r=e.onSaveSession,i=e.onSelectPreset,o=e.onSelectPartition,a=e.partitionSets,s=e.repoAddress,l=e.assetSelection,c=n.isJob,d=n.presets,p=k.useMemo((function(){return[].concat((0,u.Z)(d),(0,u.Z)(a)).sort((function(e,n){return e.name.localeCompare(n.name)}))}),[d,a]);return(0,z.jsxs)(G,{children:[c||p.length<1?null:(0,z.jsx)(L,{label:t?"presetName"in t?"Preset: ".concat(t.presetName):"Partition Set: ".concat(t.partitionsSetName):d.length&&!a.length?"Preset":!d.length&&a.length?"Partition Set":"Preset / Partition Set",configGenerators:p,onSelect:function(e){"PartitionSet"===e.__typename?r({mode:e.mode,base:{partitionsSetName:e.name,partitionName:null,tags:t?t.tags:null}}):i(e)}}),t&&"partitionsSetName"in t?(0,z.jsx)(F,{pipeline:n,partitionSetName:t.partitionsSetName,value:t.partitionName,onSelect:o,repoAddress:s,assetSelection:l}):null]})},F=k.memo((function(e){var n=e.partitionSetName,t=e.value,r=e.onSelect,i=e.repoAddress,o=e.assetSelection,a=k.useContext(P.I).basePath,s=(0,D.$)(i),p=(0,h.a)($,{variables:{repositorySelector:s,partitionSetName:n,assetKeys:null===o||void 0===o?void 0:o.map((function(e){return{path:e.assetKey.path}}))},fetchPolicy:"network-only"}),f=p.data,g=p.refetch,C=p.loading,_="".concat("dagit.partition-sort-order","-").concat(a,"-").concat((0,M.Uz)(i),"-").concat(n),A=(0,O.U)(_,(function(e){return void 0===e?"asc":e})),T=(0,d.Z)(A,2),F=T[0],L=T[1],G=k.useMemo((function(){var e="PartitionSet"===(null===f||void 0===f?void 0:f.partitionSetOrError.__typename)&&"Partitions"===(null===f||void 0===f?void 0:f.partitionSetOrError.partitionsOrError.__typename)?f.partitionSetOrError.partitionsOrError.results:[];return"asc"===F?e:(0,u.Z)(e).reverse()}),[f,F]),B="PartitionSet"===(null===f||void 0===f?void 0:f.partitionSetOrError.__typename)&&"Partitions"!==(null===f||void 0===f?void 0:f.partitionSetOrError.partitionsOrError.__typename)?f.partitionSetOrError.partitionsOrError:null,V=G.find((function(e){return e.name===t})),J=k.useCallback((function(e){e.preventDefault(),L((function(e){return"asc"===e?"desc":"asc"}))}),[L]),U=G.length?(0,z.jsx)(R,{onMouseDown:J,children:(0,z.jsx)(y.JO,{name:"sort_by_alpha",color:v.w.Gray400})}):void 0,q={placeholder:"Partition",style:{width:180},intent:(C?t:V)?x.S.NONE:x.S.DANGER,rightElement:U},Q=k.useMemo((function(){var e,n=null===f||void 0===f?void 0:f.assetNodes,t=null===n||void 0===n||null===(e=n.find((function(e){return!!e.partitionDefinition})))||void 0===e?void 0:e.partitionDefinition;return!t||null!==n&&void 0!==n&&n.some((function(e){var n,r;return(null===e||void 0===e||null===(n=e.partitionDefinition)||void 0===n?void 0:n.name)&&(null===e||void 0===e||null===(r=e.partitionDefinition)||void 0===r?void 0:r.name)!==(null===t||void 0===t?void 0:t.name)}))?{isDynamicPartition:!1,partitionDefinitionName:void 0}:{isDynamicPartition:t.type===Z.iVC.DYNAMIC,partitionDefinitionName:t.name}}),[null===f||void 0===f?void 0:f.assetNodes]),H=Q.isDynamicPartition,Y=Q.partitionDefinitionName,W=k.useState(!1),X=(0,d.Z)(W,2),ee=X[0],ne=X[1];return C&&0===G.length?(0,z.jsx)(j.U5,{inputProps:(0,c.Z)((0,c.Z)({},q),{},{rightElement:t?void 0:(0,z.jsx)(b.x,{flex:{direction:"column",justifyContent:"center"},padding:{right:4},style:{height:"30px"},children:(0,z.jsx)(w.$,{purpose:"body-text"})})}),items:[],itemRenderer:function(){return null},noResults:(0,z.jsx)(S.sN,{disabled:!0,text:"Loading..."}),inputValueRenderer:function(e){return e},selectedItem:t,onItemSelect:function(){}},"loading"):(B&&(0,E._)({body:(0,z.jsx)(I.T,{error:B})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(j.U5,{defaultSelectedItem:V,items:G,inputProps:q,inputValueRenderer:function(e){return e.name},itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,z.jsx)(S.sN,{active:n.modifiers.active,onClick:n.handleClick,text:e.name},e.name)},noResults:(0,z.jsx)(S.sN,{disabled:!0,text:"No presets."}),onItemSelect:function(e){r(s,n,e.name)}},V?V.name:"none"),H?(0,z.jsx)(N.zx,{onClick:function(){ne(!0)},children:"Add new partition"}):null,(0,z.jsx)(K.D,{isOpen:ee,partitionDefinitionName:Y,repoAddress:i,close:function(){ne(!1)},refetch:(0,l.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)}))),onCreated:function(e){r(s,n,e)}},ee?"1":"0")]}))})),L=k.memo((function(e){var n=e.configGenerators,t=e.label,r=e.onSelect,i=k.useRef(null);return(0,z.jsx)("div",{children:(0,z.jsx)(A.b,{shortcutLabel:"\u2325E",shortcutFilter:function(e){return"KeyE"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.click()},children:(0,z.jsx)(C.P,{items:n,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemListRenderer:function(e){var n=e.itemsParentRef,t=e.renderItem,r=e.filteredItems,i=r.filter((function(e){return"PipelinePreset"===e.__typename})).map(t).filter(Boolean),o=r.filter((function(e){return"PartitionSet"===e.__typename})).map(t).filter(Boolean),a=i.length>0&&o.length>0;return(0,z.jsxs)(S.v2,{ulRef:n,children:[a&&(0,z.jsx)(S.sN,{disabled:!0,text:"Presets"}),i,a&&(0,z.jsx)(S.R,{}),a&&(0,z.jsx)(S.sN,{disabled:!0,text:"Partition Sets"}),o]})},itemRenderer:function(e,n){return(0,z.jsx)(S.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,z.jsxs)("div",{children:[e.name,(0,z.jsx)("div",{style:{opacity:.4,fontSize:"0.75rem"},children:[e.solidSelection?1===e.solidSelection.length?"Ops: ".concat(e.solidSelection[0]):"Ops: ".concat(e.solidSelection.length):"Ops: All","Mode: ".concat(e.mode)].join(" - ")})]})},e.name)},noResults:(0,z.jsx)(S.sN,{disabled:!0,text:"No presets."}),onItemSelect:r,children:(0,z.jsx)(N.zx,{ref:i,"data-test-id":"preset-selector-button",rightIcon:(0,z.jsx)(y.JO,{name:"expand_more"}),children:t})})})})})),R=p.ZP.button.withConfig({displayName:"ConfigEditorConfigPicker__SortButton",componentId:"sc-9oggai-0"})(["border:0;cursor:pointer;padding:4px;margin:3px 3px 0 0;background-color:",";border-radius:4px;transition:background-color 100ms;:focus{background-color:",";outline:none;}:hover{","{background-color:",";}}"],v.w.White,v.w.Gray100,y.a1,v.w.Gray700),G=p.ZP.div.withConfig({displayName:"ConfigEditorConfigPicker__PickerContainer",componentId:"sc-9oggai-1"})(["display:flex;justify:space-between;align-items:center;gap:6px;"]),$=(0,g.Ps)(r||(r=(0,s.Z)(["\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $assetKeys: [AssetKeyInput!]\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              ...ConfigPartitionResult\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      partitionDefinition {\n        name\n        type\n      }\n    }\n  }\n\n  fragment ConfigPartitionResult on Partition {\n    name\n  }\n\n  ","\n"])),_.B),B=(0,g.Ps)(i||(i=(0,s.Z)(["\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ...PythonErrorFragment\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),_.B),V=(0,g.Ps)(o||(o=(0,s.Z)(["\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    isJob\n    name\n    presets {\n      ...ConfigEditorPipelinePreset\n    }\n    tags {\n      key\n      value\n    }\n  }\n\n  fragment ConfigEditorPipelinePreset on PipelinePreset {\n    name\n    mode\n    solidSelection\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n"]))),J=(0,g.Ps)(a||(a=(0,s.Z)(["\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      ...PartitionSetForConfigEditor\n    }\n  }\n\n  fragment PartitionSetForConfigEditor on PartitionSet {\n    id\n    name\n    mode\n    solidSelection\n  }\n"])))},25859:function(e,n,t){t.d(n,{e:function(){return _},$:function(){return I}});var r,i,o=t(99500),a=t(73701),s=t(3159),l=t(922),c=(t(95550),t(325)),d=t(32289),u=(0,l.vJ)(r||(r=(0,o.Z)(["\n  .CodeMirror-hints,\n  .CodeMirror-hints.dagit {\n    z-index: 100;\n  }\n"]))),p=t(8358),f=t(27601),m=t(63579),h=t(79082),g=t(78093),x=t(96294),y=t(23196),v=t(76336),j=t(89493),b=t(44969),w=t(6364),S=t(19065),N=t(95764),C=t(88796),k=t(40433),P=function(e){var n=e.launchpadType,t=e.pipeline,r=e.partitionSets,i=e.repoAddress,o=e.sessionPresets,a=(0,C.Bv)(t,r),s=(0,C.h5)((0,N.Z)((0,N.Z)({},o),{},{runConfigYaml:a.runConfigYaml})),l=c.useState(s),u=(0,S.Z)(l,2),p=u[0],f=u[1];return(0,d.jsx)(k.Z,{launchpadType:n,session:p,onSave:function(e){var n=(0,N.Z)((0,N.Z)({},p),e);f(n)},pipeline:t,partitionSets:r,repoAddress:i})},E=c.lazy((function(){return t.e(566).then(t.bind(t,90566))})),_=function(e){var n=e.repoAddress,t=e.sessionPresets,r=e.assetJobName,i=e.open,o=e.setOpen;return(0,d.jsxs)(p.Vq,{style:{height:"90vh",width:"80%"},isOpen:i,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return o(!1)},children:[(0,d.jsx)(p.fK,{icon:"layers",label:"Launchpad (configure assets)"}),(0,d.jsx)(u,{}),(0,d.jsx)(A,{launchpadType:"asset",pipelinePath:r,repoAddress:n,sessionPresets:t})]})},I=function(e){var n=e.repoAddress,t=(0,f.UO)(),r=t.pipelinePath,i=t.repoPath;return(0,m.xz)(n.location).permissions.canLaunchPipelineExecution?(0,d.jsx)(A,{launchpadType:"job",pipelinePath:r,repoAddress:n}):(0,d.jsx)(f.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(r)})},A=function(e){var n,t;(0,g.Px)();var r=e.pipelinePath,i=e.repoAddress,o=e.launchpadType,s=e.sessionPresets,l=(0,x.p3)(r),u=l.pipelineName,p=(0,v.Ux)(i),f=(0,v.E8)(p,u);(0,y.b)(l,f),(0,x.Bj)(e);var m=i.name,h=i.location,j=(0,a.a)(Z,{variables:{repositoryName:m,repositoryLocationName:h,pipelineName:u},partialRefetch:!0}),S=null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.pipelineOrError,N=null===j||void 0===j||null===(t=j.data)||void 0===t?void 0:t.partitionSetsOrError;if(!S||!N)return(0,d.jsx)(w.m,{});if("PipelineNotFoundError"===N.__typename||"PipelineNotFoundError"===S.__typename){var C="PipelineNotFoundError"===S.__typename?S.message:"No data returned from GraphQL";return""!==u?(0,d.jsx)(b.U,{icon:"error",title:f?"Job not found":"Pipeline not found",description:C}):(0,d.jsx)(b.U,{icon:"no-results",title:f?"Select a job":"Select a pipeline",description:C})}if("InvalidSubsetError"===S.__typename)throw new Error("Should never happen because we do not request a subset");return"PythonError"===S.__typename?(0,d.jsx)(b.U,{icon:"error",title:"Python Error",description:S.message}):N&&"PythonError"===N.__typename?(0,d.jsx)(b.U,{icon:"error",title:"Python Error",description:N.message}):"asset"===o?(0,d.jsx)(P,{launchpadType:o,pipeline:S,partitionSets:N,repoAddress:i,sessionPresets:s||{}}):(0,d.jsx)(c.Suspense,{fallback:(0,d.jsx)("div",{}),children:(0,d.jsx)(E,{launchpadType:o,pipeline:S,partitionSets:N,repoAddress:i})})},Z=(0,s.Ps)(i||(i=(0,o.Z)(["\n  query LaunchpadRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        ...LaunchpadSessionPipelineFragment\n      }\n      ...PythonErrorFragment\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...LaunchpadSessionPartitionSetsFragment\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment LaunchpadSessionPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n\n  fragment LaunchpadSessionPipelineFragment on Pipeline {\n    id\n    isJob\n    isAssetJob\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),h.B,j.L9,j.UU)},40433:function(e,n,t){t.d(n,{Z:function(){return wn}});var r=t(99500),i=t(85358),o=t(59019),a=t(47427),s=t(19065),l=t(95764),c=t(922),d=t(95550),u=t.n(d),p=t(31522),f=t(73701),m=t(3159),h=t(57994),g=t(98907),x=t(64428),y=t(28463),v=(t(39388),t(50680),t(25559),t(44186),t(99912),t(94407),t(39519),t(36341),t(33961),t(36852),t(81452),t(6968),t(43615)),j=t.n(v),b=t(325),w=t(1033),S=t(24818),N=t(13091),C=t.n(N),k="CodeMirror-lint-markers";function P(e){e.parentNode&&e.parentNode.removeChild(e)}function E(e,n,t){var r=function(e,n,t){var r=document.createElement("div"),i=t.getBoundingClientRect();return r.className="CodeMirror-lint-tooltip",r.appendChild(n.cloneNode(!0)),document.body.appendChild(r),i.top>r.clientHeight?(r.style.top=i.top-r.clientHeight-5+"px",r.style.left=i.left+5+"px"):(r.style.top=i.top+5+"px",r.style.left=i.right+10+"px"),null!=r.style.opacity&&(r.style.opacity=1),r}(0,n,t);function i(){var e;C().off(t,"mouseout",i),r&&((e=r).parentNode&&(null==e.style.opacity&&P(e),e.style.opacity=0,setTimeout((function(){P(e)}),600)),r=null)}var o=setInterval((function(){if(r)for(var e=t;;e=e.parentNode){if(e&&11===e.nodeType&&(e=e.host),e===document.body)return;if(!e){i();break}}if(!r)return clearInterval(o)}),400);C().on(t,"mouseout",i)}function _(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(k);for(var t=0;t<n.marked.length;++t)n.marked[t].clear();n.marked.length=0}function I(e,n,t,r){var i=document.createElement("div"),o=i;return i.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+n,t&&((o=i.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!==r&&C().on(o,"mouseover",(function(n){E(0,e,o)})),i}function A(e){var n=e.severity;n||(n="error");var t=document.createElement("div");return t.className="CodeMirror-lint-message CodeMirror-lint-message-"+n,"undefined"!==typeof e.messageHTML?t.innerHTML=e.messageHTML:t.appendChild(document.createTextNode(e.message)),t}function Z(e,n){_(e);for(var t,r,i=e.state.lint,o=i.options,a=function(e){for(var n=[],t=0;t<e.length;++t){var r=e[t],i=r.from.line;(n[i]||(n[i]=[])).push(r)}return n}(n),s=0;s<a.length;++s){var l=a[s];if(l){for(var c=null,d=i.hasGutter&&document.createDocumentFragment(),u=0;u<l.length;++u){var p=l[u],f=p.severity;f||(f="error"),r=f,c="error"===(t=c)?t:r,o.formatAnnotation&&(p=o.formatAnnotation(p)),i.hasGutter&&d.appendChild(A(p)),p.to&&i.marked.push(e.markText(p.from,p.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+f,__annotation:p}))}i.hasGutter&&e.setGutterMarker(s,k,I(d,c,l.length>1,i.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(n,a,e)}function O(e){var n=e.state.lint.options,t=n.options||n,r=n.getAnnotations||e.getHelper(C().Pos(0,0),"lint");if(r)if(n.async||r.async)!function(e,n,t){var r=e.state.lint,i=++r.waitingFor;function o(){i=-1,e.off("change",o)}e.on("change",o),n(e.getValue(),(function(n,t){e.off("change",o),r.waitingFor===i&&(t&&n instanceof C()&&(n=t),e.operation((function(){Z(e,n)})))}),t,e)}(e,r,t);else{var i=r(e.getValue(),t,e);if(!i)return;i.then?i.then((function(n){e.operation((function(){Z(e,n)}))})):e.operation((function(){Z(e,i)}))}}function K(e){var n=e.state.lint;n&&(clearTimeout(n.timeout),n.timeout=setTimeout((function(){O(e)}),n.options.delay||500))}function M(e,n){for(var t=(n.target||n.srcElement).getBoundingClientRect(),r=(t.left+t.right)/2,i=(t.top+t.bottom)/2,o=e.coordsChar({left:r,top:i},"client"),a=e.findMarksAt(o),s=e.getHelper(C().Pos(0,0),"dagster-docs")(e,o),l=[],c=0;c<a.length;++c){var d=a[c].__annotation;d&&l.push(d)}(s||l.length)&&function(e,n,t){var r=t.target||t.srcElement,i=document.createDocumentFragment();if(e){var o=document.createElement("div");o.textContent=e,i.appendChild(o),n.length&&(o.style.paddingBottom="4px",o.style.marginBottom="4px",o.style.borderBottom="1px solid rgba(0,0,0,0.25)")}for(var a=0;a<n.length;a++){var s=n[a];i.appendChild(A(s))}E(0,i,r)}(s,l,n)}function D(e,n,t){this.marked=[],this.options=n,this.timeout=null,this.hasGutter=t,this.onMouseOver=function(n){M(e,n)},this.waitingFor=0}var z,T=t(13235),F=t(32289);C().defineOption("lint",!1,(function(e,n,t){if(t&&t!==C().Init&&(_(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",K),C().off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),n){for(var r=e.getOption("gutters"),i=!1,o=0;o<r.length;++o)r[o]===k&&(i=!0);var a=e.state.lint=new D(e,(s=n)instanceof Function?{getAnnotations:s}:(s&&!0!==s||(s={}),s),i);!1!==a.options.lintOnChange&&e.on("change",K),!1!==a.options.tooltips&&"gutter"!==a.options.tooltips&&C().on(e.getWrapperElement(),"mouseover",a.onMouseOver)}var s})),C().defineExtension("performLint",(function(){this.state.lint&&O(this)}));var L,R,G=/^[a-zA-Z0-9_@(]$/,$=j()((function(e){e.performLint()}),1e3),B=(0,c.vJ)(z||(z=(0,r.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n"]))),V=function(e){(0,x.Z)(t,e);var n=(0,y.Z)(t);function t(){var e;(0,h.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._editor=void 0,e.moveCursor=function(n,t){var r;if(e._editor){e._editor.setCursor(n,t,{scroll:!1});var i=e._editor.getScrollInfo().clientHeight,o=e._editor.cursorCoords(!0,"local"),a=o.left,s=o.top;null===(r=e._editor)||void 0===r||r.scrollIntoView({left:a,right:a,top:s-20,bottom:s+(i-20)}),e._editor.focus()}},e.moveCursorToPath=function(n){if(e._editor){var t=e._editor.getDoc(),r=w.wL(e.props.configCode),i=(0,T.$P)(r,n,"key");if(i){var o=t.posFromIndex(i?i.start:0);e.moveCursor(o.line,o.ch)}}},e}return(0,g.Z)(t,[{key:"componentDidUpdate",value:function(e){this._editor&&e.configSchema!==this.props.configSchema&&this.performInitialPass()}},{key:"shouldComponentUpdate",value:function(e){return e.configCode!==this.props.configCode||e.readOnly!==this.props.readOnly||e.configSchema!==this.props.configSchema}},{key:"performInitialPass",value:function(){$(this._editor);var e=(0,T.Im)(this._editor).context;this.props.onHelpContextChange(e?{type:e.closestMappingType}:null)}},{key:"render",value:function(){var e=this;return(0,F.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,F.jsx)(B,{}),(0,F.jsx)(S.X9,{value:this.props.configCode,theme:["config-editor"],options:{mode:"yaml",lineNumbers:!0,readOnly:this.props.readOnly,indentUnit:2,smartIndent:!0,showCursorWhenSelecting:!0,lintOnChange:!1,lint:{checkConfig:this.props.checkConfig,lintOnChange:!1,onUpdateLinting:!1},hintOptions:{completeSingle:!1,closeOnUnfocus:!1,schema:this.props.configSchema},keyMap:"sublime",extraKeys:{"Cmd-Space":function(e){return e.showHint({completeSingle:!0})},"Ctrl-Space":function(e){return e.showHint({completeSingle:!0})},"Alt-Space":function(e){return e.showHint({completeSingle:!0})},"Shift-Tab":function(e){return e.execCommand("indentLess")},Tab:function(e){return e.execCommand("indentMore")},"Cmd-F":"findPersistent","Ctrl-F":"findPersistent"},gutters:["CodeMirror-foldgutter","CodeMirror-lint-markers","CodeMirror-linenumbers"],foldGutter:!0},editorDidMount:function(n){e._editor=n,e.performInitialPass()},onBeforeChange:function(n,t,r){e.props.onConfigChange(r)},onCursorActivity:function(n){if(n.getSelection().length)e.props.onHelpContextChange(null);else{var t=(0,T.Im)(n).context;e.props.onHelpContextChange(t?{type:t.closestMappingType}:null)}},onChange:function(e){$(e)},onBlur:function(e){$(e)},onKeyUp:function(e,n){G.test(n.key)&&e.execCommand("autocomplete")}})]})}}]),t}(b.Component),J=function(e,n){return(e&&e.type.key)===(n&&n.type.key)},U=t(7838),q=t(71725),Q=b.memo((function(e){var n=e.context,t=e.allInnerTypes;return n?(0,F.jsxs)(W,{children:[(0,F.jsx)(Y,{children:(0,F.jsx)(q.L,{type:n.type,typesInScope:t,maxDepth:2})}),(0,F.jsx)(H,{children:"Use Ctrl+Space to show auto-completions inline."})]}):(0,F.jsx)(W,{})}),(function(e,n){return J(e.context,n.context)})),H=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__AutocompletionsNote",componentId:"sc-1pjkbac-0"})(["font-size:0.75rem;text-align:center;padding:4px;border-top:1px solid ",";background:",";color:",";"],U.w.KeylineGray,U.w.Gray100,U.w.Gray500),Y=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__ConfigScrollWrap",componentId:"sc-1pjkbac-1"})(["padding:8px;color:",";flex:1;pointer-events:initial;max-height:100%;overflow-y:auto;"],U.w.Dark),W=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__Container",componentId:"sc-1pjkbac-2"})(["position:relative;display:flex;flex-direction:column;background-color:",";height:100%;"],U.w.Gray50),X=t(32030),ee=t(17912),ne=t(88863),te=t(75453),re=t(75497),ie=t(6466),oe=t(3810),ae=t.n(oe),se=t(54972),le=t.n(se),ce=t(14156),de=t(63579),ue=t(12436),pe=t(27719),fe=t(39061),me=(0,m.Ps)(L||(L=(0,r.Z)(["\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      ...AllConfigTypesForEditor\n    }\n  }\n\n  fragment AllConfigTypesForEditor on ConfigType {\n    key\n    description\n    isSelector\n    typeParamKeys\n    ... on RegularConfigType {\n      givenName\n    }\n    ... on MapConfigType {\n      keyLabelName\n    }\n    ... on EnumConfigType {\n      givenName\n      values {\n        value\n        description\n      }\n    }\n    ... on CompositeConfigType {\n      ...CompositeConfigTypeForSchema\n    }\n    ... on ScalarUnionConfigType {\n      key\n      scalarTypeKey\n      nonScalarTypeKey\n    }\n  }\n\n  fragment CompositeConfigTypeForSchema on CompositeConfigType {\n    fields {\n      name\n      description\n      isRequired\n      configTypeKey\n      defaultValueAsJson\n    }\n  }\n"]))),he=(0,m.Ps)(R||(R=(0,r.Z)(["\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ge(e){return e.map((function(e){switch(e.__typename){case"EvaluationStackPathEntry":return e.fieldName;case"EvaluationStackListItemEntry":return"".concat(e.listIndex);case"EvaluationStackMapKeyEntry":case"EvaluationStackMapValueEntry":return"".concat(e.mapKey)}}))}function xe(e,n){if("RunConfigValidationInvalid"!==n.__typename)return{isValid:!0};var t=n.errors.map((function(e){return{message:e.message,reason:e.reason,path:ge(e.stack.entries)}})),r=w.ZP.parse(e),i=Object.keys(r);return t.forEach((function(e){0===e.path.length&&i.length&&(e.path=[i[0]])})),{isValid:!1,errors:t}}var ye,ve,je=t(28064),be=t(33902),we=t(26306),Se=t(89493),Ne=t(6474),Ce=t(8412),ke=function(e){var n=e.modeName?e.modes.find((function(n){return n.name===e.modeName})):e.modes[0];b.useEffect((function(){var t;n&&n.name!==e.modeName&&(null===(t=e.onModeChange)||void 0===t||t.call(e,n.name))}),[n,e.modeName]);var t=1===e.modes.length,r=!e.modeError,i=t&&r;return(0,F.jsx)(Ne.P,{activeItem:n,filterable:!0,disabled:i,items:e.modes,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,F.jsx)(Ce.sN,{active:n.modifiers.active,text:e.name,onClick:n.handleClick},e.name)},onItemSelect:function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n.name)},children:(0,F.jsx)(te.zx,{icon:r?void 0:(0,F.jsx)(re.JO,{name:"error"}),intent:r?"none":"danger",title:i?"To add a mode, add a ModeDefinition to the pipeline.":"Current execution mode",disabled:i,rightIcon:(0,F.jsx)(re.JO,{name:"expand_more"}),"data-test-id":"mode-picker-button",children:r?n?"Mode: ".concat(n.name):"Select Mode":"Invalid Mode Selection"})})},Pe=t(20021),Ee=t(33214),_e=t(762),Ie=t(25496),Ae=t(79082),Ze=t(27218),Oe=t(2112),Ke=t(65164),Me=t(76336),De=(0,m.Ps)(ye||(ye=(0,r.Z)(["\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Oe.Q,Ae.B),ze=function(e){var n=e.serverProvidedSubsetError,t=e.onChange,r=e.pipelineName,i=e.repoAddress,o=e.onFlattenGraphsChange,a=b.useState(!1),c=(0,s.Z)(a,2),d=c[0],u=c[1],p=b.useRef(null),m=e.flattenGraphs||!1,h=(0,l.Z)((0,l.Z)({},(0,we.$)(i)),{},{pipelineName:r}),g=(0,Me.Ux)(i),x=(0,Me.E8)(g,r),y=(0,f.a)(De,{variables:{selector:h,requestScopeHandleID:m?void 0:""}}),v=y.data,j=y.loading,w=e.query||"*",S=("Pipeline"===(null===v||void 0===v?void 0:v.pipelineOrError.__typename)?m?(0,Ze.i)(v.pipelineOrError.solidHandles):v.pipelineOrError.solidHandles:[]).map((function(e){return e.solid})),N=m||S.some((function(e){return"CompositeSolidDefinition"===e.definition.__typename})),C="Pipeline"!==(null===v||void 0===v?void 0:v.pipelineOrError.__typename)&&(null===v||void 0===v?void 0:v.pipelineOrError.message)||null,k=(0,Ie.V)(S,w).all,P=!j&&0===k.length?x?"You must provide a valid op query or * to execute the entire job.":"You must provide a valid solid query or * to execute the entire pipeline.":n?n.message:C;return null!==v&&void 0!==v&&v.pipelineOrError?(0,F.jsx)(X.x,{flex:{direction:"row",alignItems:"center",gap:8},children:(0,F.jsx)(_e.J,{isOpen:d&&!!P,position:"bottom-left",content:(0,F.jsx)(Te,{children:P}),children:(0,F.jsx)(pe.b,{shortcutLabel:"\u2325S",shortcutFilter:function(e){return"KeyS"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()},children:(0,F.jsx)(Ke.j,{width:"*"!==w&&""!==w||d||N?350:90,intent:P?"danger":"none",items:S,ref:p,value:w,placeholder:"Type an op subset\u2026",onChange:function(e){""===e&&(e="*");var n=(0,Ie.V)(S,e).all;n.length===S.length?t(null,e):t(n.map((function(e){return e.name})),e)},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},linkToPreview:{repoName:i.name,repoLocation:i.location,pipelineName:r,isJob:x},flattenGraphsEnabled:N,flattenGraphs:m,setFlattenGraphs:function(){o(!m)}})})})}):null},Te=c.ZP.div.withConfig({displayName:"OpSelector__PopoverErrorWrap",componentId:"sc-6j6o1g-0"})(["padding:4px 8px;border-radius:2px;border:1px solid ",";background:",";color:",";"],U.w.Red500,U.w.Red200,U.w.Red700),Fe=t(16540),Le=t(81034),Re=t(12745),Ge=t(60652),$e=t(11831),Be=t(54268),Ve=t(50346),Je=t(8546),Ue=t(79540),qe=["resources","ops","solids"];function Qe(e){return!(!e||"object"!==typeof e||!("__typename"in e))}var He={invalid:{title:"You need to fix this configuration section.",intent:"danger"},missing:{title:"You need to add this configuration section.",intent:"danger"},present:{title:"This section is present and valid.",intent:"none"},none:{title:"This section is empty and valid.",intent:"none"}},Ye=function(e){var n,t=e.onRemoveExtraPaths,r=e.extraNodes,o=e.disabled,l=(0,Ue.p)(),c={},d=[],p=(0,a.Z)(r);try{for(p.s();!(n=p.n()).done;){var f=n.value,m=f.split(".");if(2===m.length){var h=(0,s.Z)(m,2),g=h[0],x=h[1];c[g]||(c[g]=[]),c[g].push(x)}else d.push(f)}}catch(v){p.e(v)}finally{p.f()}var y=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({title:"Remove extra config",description:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:"You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema."}),Object.entries(c).length>0&&Object.entries(c).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return(0,F.jsxs)(b.Fragment,{children:[(0,F.jsxs)("p",{children:["Extra ",t,":"]}),(0,F.jsx)("ul",{children:r.map((function(e){return(0,F.jsx)("li",{children:(0,F.jsx)(Re.EK,{children:e})},e)}))})]},t)})),d.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("p",{children:"Other extra paths:"}),(0,F.jsx)("ul",{children:d.map((function(e){return(0,F.jsx)("li",{children:(0,F.jsx)(Re.EK,{children:e})},e)}))})]}),(0,F.jsx)("p",{children:"Clicking confirm will automatically remove this extra configuration from your run config."})]})});case 2:t(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(X.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,F.jsx)(te.zx,{disabled:o,onClick:y,children:"Remove extra config"}),o?(0,F.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,F.jsx)(re.JO,{name:"check_circle",color:U.w.Green500}),"No extra config to remove"]}):null]})},We=function(e){var n=e.onScaffoldMissingConfig,t=e.missingNodes,r=e.disabled,o=(0,Ue.p)(),a=(0,F.jsxs)("div",{children:[t.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("p",{children:"Missing paths:"}),(0,F.jsx)("ul",{children:t.map((function(e){return(0,F.jsx)("li",{children:(0,F.jsx)(Re.EK,{children:e})},e)}))})]}),(0,F.jsx)("p",{children:"Clicking confirm will automatically scaffold this missing configuration into your run config with default values. You will need to change the values appropriately."})]}),s=function(){var e=(0,i.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({title:"Scaffold missing config",description:a});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsxs)(X.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,F.jsx)(te.zx,{disabled:r,onClick:s,children:"Scaffold missing config"}),r?(0,F.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,F.jsx)(re.JO,{name:"check_circle",color:U.w.Green500}),"No missing config"]}):null]})},Xe=function(e){var n=e.document,t=e.validation,r=e.onHighlightPath,i=e.launchpadType,l=e.onRemoveExtraPaths,c=e.onScaffoldMissingConfig,d=e.solidSelection,u=e.runConfigSchema,p=b.useState(!1),f=(0,s.Z)(p,2),m=f[0],h=f[1],g=b.useMemo((function(){if(!u)return{};var e=u.allConfigTypes,n=u.rootConfigType,t={},r=e.find((function(e){return e.key===n.key}));return"CompositeConfigType"!==(null===r||void 0===r?void 0:r.__typename)||r.fields.forEach((function(n){var r=e.find((function(e){return e.key===n.configTypeKey}));"CompositeConfigType"===(null===r||void 0===r?void 0:r.__typename)&&(t[n.name]=r)})),t}),[u]),x=[],y=[],v=[];if(t&&"RunConfigValidationInvalid"===t.__typename&&t.errors.forEach((function(e){var n=ge(e.stack.entries);if(v.push({pathKey:n.join("."),error:e}),"MissingFieldConfigError"===e.__typename)y.push([].concat((0,o.Z)(n),[e.field.name]).join("."));else if("MissingFieldsConfigError"===e.__typename){var t,r=(0,a.Z)(e.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;y.push([].concat((0,o.Z)(n),[i.name]).join("."))}}catch(d){r.e(d)}finally{r.f()}}else if("FieldNotDefinedConfigError"===e.__typename)x.push([].concat((0,o.Z)(n),[e.fieldName]).join("."));else if("FieldsNotDefinedConfigError"===e.__typename){var s,l=(0,a.Z)(e.fieldNames);try{for(l.s();!(s=l.n()).done;){var c=s.value;x.push([].concat((0,o.Z)(n),[c]).join("."))}}catch(d){l.e(d)}finally{l.f()}}else"RuntimeMismatchConfigError"===e.__typename&&y.push(n.join("."))})),"InvalidSubsetError"===(null===t||void 0===t?void 0:t.__typename)&&v.push({pathKey:"",error:t.message}),"PythonError"===(null===t||void 0===t?void 0:t.__typename)){var j=(0,F.jsx)(ue.T,{error:t});v.push({pathKey:"",error:(0,F.jsxs)("span",{children:["PythonError:"," ",(0,F.jsx)(Ge.Z,{onClick:function(){return(0,ce._)({body:j})},children:"Click for details"})]})})}var w=g.resources,S=g.ops,N=g.solids,C=(0,Le.Z)(g,qe),k=!(null===S||void 0===S||!S.fields),P=function(e,t){var i=t.map((function(t){if(null!==d&&void 0!==d&&d.length&&(null===d||void 0===d||!d.includes(t.name)))return null;var i=[].concat((0,o.Z)(e),[t.name]),a=i.join("."),s=v.filter((function(e){return e.pathKey===a||e.pathKey.startsWith("".concat(a,"."))})).map((function(e){return e.error})),l=dn(i,n),c=y.some((function(e){return e.includes(i.join("."))})),u=s.length||c,p=i.some((function(e,n){return y.includes(i.slice(0,n+1).join("."))}));if(m&&!u)return!1;var f=p&&t.isRequired?"missing":u?"invalid":l?"present":"none";return(0,F.jsx)($e.u,{position:"bottom",content:He[f].title,intent:He[f].intent,children:(0,F.jsx)(Be.V,{intent:He[f].intent,onClick:function(){var e=s.find(Qe);r(e?ge(e.stack.entries):i)},children:t.name},t.name)},t.name)})).filter(Boolean);return i.length?i:(0,F.jsx)(on,{children:"Nothing to display."})};return(0,F.jsx)(ee.OS,{identifier:"run-preview",axis:"horizontal",first:(0,F.jsxs)(an,{children:[(0,F.jsxs)(tn,{children:[(0,F.jsx)(nn,{children:"Errors"}),v.length?v.map((function(e,n){return(0,F.jsx)(cn,{error:e.error,onHighlight:r},n)})):(0,F.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,F.jsx)(re.JO,{name:"check_circle",color:U.w.Green500}),"No errors"]})]}),(0,F.jsxs)(tn,{children:[(0,F.jsx)(nn,{children:"Config actions:"}),(0,F.jsxs)(X.x,{flex:{direction:"column",gap:8},padding:{top:4,bottom:20},children:[(0,F.jsx)(We,{onScaffoldMissingConfig:c,missingNodes:y,disabled:!y.length}),(0,F.jsx)(Ye,{onRemoveExtraPaths:l,extraNodes:x,disabled:!x.length})]})]})]}),firstInitialPercent:50,firstMinSize:150,second:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{style:{overflowY:"scroll",width:"100%",height:"100%"},children:[(0,F.jsxs)(ln,{children:[(0,F.jsxs)(tn,{children:[(0,F.jsx)(nn,{children:"Runtime"}),(0,F.jsx)(rn,{children:P([],Object.keys(C).map((function(e){return{name:e,isRequired:!1}})))})]}),((null===w||void 0===w?void 0:w.fields.length)||0)>0&&(0,F.jsxs)(tn,{children:[(0,F.jsx)(nn,{children:"Resources"}),(0,F.jsx)(rn,{children:P(["resources"],(null===w||void 0===w?void 0:w.fields)||[])})]})]}),(0,F.jsxs)(tn,{children:[(0,F.jsx)(nn,{children:"asset"===i?"Assets (Ops)":"Ops"}),(0,F.jsx)(rn,{children:P([k?"ops":"solids"],(k?null===S||void 0===S?void 0:S.fields:null===N||void 0===N?void 0:N.fields)||[])})]}),(0,F.jsx)("div",{style:{height:50}})]}),(0,F.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"12px 15px 0px 10px",background:"rgba(255,255,255,0.7)"},children:(0,F.jsx)(Ve.X,{label:"Errors Only",checked:m,onChange:function(){return h(!m)}})})]})})},en=(0,m.Ps)(ve||(ve=(0,r.Z)(["\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        ...RunPreviewValidationErrors\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  fragment RunPreviewValidationErrors on PipelineConfigValidationError {\n    reason\n    message\n    stack {\n      entries {\n        __typename\n        ... on EvaluationStackPathEntry {\n          fieldName\n        }\n        ... on EvaluationStackListItemEntry {\n          listIndex\n        }\n        ... on EvaluationStackMapKeyEntry {\n          mapKey\n        }\n        ... on EvaluationStackMapValueEntry {\n          mapKey\n        }\n      }\n    }\n    ... on MissingFieldConfigError {\n      field {\n        name\n      }\n    }\n    ... on MissingFieldsConfigError {\n      fields {\n        name\n      }\n    }\n    ... on FieldNotDefinedConfigError {\n      fieldName\n    }\n    ... on FieldsNotDefinedConfigError {\n      fieldNames\n    }\n  }\n\n  ","\n"])),Ae.B),nn=c.ZP.div.withConfig({displayName:"RunPreview__SectionTitle",componentId:"sc-1d5bfcs-0"})(["color:",";text-transform:uppercase;font-size:12px;margin-bottom:8px;"],U.w.Gray400),tn=c.ZP.div.withConfig({displayName:"RunPreview__Section",componentId:"sc-1d5bfcs-1"})(["margin-top:14px;margin-left:10px;"]),rn=c.ZP.div.withConfig({displayName:"RunPreview__ItemSet",componentId:"sc-1d5bfcs-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;gap:4px;"]),on=c.ZP.div.withConfig({displayName:"RunPreview__ItemsEmptyNotice",componentId:"sc-1d5bfcs-3"})(["font-size:13px;padding-top:7px;padding-bottom:7px;"]),an=c.ZP.div.withConfig({displayName:"RunPreview__ErrorListContainer",componentId:"sc-1d5bfcs-4"})(["margin-left:10px;overflow-y:scroll;height:100%;"]),sn=c.ZP.div.withConfig({displayName:"RunPreview__ErrorRowContainer",componentId:"sc-1d5bfcs-5"})(["text-align:left;font-size:13px;white-space:pre-wrap;word-break:break-word;font-family:",";cursor:pointer;display:flex;flex-direction:row;align-items:flex-start;border-bottom:1px solid #ccc;padding:8px;margin:8px 12px 0 -8px;&:last-child{border-bottom:0;margin-bottom:15px;}",""],Je.b.monospace,(function(e){return e.hoverable&&"&:hover {\n      background: ".concat(U.w.Gray50,";\n    }\n  ")})),ln=c.ZP.div.withConfig({displayName:"RunPreview__RuntimeAndResourcesSection",componentId:"sc-1d5bfcs-6"})(["display:flex;gap:12px;@media (max-width:800px){flex-direction:column;}"]),cn=function(e){var n=e.error,t=e.onHighlight,r=null,i=null;Qe(n)?(r=n.message,i=n):r=n;var o=r;return"string"===typeof r&&r.length>400&&(o=function(e){var n=e.indexOf("{");-1===n&&(n=e.indexOf(". "));-1===n&&(n=400);return e.substr(0,n)+"... "}(r)),(0,F.jsxs)(sn,{hoverable:!!i,onClick:function(){return i&&t(ge(i.stack.entries))},children:[(0,F.jsx)("div",{style:{paddingRight:4},children:(0,F.jsx)(re.JO,{name:"error",color:U.w.Red500})}),(0,F.jsxs)("div",{children:[o,o!==r&&(0,F.jsxs)(F.Fragment,{children:["\xa0",(0,F.jsx)(Ge.Z,{onClick:function(){return(0,ce._)({body:(0,F.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:r})})},children:"View all"})]})]})]})};function dn(e,n){if(!n||"object"!==typeof n)return!1;if(0===e.length)return!0;var t=(0,Fe.Z)(e),r=t[0];return dn(t.slice(1),n[r])}var un,pn,fn=t(80610),mn=t(33547),hn=t(76341),gn=function e(n,t){var r=t[n];switch(r.__typename){case"CompositeConfigType":if(r.isSelector)return"<selector>";var i,o={},s=(0,a.Z)(r.fields);try{for(s.s();!(i=s.n()).done;){var l=i.value,c=l.name,d=l.isRequired,u=l.configTypeKey;d&&(o[c]=e(u,t))}}catch(p){s.e(p)}finally{s.f()}return o;case"ArrayConfigType":return[];case"MapConfigType":return{};case"NullableConfigType":return e(r.typeParamKeys[0],t);case"EnumConfigType":return r.values.map((function(e){return e.value})).join("|");case"ScalarUnionConfigType":return e(r.scalarTypeKey,t);case"RegularConfigType":return{String:"",Int:0,Float:0,Bool:!0,Any:"AnyType"}[r.key];default:(0,hn.UT)(r)}},xn=function(e){var n=e.allConfigTypes,t=e.rootConfigType,r=function(e){var n,t={},r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.key]=i}}catch(o){r.e(o)}finally{r.f()}return t}(n);return gn(t.key,r)},yn="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",vn=function(e,n){switch(n.type){case"preview-loading":return(0,l.Z)((0,l.Z)({},e),{},{previewLoading:n.payload});case"set-preview":var t=n.payload,r=t.preview,i=t.previewedDocument,o=t.previewLoading;return(0,l.Z)((0,l.Z)({},e),{},{preview:r,previewedDocument:i,previewLoading:o});case"toggle-tag-editor":return(0,l.Z)((0,l.Z)({},e),{},{tagEditorOpen:n.payload});case"toggle-config-loading":return(0,l.Z)((0,l.Z)({},e),{},{configLoading:n.payload});case"set-editor-help-context":return(0,l.Z)((0,l.Z)({},e),{},{editorHelpContext:n.payload});default:return e}},jn=function(e){var n=e.launchpadType,t=e.children;return"asset"===n?(0,F.jsxs)(X.x,{flex:{direction:"row"},border:{side:"top",width:1,color:U.w.KeylineGray},padding:{right:12,vertical:8},children:[(0,F.jsx)("div",{style:{flexGrow:1}}),t]}):(0,F.jsx)("div",{style:{position:"absolute",bottom:12,right:12,zIndex:1},children:t})},bn={preview:null,previewLoading:!1,previewedDocument:null,configLoading:!1,editorHelpContext:null,tagEditorOpen:!1},wn=function(e){var n,t,r,c=e.launchpadType,d=e.session,m=e.onSave,h=e.partitionSets,g=e.pipeline,x=e.repoAddress,y=(0,p.x)(),v=b.useReducer(vn,bn),j=(0,s.Z)(v,2),S=j[0],N=j[1],C=(0,de.xz)(x.location).permissions.canLaunchPipelineExecution,k=b.useRef(!1),P=b.useRef(null),E=b.useRef(null),_=b.useRef(0),I=g.isJob,A=b.useMemo((function(){return d.tags||[]}),[d]),Z=(0,l.Z)((0,l.Z)({},(0,we.$)(x)),{},{pipelineName:g.name,solidSelection:d.solidSelection||void 0,assetSelection:null===(n=d.assetSelection)||void 0===n?void 0:n.map((function(e){return{path:e.assetKey.path}}))}),O=(0,f.a)(En,{variables:{selector:Z,mode:null===d||void 0===d?void 0:d.mode},partialRefetch:!0}),K=null===O||void 0===O||null===(t=O.data)||void 0===t?void 0:t.runConfigSchemaOrError;b.useEffect((function(){return k.current=!0,function(){k.current=!1}}));var M,D,z=function(e){m(e)},T="RunConfigSchema"===(null===K||void 0===K?void 0:K.__typename)?K:void 0,L="ModeNotFoundError"===(null===K||void 0===K?void 0:K.__typename)?K:void 0,R=function(){var e=(0,i.Z)(u().mark((function e(n){var t,r,i,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.current+=1,t=_.current,r=Cn(n),N({type:"preview-loading",payload:!0}),e.next=6,y.query({fetchPolicy:"no-cache",query:kn,variables:{runConfigData:r,pipeline:Z,mode:d.mode||"default"}});case 6:return i=e.sent,o=i.data,k.current&&(a=t===_.current,N({type:"set-preview",payload:{preview:o,previewedDocument:r,previewLoading:!a&&S.previewLoading}})),e.abrupt("return",xe(r,o.isPipelineConfigValid));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(e){var n=d.base?A.filter((function(n){var t,r;return(null===(t=d.base)||void 0===t?void 0:t.tags)&&!(null!==(r=d.base)&&void 0!==r&&r.tags.some((function(e){return e.key===n.key&&e.value===n.value})))&&!e.some((function(e){return e.key===n.key}))})):[];return[].concat((0,o.Z)(e),(0,o.Z)(n))},$=function(){var e=(0,i.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.tags.map(Sn),z({base:{presetName:n.name,tags:t},name:n.name,runConfigYaml:n.runConfigYaml||"",solidSelection:n.solidSelection,solidSelectionQuery:null===n.solidSelection?"*":n.solidSelection.join(","),mode:n.mode,tags:G(t),needsRefresh:!1});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)(u().mark((function e(n,t,r,i){var o,a,s,l,c,p,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(),e.prev=1,o=d.base,e.next=5,y.query({query:Se.Fp,variables:{repositorySelector:n,partitionSetName:t,partitionName:r}});case 5:if(a=e.sent,(s=a.data)&&s.partitionSetOrError&&"PartitionSet"===s.partitionSetOrError.__typename&&s.partitionSetOrError.partition){e.next=10;break}return W(),e.abrupt("return");case 10:l=s.partitionSetOrError.partition,c=[],"PythonError"===l.tagsOrError.__typename?(0,ce._)({body:(0,F.jsx)(ue.T,{error:l.tagsOrError})}):c=l.tagsOrError.results.map(Sn),"PythonError"===l.runConfigOrError.__typename?(p="",(0,ce._)({body:(0,F.jsx)(ue.T,{error:l.runConfigOrError})})):p=l.runConfigOrError.yaml,f=i||l.solidSelection,z({name:l.name,base:Object.assign({},o,{partitionName:l.name,tags:c}),runConfigYaml:p,solidSelection:f,solidSelectionQuery:null===f?"*":f.join(","),mode:l.mode,tags:G(c),needsRefresh:!1}),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:W();case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(n,t,r,i){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.Z)(u().mark((function e(n){var t,r,i,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("presetName"in n)){e.next=5;break}return t=n.presetName,(r=g.presets.find((function(e){return e.name===t})))&&$((0,l.Z)((0,l.Z)({},r),{},{solidSelection:d.solidSelection||r.solidSelection})),e.abrupt("return");case 5:if(i=n.partitionName,o=n.partitionsSetName,a=(0,we.$)(x),!i){e.next=12;break}return Y(),e.next=11,B(a,o,i,d.solidSelection);case 11:W();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){return N({type:"toggle-tag-editor",payload:!0})},Y=function(){return N({type:"toggle-config-loading",payload:!0})},W=function(){return N({type:"toggle-config-loading",payload:!1})},oe=S.preview,se=S.previewLoading,me=S.previewedDocument,he=S.configLoading,ge=S.editorHelpContext,ye=S.tagEditorOpen,ve=b.useMemo((function(){var e=d.base,n=d.needsRefresh;return e&&n&&("presetName"in e||e.partitionsSetName&&e.partitionName)?e:null}),[d]);"asset"===c&&(M="Materialize"),h.results.length&&d.base&&"partitionsSetName"in d.base&&!d.base.partitionName&&(D="This job is partitioned. Are you sure you want to launch a run without a partition specified?");var Ne=(0,Pe.C)().LaunchRootExecutionButton;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ee.OS,{axis:"vertical",identifier:"execution",firstMinSize:100,firstInitialPercent:75,first:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ee.f,{isLoading:he,message:"Generating configuration..."}),(0,F.jsxs)(fn.a,{children:[(0,F.jsx)(Se.KC,{pipeline:g,partitionSets:h.results,base:d.base,onSaveSession:z,onSelectPreset:$,onSelectPartition:B,repoAddress:x,assetSelection:d.assetSelection}),(0,F.jsx)(Pn,{}),"asset"===c?(0,F.jsx)(ne.oi,{readOnly:!0,value:d.assetSelection?d.assetSelection.map((function(e){return(0,fe.Je)(e.assetKey)})).join(", "):"*"}):(0,F.jsx)(ze,{serverProvidedSubsetError:"InvalidSubsetError"===(null===oe||void 0===oe?void 0:oe.isPipelineConfigValid.__typename)?oe.isPipelineConfigValid:void 0,pipelineName:g.name,value:d.solidSelection||null,query:d.solidSelectionQuery||null,onChange:function(e,n){z({solidSelection:e,solidSelectionQuery:n})},flattenGraphs:d.flattenGraphs,onFlattenGraphsChange:function(e){z({flattenGraphs:e})},repoAddress:x}),I?(0,F.jsx)("span",{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Pn,{}),(0,F.jsx)(ke,{modes:g.modes,modeError:L,onModeChange:function(e){z({mode:e})},modeName:d.mode})]}),(0,F.jsx)(mn.U,{tagsFromDefinition:g.tags,tagsFromSession:A,onChange:function(e){var n={},t=[];e.forEach((function(e){e.key in n||(n[e.key]=e.value,t.push(e))})),z({tags:t})},open:ye,onRequestClose:function(){return N({type:"toggle-tag-editor",payload:!1})}}),(0,F.jsx)("div",{style:{flex:1}}),(0,F.jsx)(pe.b,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return"KeyT"===e.code&&e.altKey},onShortcut:H,children:(0,F.jsx)(te.zx,{onClick:H,icon:(0,F.jsx)(re.JO,{name:"edit"}),children:"Edit tags"})}),(0,F.jsx)(Pn,{}),(0,F.jsx)(ee.Uj,{axis:"horizontal",container:E})]}),g.tags.length||A.length?(0,F.jsx)(X.x,{padding:{vertical:8,left:12,right:0},border:{side:"bottom",width:1,color:U.w.Gray200},children:(0,F.jsx)(mn.x,{tagsFromDefinition:g.tags,tagsFromSession:A,onRequestEdit:H})}):null,ve?(0,F.jsx)(X.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:U.w.Gray200},children:(0,F.jsxs)(ie.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,F.jsx)(re.JO,{name:"warning",color:U.w.Yellow500}),(0,F.jsxs)("div",{children:[(0,be.Uz)(x)," has been manually refreshed, and this configuration may now be out of date."]}),(0,F.jsx)(te.zx,{intent:"primary",onClick:function(){return q(ve)},disabled:S.configLoading,children:"Refresh config"}),(0,F.jsx)(te.zx,{onClick:function(){z({needsRefresh:!1})},children:"Dismiss"})]})}):null,(0,F.jsx)(ee.OS,{ref:E,axis:"horizontal",identifier:"execution-editor",firstMinSize:100,firstInitialPercent:70,first:(0,F.jsx)(V,{ref:P,readOnly:!1,configSchema:T,configCode:d.runConfigYaml,onConfigChange:function(e){z({runConfigYaml:e})},onHelpContextChange:function(e){J(ge,e)||N({type:"set-editor-help-context",payload:e})},checkConfig:R}),second:(0,F.jsx)(Q,{context:ge,allInnerTypes:(null===T||void 0===T?void 0:T.allConfigTypes)||[]})})]}),second:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Ee.f,{isLoading:se,message:T?"Checking config...":"Loading config schema..."}),(0,F.jsx)(Xe,{launchpadType:c,document:me,validation:oe?oe.isPipelineConfigValid:null,solidSelection:d.solidSelection,runConfigSchema:T,onHighlightPath:function(e){var n;return null===(n=P.current)||void 0===n?void 0:n.moveCursorToPath(e)},onRemoveExtraPaths:function(e){return function(e){try{var n,t=w.Qc(Cn(d.runConfigYaml)),r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;Nn(t,i)}}catch(o){r.e(o)}finally{r.f()}z({runConfigYaml:w.Pz(t)})}catch(o){return void(0,ce._)({title:"Invalid YAML",body:yn})}}(e)},onScaffoldMissingConfig:function(){var e=T?xn(T):{};try{var n=w.Qc(Cn(d.runConfigYaml)),t=ae()(e,n),r=w.Pz(t);z({runConfigYaml:r})}catch(i){(0,ce._)({title:"Invalid YAML",body:yn})}}})]})}),(0,F.jsx)(jn,{launchpadType:c,children:(0,F.jsx)(Ne,{title:M,warning:D,hasLaunchPermission:C,pipelineName:g.name,getVariables:function(){if(d){var e=Cn(d.runConfigYaml);try{w.Qc(e)}catch(n){return void(0,ce._)({title:"Invalid YAML",body:yn})}return{executionParams:{runConfigData:e,selector:(0,l.Z)((0,l.Z)({},Z),{},{assetSelection:d.assetSelection?d.assetSelection.map((function(e){return{path:e.assetKey.path}})):void 0}),mode:d.mode||"default",executionMetadata:{tags:le()([].concat((0,o.Z)(d.solidSelectionQuery?[{key:je.H.SolidSelection,value:d.solidSelectionQuery}]:[]),(0,o.Z)(null!==d&&void 0!==d&&d.base&&(null===d||void 0===d?void 0:d.base).presetName?[{key:je.H.PresetName,value:(null===d||void 0===d?void 0:d.base).presetName}]:[]),(0,o.Z)(A.map(Sn)),(0,o.Z)(g.tags.map(Sn))),(function(e){return e.key}))}}}}},disabled:"PipelineConfigValidationValid"!==(null===oe||void 0===oe||null===(r=oe.isPipelineConfigValid)||void 0===r?void 0:r.__typename),behavior:"open"})})]})},Sn=function(e){return{key:e.key,value:e.value}},Nn=function(e,n){for(var t=n.split("."),r=0;r<t.length-1;r++)if("undefined"===typeof(e=e[t[r]]))return;var i=t.pop();i&&delete e[i]},Cn=function(e){return(e||"").trim()||"{}"},kn=(0,m.Ps)(un||(un=(0,r.Z)(["\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n\n  ","\n  ","\n"])),he,en),Pn=c.ZP.div.withConfig({displayName:"LaunchpadSession__SessionSettingsSpacer",componentId:"sc-1pg2cql-0"})(["width:5px;"]),En=(0,m.Ps)(pn||(pn=(0,r.Z)(["\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionRunConfigSchemaFragment\n    }\n  }\n\n  fragment LaunchpadSessionRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      ...LaunchpadSessionModeNotFound\n    }\n  }\n\n  fragment LaunchpadSessionModeNotFound on ModeNotFoundError {\n    message\n  }\n\n  ","\n"])),me)},44969:function(e,n,t){t.d(n,{U:function(){return c}});var r=t(95764),i=t(17912),o=t(34595),a=t(89646),s=(t(325),t(80610)),l=t(32289),c=function(e){return(0,l.jsx)(i.OS,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.a,{children:(0,l.jsx)(o.$,{purpose:"section"})}),(0,l.jsx)(a.t,(0,r.Z)({},e))]}),second:(0,l.jsx)("div",{})})}},6364:function(e,n,t){t.d(n,{m:function(){return s}});var r=t(17912),i=(t(325),t(33214)),o=t(80610),a=t(32289),s=function(){return(0,a.jsx)(r.OS,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.f,{isLoading:!0,message:"Loading pipeline and partition sets..."}),(0,a.jsx)(o.a,{})]}),second:(0,a.jsx)(i.f,{isLoading:!0,message:"Loading pipeline and partition sets..."})})}},33214:function(e,n,t){t.d(n,{f:function(){return s}});var r=t(922),i=t(6466),o=t(34595),a=(t(325),t(32289)),s=function(e){var n=e.isLoading,t=e.message;return(0,a.jsx)(l,{isLoading:n,children:(0,a.jsxs)(i.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,a.jsx)(o.$,{purpose:"body-text"}),(0,a.jsx)("div",{children:t})]})})},l=r.ZP.div.withConfig({displayName:"LoadingOverlay__LoadingOverlayContainer",componentId:"sc-1tqulki-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fff;z-index:20;display:",";align-items:center;justify-content:center;opacity:",";transition:opacity 150ms linear;transition-delay:300ms;"],(function(e){return e.isLoading?"flex":"none"}),(function(e){return e.isLoading?"0.7":"0"}))},80610:function(e,n,t){t.d(n,{a:function(){return o}});var r=t(922),i=t(7838),o=r.ZP.div.withConfig({displayName:"SessionSettingsBar",componentId:"sc-6lzkvu-0"})(["color:white;display:flex;position:relative;border-bottom:1px solid ",";background:",";align-items:center;height:47px;padding:8px 10px;"],i.w.Gray200,i.w.White)},33547:function(e,n,t){t.d(n,{U:function(){return x},x:function(){return y}});var r=t(59019),i=t(19065),o=t(922),a=t(8358),s=t(6466),l=t(32030),c=t(11831),d=t(88863),u=t(75453),p=t(75497),f=t(325),m=t(27719),h=t(28064),g=t(32289),x=function(e){var n=e.tagsFromDefinition,t=void 0===n?[]:n,o=e.tagsFromSession,x=void 0===o?[]:o,y=e.open,v=e.onChange,b=e.onRequestClose,w=f.useState((function(){return x.length?x:[{key:"",value:""}]})),S=(0,i.Z)(w,2),N=S[0],C=S[1];f.useEffect((function(){y||C(x.length?x:[{key:"",value:""}])}),[x,y]);var k=N.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return e.key&&e.value})),P=N.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return!e.key!==!e.value})),E=function(){P.length||(v(k),b())},_=N===x||!!P.length,I=function(e,n,t){C((function(i){return[].concat((0,r.Z)(i.slice(0,t)),[{key:e,value:n}],(0,r.Z)(i.slice(t+1)))}))};return(0,g.jsxs)(a.Vq,{icon:"info",onClose:b,style:{minWidth:700},title:"Add tags to run",isOpen:y,children:[(0,g.jsx)(a.a7,{children:(0,g.jsxs)(s.Z,{spacing:16,direction:"column",children:[t.length?(0,g.jsxs)(s.Z,{direction:"column",spacing:8,children:[(0,g.jsx)(l.x,{margin:{left:2},style:{fontSize:"13px",fontWeight:500},children:"Tags from definition:"}),(0,g.jsx)(j,{children:t.map((function(e,n){var t=e.key;return N.some((function(e){return e.key===t}))?(0,g.jsx)(c.u,{content:"Overriden by custom tag value",placement:"top",children:(0,g.jsx)("span",{style:{opacity:.2},children:(0,g.jsx)(h.i,{tag:e},n)})},t):(0,g.jsx)(h.i,{tag:e},t)}))})]}):null,(0,g.jsxs)(l.x,{flex:{direction:"column",gap:12},children:[(0,g.jsx)("div",{children:"Custom tags:"}),(0,g.jsx)(l.x,{flex:{direction:"column",gap:8},children:N.map((function(e,n){var t=e.key,i=e.value;return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:8},children:[(0,g.jsx)(d.oi,{placeholder:"Tag Key",value:t,onChange:function(e){return I(e.target.value,i,n)}}),(0,g.jsx)(d.oi,{placeholder:"Tag Value",value:i,onChange:function(e){return I(t,e.target.value,n)}}),(0,g.jsx)(u.zx,{disabled:1===N.length&&!t.trim()&&!i.trim(),onClick:function(){return function(e){C((function(n){return 0===e&&1===n.length?[{key:"",value:""}]:[].concat((0,r.Z)(n.slice(0,e)),(0,r.Z)(n.slice(e+1)))}))}(n)},icon:(0,g.jsx)(p.JO,{name:"delete"}),children:"Remove"})]},n)}))}),(0,g.jsx)(l.x,{margin:{left:2},flex:{direction:"row"},children:(0,g.jsx)(u.zx,{onClick:function(){C((function(e){return[].concat((0,r.Z)(e),[{key:"",value:""}])}))},icon:(0,g.jsx)(p.JO,{name:"add_circle"}),children:"Add custom tag"})})]})]})}),(0,g.jsxs)(a.cN,{children:[(0,g.jsx)(u.zx,{onClick:b,children:"Cancel"}),(0,g.jsx)(m.b,{shortcutLabel:"\u2325Enter",shortcutFilter:function(e){return"Enter"===e.code&&e.altKey},onShortcut:E,children:(0,g.jsx)(u.zx,{intent:"primary",onClick:E,disabled:_,children:"Apply"})})]})]})},y=function(e){var n=e.tagsFromSession,t=e.tagsFromDefinition,r=e.actions;return(0,g.jsx)(v,{children:(0,g.jsxs)(j,{children:[t?t.map((function(e,t){var i=e.key;return n.some((function(e){return e.key===i}))?(0,g.jsx)(c.u,{content:"Overriden by custom tag value",placement:"top",children:(0,g.jsx)("span",{style:{opacity:.2},children:(0,g.jsx)(h.i,{tag:e,actions:r},t)})},i):(0,g.jsx)(h.i,{tag:e,actions:r},t)})):void 0,n.map((function(e,n){return(0,g.jsx)(h.i,{tag:e,actions:r},n)}))]})})},v=o.ZP.div.withConfig({displayName:"TagEditor__Container",componentId:"f3ti0i-0"})(["align-items:flex-start;display:flex;flex-direction:row;"]),j=o.ZP.div.withConfig({displayName:"TagEditor__TagList",componentId:"f3ti0i-1"})(["display:flex;flex:1;flex-wrap:wrap;gap:4px;"])},20346:function(e,n,t){t.d(n,{D:function(){return I}});var r,i=t(99500),o=t(85358),a=t(19065),s=t(922),l=t(95550),c=t.n(l),d=t(49148),u=t(3159),p=t(11831),f=t(12745),m=t(75497),h=t(8358),g=t(32030),x=t(88863),y=t(34595),v=t(7838),j=t(75453),b=t(325),w=t(14156),S=t(12436),N=t(82360),C=t(1520),k=t(26306),P=t(32289),E=["...","\x07","\b","\f","\n","\r","\t","\v","\0","|",",","[","]"," "],_=["...","\\a","\\b","\\f","\\n","\\r","\\t","\\v","\\0","|",'","',"[","]",'" "'],I=function(e){var n=e.isOpen,t=e.partitionDefinitionName,r=e.close,i=e.repoAddress,s=e.refetch,l=e.onCreated,u=b.useState(""),I=(0,a.Z)(u,2),O=I[0],K=I[1],M=(0,d.D)(A),D=(0,a.Z)(M,1)[0],z=b.useState(!1),T=(0,a.Z)(z,2),F=T[0],L=T[1],R=b.useMemo((function(){return 0===O.length||!E.some((function(e){return O.includes(e)}))}),[O]),G=R?null:(0,P.jsx)("span",{"data-testid":(0,C.N)("warning-icon"),children:(0,P.jsx)(p.u,{content:(0,P.jsxs)("div",{children:["The following substrings are not allowed:"," ",(0,P.jsxs)(f.fv,{children:["[",_.join(","),"]"]})]}),placement:"top",children:(0,P.jsx)(m.JO,{name:"warning"})})}),$=function(){var e=(0,o.Z)(c().mark((function e(){var n,o,a,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=2;break}return e.abrupt("return");case 2:return L(!0),e.next=5,D({variables:{repositorySelector:(0,k.$)(i),partitionsDefName:t||"",partitionKey:O},refetchQueries:["PartitionHealthQuery","AssetEventsQuery"]});case 5:o=e.sent,L(!1),a=null===(n=o.data)||void 0===n?void 0:n.addDynamicPartition,e.t0=null===a||void 0===a?void 0:a.__typename,e.next="PythonError"===e.t0?11:"DuplicateDynamicPartitionError"===e.t0?13:"UnauthorizedError"===e.t0?15:"AddDynamicPartitionSuccess"===e.t0?17:22;break;case 11:return(0,w._)({title:"Could not create environment variable",body:(0,P.jsx)(S.T,{error:a})}),e.abrupt("break",24);case 13:return(0,w._)({title:"Could not add partition",body:"A partition this name already exists."}),e.abrupt("break",24);case 15:return(0,w._)({title:"Could not add partition",body:null!==(d=a.message)&&void 0!==d?d:"You do not have permission to do this."}),e.abrupt("break",24);case 17:return null===s||void 0===s||s(),l(O),r(),(0,N.y)(),e.abrupt("break",24);case 22:return(0,w._)({title:"Could not add partition",body:"An unknown error occurred."}),e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.jsxs)(h.Vq,{isOpen:n,canEscapeKeyClose:!0,canOutsideClickClose:!0,title:(0,P.jsxs)(g.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,P.jsx)(m.JO,{name:"add_circle",size:24}),(0,P.jsxs)("div",{children:["Add a partition",t?(0,P.jsxs)(P.Fragment,{children:[" ","for ",(0,P.jsx)(f.fv,{children:t})]}):""]})]}),children:[(0,P.jsx)(h.a7,{children:(0,P.jsxs)(g.x,{flex:{direction:"column",gap:6},children:[(0,P.jsx)("div",{children:"Partition name"}),(0,P.jsx)(Z,{children:(0,P.jsx)(x.oi,{"data-testid":(0,C.N)("partition-input"),rightElement:null!==G&&void 0!==G?G:F?(0,P.jsx)(y.$,{purpose:"body-text"}):void 0,disabled:F,placeholder:"name",value:O,onChange:function(e){return K(e.target.value)},onKeyPress:function(e){"Enter"===e.code&&$()},strokeColor:R?void 0:v.w.Red500,ref:b.useCallback((function(e){e&&e.focus()}),[])})})]})}),(0,P.jsxs)(h.cN,{children:[(0,P.jsx)(j.zx,{onClick:r,children:"Cancel"}),(0,P.jsx)(j.zx,{intent:"primary",onClick:$,disabled:!R,"data-testid":(0,C.N)("save-partition-button"),children:"Save"})]})]})},A=(0,u.Ps)(r||(r=(0,i.Z)(["\n  mutation AddDynamicPartitionMutation(\n    $partitionsDefName: String!\n    $partitionKey: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    addDynamicPartition(\n      partitionsDefName: $partitionsDefName\n      partitionKey: $partitionKey\n      repositorySelector: $repositorySelector\n    ) {\n      __typename\n      ... on AddDynamicPartitionSuccess {\n        partitionsDefName\n        partitionKey\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]))),Z=s.ZP.div.withConfig({displayName:"CreatePartitionDialog__PartitionBox",componentId:"rv8duh-0"})(["display:flex;flex-direction:row;gap:8;align-items:center;> *:first-child{flex-grow:1;}"])},29399:function(e,n,t){t.d(n,{x:function(){return F}});var r=t(59019),i=t(19065),o=t(922),a=t(81034),s=t(95764),l=t(325),c=t(46424),d=t(32030),u=t(50346),p=t(7838),f=t(75497),m=t(8412),h=t(762),g=t(54268),x=t(88863),y=t(8803),v=t(32289),j=["allTags","selectedTags","setSelectedTags","rowHeight","renderDropdown","searchPlaceholder"],b=function(e,n){return(0,v.jsx)(g.V,{children:(0,v.jsxs)(d.x,{flex:{direction:"row",gap:4,justifyContent:"space-between",alignItems:"center"},children:[(0,v.jsx)("span",{children:e}),(0,v.jsx)(d.x,{style:{cursor:"pointer"},onClick:n.remove,children:(0,v.jsx)(f.JO,{name:"close"})})]})},e)},w=function(e){var n=e.allTags,t=e.placeholder,o=e.selectedTags,a=e.setSelectedTags,p=e.renderTag,g=e.renderDropdownItem,x=e.renderDropdown,j=e.dropdownStyles,w=e.renderTagList,k=e.rowHeight,P=void 0===k?32:k,E=l.useState(!1),_=(0,i.Z)(E,2),I=_[0],A=_[1],Z=(0,y.S)(),O=Z.viewport,K=Z.containerProps,M=l.useMemo((function(){var e=(0,v.jsx)(d.x,{style:(0,s.Z)({maxHeight:"500px",overflowY:"auto"},j),children:(0,v.jsx)(c.aV,{style:{outline:"none",marginRight:-5,paddingRight:5},rowCount:n.length,rowHeight:P,rowRenderer:function(e){var t=n[e.index],i=o.includes(t),s=function(){a(i?o.filter((function(e){return e!==t})):[].concat((0,r.Z)(o),[t]))};return g?(0,v.jsx)("div",{children:g(t,{toggle:s,selected:i})},t):function(e,n){return(0,v.jsx)("label",{children:(0,v.jsx)(m.sN,{text:(0,v.jsxs)(d.x,{flex:{alignItems:"center",gap:8},children:[(0,v.jsx)(u.X,{checked:n.selected,onChange:n.toggle}),(0,v.jsx)("span",{children:e})]}),tagName:"div"})})}(t,{toggle:s,selected:i})},width:O.width,height:Math.min(n.length*P,7.5*P)})});return x?x(e,{width:O.width+"px",allTags:n}):(0,v.jsx)(m.v2,{style:{width:O.width+"px"},children:e})}),[n,j,x,g,P,o,a,O.width]),D=l.useRef(null),z=l.useMemo((function(){if(0===o.length)return(0,v.jsx)(N,{children:t||"Select tags"});var e=o.map((function(e){return(p||b)(e,{remove:function(n){a(o.filter((function(n){return n!==e}))),n.stopPropagation()}})}));return w?w(e):e}),[o,w,t,p,a]);return(0,v.jsx)(h.J,{placement:"bottom-start",isOpen:I,onInteraction:function(e,n){var t,r=null===n||void 0===n?void 0:n.target;I&&r instanceof HTMLElement&&((null===(t=D.current)||void 0===t?void 0:t.contains(r))||A(e))},content:(0,v.jsx)("div",{ref:D,children:M}),targetTagName:"div",children:(0,v.jsxs)(S,(0,s.Z)((0,s.Z)({onClick:function(){A((function(e){return!e}))}},K),{},{children:[(0,v.jsx)(C,{flex:{grow:1,gap:6},children:z}),(0,v.jsx)("div",{style:{cursor:"pointer"},children:(0,v.jsx)(f.JO,{name:I?"expand_less":"expand_more"})})]}))})},S=o.ZP.div.withConfig({displayName:"TagSelector__Container",componentId:"sc-2s01qj-0"})(["display:flex;flex-direction:row;align-items:center;",""],x.x7),N=o.ZP.div.withConfig({displayName:"TagSelector__Placeholder",componentId:"sc-2s01qj-1"})(["color:",";"],p.w.Gray400),C=(0,o.ZP)(d.x).withConfig({displayName:"TagSelector__TagsContainer",componentId:"sc-2s01qj-2"})(["overflow-x:auto;&::-webkit-scrollbar{display:none;}scrollbar-width:none;-ms-overflow-style:none;"]),k=function(e){var n=l.useState(""),t=(0,i.Z)(n,2),r=t[0],o=t[1],c=e.allTags,u=e.selectedTags,p=e.setSelectedTags,f=(e.rowHeight,e.renderDropdown),h=e.searchPlaceholder,g=(0,a.Z)(e,j),y=l.useMemo((function(){return""===r.trim()?c:c.filter((function(e){return e.toLowerCase().includes(r.toLowerCase())}))}),[c,r]);return(0,v.jsx)(w,(0,s.Z)((0,s.Z)({},g),{},{allTags:y,selectedTags:u,setSelectedTags:p,dropdownStyles:{width:"auto"},renderDropdown:l.useCallback((function(e,n){return(0,v.jsx)(m.v2,{style:{width:"auto"},children:(0,v.jsxs)(d.x,{flex:{direction:"column"},children:[(0,v.jsx)(d.x,{flex:{direction:"column",grow:1},padding:{horizontal:8},children:(0,v.jsx)(x.oi,{value:r,onChange:function(e){return o(e.target.value)},placeholder:h||"Search",ref:function(e){e&&e.focus()}})}),f?f(e,n):e]})})}),[f,r,h])}))},P=t(75453),E=t(6291),_=t(47619),I=t(69305),A=t(59549),Z=t(1520),O=t(20346),K=t(14156),M=t(74386),D=t(26961),z=function(e){var n=e.value,t=e.onChange,r=e.partitionKeys,o=e.isTimeseries,a=l.useState(""),s=(0,i.Z)(a,2),c=s[0],d=s[1],u=l.useMemo((function(){return JSON.stringify(r)}),[r]);l.useEffect((function(){var e=JSON.parse(u);d(o?(0,D.Z8)(n,e):n.join(", "))}),[n,u,o]);var p=l.useMemo((function(){return 0===r.length?"Loading partition keys...":function(e,n){if(0===e.length)return"";if(e.length<4||!n)return"ex: ".concat(e[0],", ").concat(e[1]);return"ex: ".concat(e[0],", ").concat(e[1],", [").concat(e[2],"...").concat(e[e.length-1],"]")}(r,o)}),[r,o]),m=function(e){try{t((0,D.w$)(r,c).selectedKeys)}catch(n){e.preventDefault(),(0,K._)({body:n.message})}};return(0,v.jsx)(x.oi,{"data-testid":(0,Z.N)("dimension-range-input"),placeholder:p,value:c,style:{display:"flex",width:"100%",flex:1,flexGrow:1},onChange:function(e){return d(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&m(e)},onBlur:m,rightElement:(0,v.jsx)(M.C,{style:{display:c.length?"initial":"none"},onClick:function(){return t([])},children:(0,v.jsx)(f.JO,{name:"cancel"})})})};var T=t(54920),F=function(e){var n=e.selected,t=e.setSelected,o=e.partitionKeys,a=e.health,s=e.dimensionType,c=e.partitionDefinitionName,u=e.repoAddress,p=e.refetch,f=s===I.iVC.TIME_WINDOW,m=s===I.iVC.DYNAMIC,h=l.useState(!1),g=(0,i.Z)(h,2),x=g[0],y=g[1];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:8},padding:{vertical:4},children:[(0,v.jsx)(d.x,{flex:{direction:"column"},style:{flex:1},children:f?(0,v.jsx)(z,{value:n,partitionKeys:o,onChange:t,isTimeseries:f}):(0,v.jsx)(L,{allPartitions:o,selectedPartitions:n,setSelectedPartitions:t,health:a,setShowCreatePartition:y,isDynamic:m})}),f&&(0,v.jsx)(P.zx,{small:!0,onClick:function(){return t(o.slice(-1))},"data-testid":(0,Z.N)("latest-partition-button"),children:"Latest"}),(0,v.jsx)(P.zx,{small:!0,onClick:function(){return t(o)},children:"All"})]}),(0,v.jsxs)(d.x,{margin:{bottom:8},children:[m&&(0,v.jsxs)(G,{flex:{direction:"row",alignItems:"center",gap:8},onClick:function(){y(!0)},children:[(0,v.jsx)(R,{name:"add",size:24}),(0,v.jsx)("div",{children:"Add a partition"})]}),f&&(0,v.jsx)(T.b,{partitionNames:o,health:a,splitPartitions:!f,selected:n,onSelect:t})]}),u&&(0,v.jsx)(O.D,{isOpen:x,partitionDefinitionName:c,repoAddress:u,close:function(){y(!1)},refetch:p,onCreated:function(e){t([].concat((0,r.Z)(n),[e]))}},x?"1":"0")]})},L=function(e){var n=e.allPartitions,t=e.selectedPartitions,r=e.setSelectedPartitions,i=e.setShowCreatePartition,o=e.isDynamic,a=e.health,s=l.useCallback((function(e){var t=n.indexOf(e);return"ranges"in a?(0,v.jsx)(E.d,{status:(0,_.h1)(a.ranges,t)}):(0,v.jsx)(A.O_,{size:10,status:a.runStatusForPartitionKey(e,t)})}),[n,a]);return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(k,{allTags:n,selectedTags:t,setSelectedTags:r,placeholder:"Select a partition or create one",renderDropdownItem:l.useCallback((function(e,n){return(0,v.jsx)("label",{children:(0,v.jsx)(m.sN,{tagName:"div",text:(0,v.jsxs)(d.x,{flex:{alignItems:"center",gap:12},children:[(0,v.jsx)(u.X,{checked:n.selected,onChange:n.toggle}),s(e),(0,v.jsx)("span",{children:e})]})})})}),[s]),renderDropdown:l.useCallback((function(e,n){var a=n.width,s=n.allTags,l=s.every((function(e){return t.includes(e)}));return(0,v.jsx)(m.v2,{style:{width:a},children:(0,v.jsxs)(d.x,{padding:4,children:[o&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.x,{flex:{direction:"column"},children:(0,v.jsx)(m.sN,{tagName:"div",text:(0,v.jsxs)(d.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,v.jsx)(R,{name:"add",size:24}),(0,v.jsx)("span",{children:"Add partition"})]}),onClick:function(){i(!0)}})}),(0,v.jsx)(m.R,{})]}),s.length?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{children:(0,v.jsx)(m.sN,{tagName:"div",text:(0,v.jsxs)(d.x,{flex:{alignItems:"center",gap:12},children:[(0,v.jsx)(u.X,{checked:l,onChange:function(){r(l?[]:s)}}),(0,v.jsxs)("span",{children:["Select all (",s.length,")"]})]})})}),e]}):(0,v.jsx)("div",{style:{padding:"6px 6px 0px 6px",color:p.w.Gray700},children:"No matching partitions found"})]})})}),[o,t,r,i]),renderTagList:function(e){return e.length>4?(0,v.jsxs)("span",{children:[e.length," partitions selected"]}):e},searchPlaceholder:"Filter partitions"})})},R=(0,o.ZP)(f.JO).withConfig({displayName:"DimensionRangeWizard__StyledIcon",componentId:"sc-1azk227-0"})(["font-weight:500;"]),G=(0,o.ZP)(d.x).withConfig({displayName:"DimensionRangeWizard__LinkText",componentId:"sc-1azk227-1"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}> *{height:24px;align-content:center;line-height:24px;}"],p.w.Link)},57872:function(e,n,t){t.d(n,{Q:function(){return a}});var r=t(89646),i=(t(325),t(33902)),o=t(32289),a=function(e){var n=e.isGraph,t=e.repoAddress,a=e.result;return"PipelineSnapshotNotFoundError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:n?"Graph snapshot not found":"Pipeline snapshot not found",description:a.message}):"PipelineNotFoundError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:n?"Graph not found":"Pipeline not found",description:a.message}):"RepositoryNotFoundError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:"".concat(t?(0,i.Uz)(t):"Definitions"," not found"),description:a.message}):"PythonError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:"Query error",description:a.message}):(0,o.jsx)("span",{})}},23196:function(e,n,t){t.d(n,{b:function(){return o}});var r=t(325),i=t(82348),o=function(e,n){var t=e.pipelineName,o=r.useMemo((function(){return n?"Job: ".concat(t):"Pipeline: ".concat(t)}),[n,t]);(0,i.j)(o)}},74386:function(e,n,t){t.d(n,{C:function(){return a}});var r=t(922),i=t(75497),o=t(7838),a=r.ZP.button.withConfig({displayName:"ClearButton",componentId:"sc-1rz1pk2-0"})(["background:transparent;border:none;cursor:pointer;margin:0 -2px 0 0;padding:2px;","{background-color:",";transition:background-color 100ms linear;}:hover ",",:focus ","{background-color:",";}:active ","{background-color:",";}:focus{outline:none;}"],i.a1,o.w.Gray400,i.a1,i.a1,o.w.Gray700,i.a1,o.w.Dark)},14848:function(e,n,t){t.d(n,{G:function(){return o}});var r=t(922),i=t(8546),o=r.ZP.div.withConfig({displayName:"Version",componentId:"sc-1arl6ei-0"})(["font-family:",";font-size:16px;overflow:hidden;text-overflow:ellipsis;"],i.b.monospace)}}]);
//# sourceMappingURL=318.0dc4432b.chunk.js.map