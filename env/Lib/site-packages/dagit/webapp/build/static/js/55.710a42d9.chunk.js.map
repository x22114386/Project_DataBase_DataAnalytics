{"version":3,"file":"static/js/55.710a42d9.chunk.js","mappings":"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","sources":["../../core/src/RawLogContent.tsx","../../core/src/CapturedLogPanel.tsx","../../core/src/instance/useSupportsCapturedLogs.tsx","../../core/src/runs/useComputeLogs.tsx","../../core/src/runs/ComputeLogPanel.tsx","../../core/src/runs/LogsProvider.tsx","../../core/src/runs/ExecutionStateDot.tsx","../../core/src/runs/LogFilterSelect.tsx","../../core/src/runs/LogsFilterInput.tsx","../../ui/src/components/useSuggestionsForString.tsx","../../core/src/runs/useQueryPersistedLogFilter.ts","../../core/src/runs/LogsToolbar.tsx","../../core/src/runs/Run.tsx","../../core/src/hooks/useFavicon.tsx","../../core/src/runs/RunRoot.tsx","../../core/src/ui/ClearButton.tsx","../../core/src/ui/formatters.tsx","../../../node_modules/amator/index.js","../../../node_modules/anser/lib/index.js","../../../node_modules/ansi-to-react/lib/index.js","../../../node_modules/bezier-easing/src/index.js","../../../node_modules/escape-carriage/index.js","../../../node_modules/lodash/_arrayIncludes.js","../../../node_modules/lodash/_arrayIncludesWith.js","../../../node_modules/lodash/_baseFindIndex.js","../../../node_modules/lodash/_baseIndexOf.js","../../../node_modules/lodash/_baseIsNaN.js","../../../node_modules/lodash/_baseUniq.js","../../../node_modules/lodash/_createSet.js","../../../node_modules/lodash/_strictIndexOf.js","../../../node_modules/lodash/isEqual.js","../../../node_modules/lodash/noop.js","../../../node_modules/lodash/throttle.js","../../../node_modules/lodash/uniq.js"],"sourcesContent":["import {Colors, Group, Icon, Spinner, FontFamily} from '@dagster-io/ui';\nimport Ansi from 'ansi-to-react';\nimport * as React from 'react';\nimport styled, {createGlobalStyle} from 'styled-components/macro';\n\nconst MAX_STREAMING_LOG_BYTES = 5242880; // 5 MB\nconst TRUNCATE_PREFIX = '\\u001b[33m...logs truncated...\\u001b[39m\\n';\nconst SCROLLER_LINK_TIMEOUT_MS = 3000;\n\nexport const RawLogContent: React.FC<{\n  logData: string | null;\n  isLoading: boolean;\n  isVisible: boolean;\n  downloadUrl?: string | null;\n  location?: string;\n}> = React.memo(({logData, location, isLoading, isVisible, downloadUrl}) => {\n  const contentContainer = React.useRef<ScrollContainer | null>(null);\n  const timer = React.useRef<number>();\n  const [showScrollToTop, setShowScrollToTop] = React.useState(false);\n  const scrollToTop = () => {\n    contentContainer.current && contentContainer.current.scrollToTop();\n  };\n  const cancelHideWarning = () => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n      timer.current = 0;\n    }\n  };\n  const hideWarning = () => {\n    setShowScrollToTop(false);\n    cancelHideWarning();\n  };\n  const scheduleHideWarning = () => {\n    timer.current = window.setTimeout(hideWarning, SCROLLER_LINK_TIMEOUT_MS);\n  };\n  const onScrollUp = (position: number) => {\n    cancelHideWarning();\n\n    if (!position) {\n      hideWarning();\n    } else {\n      setShowScrollToTop(true);\n      scheduleHideWarning();\n    }\n  };\n  let content = logData;\n  const isTruncated = shouldTruncate(content);\n\n  if (content && isTruncated) {\n    const nextLine = content.indexOf('\\n') + 1;\n    const truncated = nextLine < content.length ? content.slice(nextLine) : content;\n    content = TRUNCATE_PREFIX + truncated;\n  }\n  const warning = isTruncated ? (\n    <FileWarning>\n      <Group direction=\"row\" spacing={8} alignItems=\"center\">\n        <Icon name=\"warning\" color={Colors.Yellow500} />\n        <div>\n          This log has exceeded the 5MB limit.{' '}\n          {downloadUrl ? (\n            <a href={downloadUrl} download>\n              Download the full log file\n            </a>\n          ) : null}\n          .\n        </div>\n      </Group>\n    </FileWarning>\n  ) : null;\n\n  return (\n    <>\n      <FileContainer isVisible={isVisible}>\n        {showScrollToTop ? (\n          <ScrollToast>\n            <ScrollToTop\n              onClick={scrollToTop}\n              onMouseOver={cancelHideWarning}\n              onMouseOut={scheduleHideWarning}\n            >\n              <Group direction=\"row\" spacing={8} alignItems=\"center\">\n                <Icon name=\"arrow_upward\" color={Colors.White} />\n                Scroll to top\n              </Group>\n            </ScrollToTop>\n          </ScrollToast>\n        ) : null}\n        <FileContent>\n          {warning}\n          <RelativeContainer>\n            <LogContent\n              isSelected={true}\n              content={logData}\n              onScrollUp={onScrollUp}\n              onScrollDown={hideWarning}\n              ref={contentContainer}\n            />\n          </RelativeContainer>\n        </FileContent>\n        {isLoading ? (\n          <LoadingContainer>\n            <Spinner purpose=\"page\" />\n          </LoadingContainer>\n        ) : null}\n      </FileContainer>\n      {location ? <FileFooter isVisible={isVisible}>{location}</FileFooter> : null}\n    </>\n  );\n});\n\nconst shouldTruncate = (content: string | null | undefined) => {\n  if (!content) {\n    return false;\n  }\n  const encoder = new TextEncoder();\n  return encoder.encode(content).length >= MAX_STREAMING_LOG_BYTES;\n};\n\ninterface IScrollContainerProps {\n  content: string | null | undefined;\n  isSelected?: boolean;\n  className?: string;\n  onScrollUp?: (position: number) => void;\n  onScrollDown?: (position: number) => void;\n}\n\nclass ScrollContainer extends React.Component<IScrollContainerProps> {\n  private container = React.createRef<HTMLDivElement>();\n  private lastScroll = 0;\n\n  componentDidMount() {\n    this.scrollToBottom();\n    if (this.container.current) {\n      this.container.current.focus();\n      this.container.current.addEventListener('scroll', this.onScroll);\n    }\n  }\n\n  getSnapshotBeforeUpdate() {\n    if (!this.container.current) {\n      return false;\n    }\n    const {scrollHeight, scrollTop, offsetHeight} = this.container.current;\n    const shouldScroll = offsetHeight + scrollTop >= scrollHeight;\n    return shouldScroll;\n  }\n\n  componentDidUpdate(_props: any, _state: any, shouldScroll: boolean) {\n    if (shouldScroll) {\n      this.scrollToBottom();\n    }\n    if (this.props.isSelected && !_props.isSelected) {\n      this.container.current && this.container.current.focus();\n    }\n  }\n\n  onScroll = () => {\n    if (!this.container.current || !this.props.isSelected) {\n      return;\n    }\n    const {onScrollUp, onScrollDown} = this.props;\n\n    const {scrollHeight, scrollTop, offsetHeight} = this.container.current;\n    const position = scrollTop / (scrollHeight - offsetHeight);\n    if (this.container.current.scrollTop < this.lastScroll) {\n      onScrollUp && onScrollUp(position);\n    } else {\n      onScrollDown && onScrollDown(position);\n    }\n    this.lastScroll = this.container.current.scrollTop;\n  };\n\n  focus() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.focus();\n  }\n\n  scrollToBottom() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.scrollTop = node.scrollHeight - node.offsetHeight;\n  }\n\n  scrollToTop() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.scrollTop = 0;\n    node.focus();\n  }\n\n  render() {\n    const {content, className} = this.props;\n    if (!content) {\n      return (\n        <div className={className} ref={this.container}>\n          <ContentContainer style={{justifyContent: 'center', alignItems: 'center'}}>\n            {content == null ? 'No log file available' : 'No output'}\n          </ContentContainer>\n        </div>\n      );\n    }\n\n    return (\n      <div className={className} style={{outline: 'none'}} ref={this.container} tabIndex={0}>\n        <ContentContainer>\n          <LineNumbers content={content} />\n          <Content>\n            <SolarizedColors />\n            <Ansi linkify={false} useClasses>\n              {content}\n            </Ansi>\n          </Content>\n        </ContentContainer>\n      </div>\n    );\n  }\n}\n\nconst LineNumbers = (props: IScrollContainerProps) => {\n  const {content} = props;\n  if (!content) {\n    return null;\n  }\n  const matches = content.match(/\\n/g);\n  const count = matches ? matches.length : 0;\n  return (\n    <LineNumberContainer>\n      {Array.from(Array(count), (_, i) => (\n        <div key={i}>{String(i + 1)}</div>\n      ))}\n    </LineNumberContainer>\n  );\n};\n\nconst Content = styled.div`\n  padding: 10px;\n  background-color: ${Colors.Gray900};\n`;\nconst LineNumberContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  border-right: 1px solid #5c7080;\n  padding: 10px 10px 10px 20px;\n  margin-right: 5px;\n  background-color: ${Colors.Gray900};\n  opacity: 0.8;\n  color: #858585;\n  min-height: 100%;\n`;\nconst SolarizedColors = createGlobalStyle`\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n`;\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  min-height: 100%;\n  background-color: ${Colors.Gray900};\n`;\nconst FileContainer = styled.div`\n  flex: 1;\n  height: 100%;\n  position: relative;\n  &:first-child {\n    border-right: 0.5px solid #5c7080;\n  }\n  display: flex;\n  flex-direction: column;\n  ${({isVisible}: {isVisible: boolean}) => (isVisible ? null : 'display: none;')}\n`;\nconst FileFooter = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 30px;\n  background-color: ${Colors.Gray900};\n  border-top: 0.5px solid #5c7080;\n  color: #aaaaaa;\n  padding: 2px 5px;\n  font-size: 0.85em;\n  ${({isVisible}: {isVisible: boolean}) => (isVisible ? null : 'display: none;')}\n`;\n\nconst FileContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`;\nconst RelativeContainer = styled.div`\n  flex: 1;\n  position: relative;\n`;\nconst LogContent = styled(ScrollContainer)`\n  color: #eeeeee;\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  white-space: pre;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\nconst LoadingContainer = styled.div`\n  display: flex;\n  justifycontent: center;\n  alignitems: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  backgroundcolor: ${Colors.Gray800};\n  opacity: 0.3;\n`;\n\nconst ScrollToast = styled.div`\n  position: absolute;\n  height: 30px;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  z-index: 1;\n`;\nconst ScrollToTop = styled.div`\n  background-color: black;\n  padding: 10px 20px;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  color: white;\n  border-bottom: 0.5px solid #5c7080;\n  border-left: 0.5px solid #5c7080;\n  border-right: 0.5px solid #5c7080;\n  cursor: pointer;\n`;\n\nconst FileWarning = styled.div`\n  background-color: #fffae3;\n  padding: 10px 20px;\n  margin: 20px 70px;\n  border-radius: 5px;\n`;\n","import {gql, useQuery, useSubscription} from '@apollo/client';\nimport {Box, Colors, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {RawLogContent} from './RawLogContent';\nimport {AppContext} from './app/AppContext';\nimport {WebSocketContext} from './app/WebSocketProvider';\nimport {\n  CapturedLogFragment,\n  CapturedLogsMetadataQuery,\n  CapturedLogsMetadataQueryVariables,\n  CapturedLogsQuery,\n  CapturedLogsQueryVariables,\n  CapturedLogsSubscription,\n  CapturedLogsSubscriptionVariables,\n} from './types/CapturedLogPanel.types';\n\ninterface CapturedLogProps {\n  logKey: string[];\n  visibleIOType: string;\n  onSetDownloadUrl?: (url: string) => void;\n}\n\ninterface CapturedOrExternalLogPanelProps extends CapturedLogProps {\n  externalUrl?: string;\n}\n\nexport const CapturedOrExternalLogPanel: React.FC<CapturedOrExternalLogPanelProps> = React.memo(\n  ({externalUrl, ...props}) => {\n    if (externalUrl) {\n      return (\n        <Box\n          flex={{direction: 'row', alignItems: 'center', justifyContent: 'center', gap: 1}}\n          background={Colors.Gray900}\n          style={{color: Colors.White, flex: 1, minHeight: 0}}\n        >\n          View logs at\n          <a\n            href={externalUrl}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            style={{\n              color: Colors.White,\n              textDecoration: 'underline',\n              marginLeft: 4,\n              marginRight: 4,\n            }}\n          >\n            {externalUrl}\n          </a>\n          <Icon name=\"open_in_new\" color={Colors.White} size={20} style={{marginTop: 2}} />\n        </Box>\n      );\n    }\n    return props.logKey.length ? <CapturedLogPanel {...props} /> : null;\n  },\n);\n\nconst MAX_STREAMING_LOG_BYTES = 5242880; // 5 MB\n\nconst slice = (s: string) =>\n  s.length < MAX_STREAMING_LOG_BYTES ? s : s.slice(-MAX_STREAMING_LOG_BYTES);\n\nconst merge = (a?: string | null, b?: string | null): string | null => {\n  if (!b) {\n    return a || null;\n  }\n  if (!a) {\n    return slice(b);\n  }\n  return slice(a + b);\n};\n\ninterface State {\n  stdout: string | null;\n  stderr: string | null;\n  cursor?: string | null;\n  isLoading: boolean;\n  stdoutDownloadUrl?: string;\n  stdoutLocation?: string;\n  stderrDownloadUrl?: string;\n  stderrLocation?: string;\n}\n\ntype Action =\n  | {type: 'update'; logData: CapturedLogFragment}\n  | {type: 'metadata'; metadata: any}\n  | {type: 'reset'};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'update':\n      return {\n        ...state,\n        isLoading: false,\n        cursor: action.logData?.cursor,\n        stdout: merge(state.stdout, action.logData?.stdout),\n        stderr: merge(state.stderr, action.logData?.stderr),\n      };\n    case 'metadata':\n      return {\n        ...state,\n        ...action.metadata,\n      };\n    case 'reset':\n      return {\n        ...initialState,\n      };\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  stdout: null,\n  stderr: null,\n  cursor: null,\n  isLoading: true,\n};\n\nconst CapturedLogSubscription: React.FC<{\n  logKey: string[];\n  onLogData: (logData: CapturedLogFragment) => void;\n}> = React.memo(({logKey, onLogData}) => {\n  useSubscription<CapturedLogsSubscription, CapturedLogsSubscriptionVariables>(\n    CAPTURED_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {logKey},\n      onSubscriptionData: ({subscriptionData}) => {\n        if (subscriptionData.data?.capturedLogs) {\n          onLogData(subscriptionData.data.capturedLogs);\n        }\n      },\n    },\n  );\n  return null;\n});\n\nconst CAPTURED_LOGS_SUBSCRIPTION = gql`\n  subscription CapturedLogsSubscription($logKey: [String!]!, $cursor: String) {\n    capturedLogs(logKey: $logKey, cursor: $cursor) {\n      ...CapturedLog\n    }\n  }\n\n  fragment CapturedLog on CapturedLogs {\n    stdout\n    stderr\n    cursor\n  }\n`;\n\nconst CAPTURED_LOGS_METADATA_QUERY = gql`\n  query CapturedLogsMetadataQuery($logKey: [String!]!) {\n    capturedLogsMetadata(logKey: $logKey) {\n      stdoutDownloadUrl\n      stdoutLocation\n      stderrDownloadUrl\n      stderrLocation\n    }\n  }\n`;\n\nconst QUERY_LOG_LIMIT = 100000;\nconst POLL_INTERVAL = 5000;\n\nconst CapturedLogsSubscriptionProvider = ({\n  logKey,\n  children,\n}: {\n  logKey: string[];\n  children: (result: State) => React.ReactChild;\n}) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const logKeyString = JSON.stringify(logKey);\n  React.useEffect(() => {\n    dispatch({type: 'reset'});\n  }, [logKeyString]);\n\n  const onLogData = React.useCallback((logData: CapturedLogFragment) => {\n    dispatch({type: 'update', logData});\n  }, []);\n  return (\n    <>\n      <CapturedLogSubscription logKey={logKey} onLogData={onLogData} />\n      {children(state)}\n    </>\n  );\n};\n\nconst CapturedLogsQueryProvider = ({\n  logKey,\n  children,\n}: {\n  logKey: string[];\n  children: (result: State) => React.ReactChild;\n}) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const logKeyString = JSON.stringify(logKey);\n  React.useEffect(() => {\n    dispatch({type: 'reset'});\n  }, [logKeyString]);\n  const {cursor} = state;\n\n  const {stopPolling, startPolling} = useQuery<CapturedLogsQuery, CapturedLogsQueryVariables>(\n    CAPTURED_LOGS_QUERY,\n    {\n      notifyOnNetworkStatusChange: true,\n      variables: {logKey, cursor, limit: QUERY_LOG_LIMIT},\n      pollInterval: POLL_INTERVAL,\n      onCompleted: (data: CapturedLogsQuery) => {\n        // We have to stop polling in order to update the `after` value.\n        stopPolling();\n        dispatch({type: 'update', logData: data.capturedLogs});\n        startPolling(POLL_INTERVAL);\n      },\n    },\n  );\n\n  return <>{children(state)}</>;\n};\n\nconst CAPTURED_LOGS_QUERY = gql`\n  query CapturedLogsQuery($logKey: [String!]!, $cursor: String, $limit: Int) {\n    capturedLogs(logKey: $logKey, cursor: $cursor, limit: $limit) {\n      stdout\n      stderr\n      cursor\n    }\n  }\n`;\n\nconst CapturedLogPanel: React.FC<CapturedLogProps> = React.memo(\n  ({logKey, visibleIOType, onSetDownloadUrl}) => {\n    const {rootServerURI} = React.useContext(AppContext);\n    const {availability, disabled} = React.useContext(WebSocketContext);\n    const queryResult = useQuery<CapturedLogsMetadataQuery, CapturedLogsMetadataQueryVariables>(\n      CAPTURED_LOGS_METADATA_QUERY,\n      {\n        variables: {logKey},\n      },\n    );\n\n    React.useEffect(() => {\n      if (!onSetDownloadUrl || !queryResult.data) {\n        return;\n      }\n      const visibleDownloadUrl =\n        visibleIOType === 'stdout'\n          ? queryResult.data.capturedLogsMetadata.stdoutDownloadUrl\n          : queryResult.data.capturedLogsMetadata.stderrDownloadUrl;\n\n      if (!visibleDownloadUrl) {\n        return;\n      }\n      if (visibleDownloadUrl.startsWith('/')) {\n        onSetDownloadUrl(rootServerURI + visibleDownloadUrl);\n      } else {\n        onSetDownloadUrl(visibleDownloadUrl);\n      }\n    }, [onSetDownloadUrl, visibleIOType, rootServerURI, queryResult.data]);\n\n    const stdoutLocation = queryResult.data?.capturedLogsMetadata.stdoutLocation || undefined;\n    const stderrLocation = queryResult.data?.capturedLogsMetadata.stderrLocation || undefined;\n    const websocketsUnavailabile = availability === 'unavailable' || disabled;\n    const Component = websocketsUnavailabile\n      ? CapturedLogsQueryProvider\n      : CapturedLogsSubscriptionProvider;\n    return (\n      <div style={{flex: 1, minHeight: 0, display: 'flex', flexDirection: 'column'}}>\n        <Component logKey={logKey}>\n          {(_state: State) => (\n            <>\n              <RawLogContent\n                logData={_state.stdout}\n                isLoading={_state.isLoading}\n                location={stdoutLocation}\n                isVisible={visibleIOType === 'stdout'}\n              />\n              <RawLogContent\n                logData={_state.stderr}\n                isLoading={_state.isLoading}\n                location={stderrLocation}\n                isVisible={visibleIOType === 'stderr'}\n              />\n            </>\n          )}\n        </Component>\n      </div>\n    );\n  },\n);\n","import {gql, useQuery} from '@apollo/client';\n\nimport {\n  InstanceSupportsCapturedLogsQuery,\n  InstanceSupportsCapturedLogsQueryVariables,\n} from './types/useSupportsCapturedLogs.types';\n\nexport const useSupportsCapturedLogs = () => {\n  const {data} = useQuery<\n    InstanceSupportsCapturedLogsQuery,\n    InstanceSupportsCapturedLogsQueryVariables\n  >(INSTANCE_SUPPORTS_CAPTURED_LOGS);\n  return !!data?.instance.hasCapturedLogManager;\n};\n\nconst INSTANCE_SUPPORTS_CAPTURED_LOGS = gql`\n  query InstanceSupportsCapturedLogs {\n    instance {\n      hasCapturedLogManager\n    }\n  }\n`;\n","import {gql, useSubscription} from '@apollo/client';\nimport * as React from 'react';\n\nimport {ComputeIoType} from '../graphql/types';\n\nimport {\n  ComputeLogForSubscriptionFragment,\n  ComputeLogsSubscription,\n  ComputeLogsSubscriptionVariables,\n} from './types/useComputeLogs.types';\n\nconst MAX_STREAMING_LOG_BYTES = 5242880; // 5 MB\n\nconst slice = (s: string) =>\n  s.length < MAX_STREAMING_LOG_BYTES ? s : s.slice(-MAX_STREAMING_LOG_BYTES);\n\nconst merge = (\n  a: ComputeLogForSubscriptionFragment | null,\n  b: ComputeLogForSubscriptionFragment | null,\n): ComputeLogForSubscriptionFragment | null => {\n  if (!b) {\n    return a;\n  }\n  let data = a?.data;\n  if (a?.data && b?.data) {\n    data = slice(a.data + b.data);\n  } else if (b?.data) {\n    data = slice(b.data);\n  }\n  return {\n    __typename: b.__typename,\n    path: b.path,\n    downloadUrl: b.downloadUrl,\n    data: typeof data === 'string' ? data : null,\n    cursor: b.cursor,\n  };\n};\n\ninterface State {\n  stepKey: string;\n  stdout: ComputeLogForSubscriptionFragment | null;\n  stderr: ComputeLogForSubscriptionFragment | null;\n  isLoading: boolean;\n}\n\ntype Action =\n  | {type: 'stdout'; stepKey: string; log: ComputeLogForSubscriptionFragment | null}\n  | {type: 'stderr'; stepKey: string; log: ComputeLogForSubscriptionFragment | null};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'stdout':\n      const stdout =\n        action.stepKey === state.stepKey ? merge(state.stdout, action.log) : action.log;\n      return {...state, isLoading: false, stdout};\n    case 'stderr':\n      const stderr =\n        action.stepKey === state.stepKey ? merge(state.stderr, action.log) : action.log;\n      return {...state, isLoading: false, stderr};\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  stepKey: '',\n  stdout: null,\n  stderr: null,\n  isLoading: true,\n};\n\nexport const useComputeLogs = (runId: string, stepKey: string) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  useSubscription<ComputeLogsSubscription, ComputeLogsSubscriptionVariables>(\n    COMPUTE_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId, stepKey, ioType: ComputeIoType.STDOUT, cursor: null},\n      onSubscriptionData: ({subscriptionData}) => {\n        dispatch({type: 'stdout', stepKey, log: subscriptionData.data?.computeLogs || null});\n      },\n    },\n  );\n\n  useSubscription<ComputeLogsSubscription, ComputeLogsSubscriptionVariables>(\n    COMPUTE_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId, stepKey, ioType: ComputeIoType.STDERR, cursor: null},\n      onSubscriptionData: ({subscriptionData}) => {\n        dispatch({type: 'stderr', stepKey, log: subscriptionData.data?.computeLogs || null});\n      },\n    },\n  );\n\n  return state;\n};\n\nconst COMPUTE_LOGS_SUBSCRIPTION = gql`\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(runId: $runId, stepKey: $stepKey, ioType: $ioType, cursor: $cursor) {\n      ...ComputeLogForSubscription\n    }\n  }\n\n  fragment ComputeLogForSubscription on ComputeLogFile {\n    path\n    cursor\n    data\n    downloadUrl\n  }\n`;\n","import {Box, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {RawLogContent} from '../RawLogContent';\nimport {AppContext} from '../app/AppContext';\n\nimport {useComputeLogs} from './useComputeLogs';\n\ninterface ComputeLogPanelProps {\n  runId: string;\n  ioType: string;\n  setComputeLogUrl: (url: string | null) => void;\n}\n\ninterface ComputeLogPanelMaybeKeyProps extends ComputeLogPanelProps {\n  computeLogFileKey?: string;\n  stepKeys: string[];\n}\n\nexport const ComputeLogPanel: React.FC<ComputeLogPanelMaybeKeyProps> = (props) => {\n  const {runId, stepKeys, computeLogFileKey, ioType, setComputeLogUrl} = props;\n\n  if (!stepKeys.length || !computeLogFileKey) {\n    return (\n      <Box\n        flex={{justifyContent: 'center', alignItems: 'center'}}\n        style={{flex: 1, height: '100%'}}\n      >\n        <Spinner purpose=\"section\" />\n      </Box>\n    );\n  }\n\n  return (\n    <ComputeLogsPanelWithKey\n      runId={runId}\n      computeLogFileKey={computeLogFileKey}\n      ioType={ioType}\n      setComputeLogUrl={setComputeLogUrl}\n    />\n  );\n};\n\ninterface ComputeLogPanelWithKeyProps extends ComputeLogPanelProps {\n  computeLogFileKey: string;\n}\n\nconst resolveDownloadUrl = (rootServerURI: string, downloadUrl: string | null) => {\n  if (!downloadUrl) {\n    return null;\n  }\n  const isRelativeUrl = (x?: string) => x && x.startsWith('/');\n  return isRelativeUrl(downloadUrl) ? rootServerURI + downloadUrl : downloadUrl;\n};\n\nconst ComputeLogsPanelWithKey: React.FC<ComputeLogPanelWithKeyProps> = React.memo((props) => {\n  const {runId, computeLogFileKey, ioType, setComputeLogUrl} = props;\n  const {rootServerURI} = React.useContext(AppContext);\n\n  const {isLoading, stdout, stderr} = useComputeLogs(runId, computeLogFileKey);\n  const stdoutDownloadUrl = resolveDownloadUrl(rootServerURI, stdout?.downloadUrl || null);\n  const stderrDownloadUrl = resolveDownloadUrl(rootServerURI, stderr?.downloadUrl || null);\n\n  return (\n    <div style={{flex: 1, minHeight: 0, display: 'flex', flexDirection: 'column'}}>\n      <ContentWrapper\n        content={stdout ? stdout.data : null}\n        path={stdout ? stdout.path : undefined}\n        downloadUrl={stdoutDownloadUrl}\n        isLoading={isLoading}\n        isVisible={ioType === 'stdout'}\n        setComputeLogUrl={setComputeLogUrl}\n      />\n      <ContentWrapper\n        content={stderr ? stderr.data : null}\n        path={stderr ? stderr.path : undefined}\n        downloadUrl={stderrDownloadUrl}\n        isLoading={isLoading}\n        isVisible={ioType === 'stderr'}\n        setComputeLogUrl={setComputeLogUrl}\n      />\n    </div>\n  );\n});\n\nconst ContentWrapper = ({\n  isLoading,\n  isVisible,\n  content,\n  path,\n  downloadUrl,\n  setComputeLogUrl,\n}: {\n  isVisible: boolean;\n  isLoading: boolean;\n  content: string | null;\n  path?: string;\n  downloadUrl: string | null;\n  setComputeLogUrl: (url: string | null) => void;\n}) => {\n  React.useEffect(() => {\n    setComputeLogUrl(downloadUrl);\n  }, [setComputeLogUrl, downloadUrl]);\n  return (\n    <RawLogContent\n      logData={content}\n      isLoading={isLoading}\n      isVisible={isVisible}\n      downloadUrl={downloadUrl}\n      location={path}\n    />\n  );\n};\n","import {\n  gql,\n  OnSubscriptionDataOptions,\n  useApolloClient,\n  useQuery,\n  useSubscription,\n} from '@apollo/client';\nimport {TokenizingFieldValue} from '@dagster-io/ui';\nimport throttle from 'lodash/throttle';\nimport * as React from 'react';\n\nimport {WebSocketContext} from '../app/WebSocketProvider';\nimport {RunStatus} from '../graphql/types';\n\nimport {LogLevelCounts} from './LogsToolbar';\nimport {RUN_DAGSTER_RUN_EVENT_FRAGMENT} from './RunFragments';\nimport {logNodeLevel} from './logNodeLevel';\nimport {LogNode} from './types';\nimport {\n  RunLogsSubscriptionSuccessFragment,\n  PipelineRunLogsSubscriptionStatusFragment,\n  RunLogsQuery,\n  PipelineRunLogsSubscription,\n  RunLogsQueryVariables,\n  PipelineRunLogsSubscriptionVariables,\n} from './types/LogsProvider.types';\nimport {RunDagsterRunEventFragment} from './types/RunFragments.types';\n\nexport interface LogFilterValue extends TokenizingFieldValue {\n  token?: 'step' | 'type' | 'query';\n}\n\nexport interface LogFilter {\n  logQuery: LogFilterValue[];\n  levels: {[key: string]: boolean};\n  focusedTime: number;\n  sinceTime: number;\n  hideNonMatches: boolean;\n}\n\nexport interface LogsProviderLogs {\n  allNodes: LogNode[];\n  counts: LogLevelCounts;\n  loading: boolean;\n}\n\nconst pipelineStatusFromMessages = (messages: RunDagsterRunEventFragment[]) => {\n  const reversed = [...messages].reverse();\n  for (const message of reversed) {\n    const {__typename} = message;\n    switch (__typename) {\n      case 'RunStartEvent':\n        return RunStatus.STARTED;\n      case 'RunEnqueuedEvent':\n        return RunStatus.QUEUED;\n      case 'RunStartingEvent':\n        return RunStatus.STARTING;\n      case 'RunCancelingEvent':\n        return RunStatus.CANCELING;\n      case 'RunCanceledEvent':\n        return RunStatus.CANCELED;\n      case 'RunSuccessEvent':\n        return RunStatus.SUCCESS;\n      case 'RunFailureEvent':\n        return RunStatus.FAILURE;\n    }\n  }\n  return null;\n};\n\nconst BATCH_INTERVAL = 100;\nconst QUERY_LOG_LIMIT = 10000;\n\ntype State = {\n  nodes: LogNode[];\n  cursor: string | null;\n  counts: LogLevelCounts;\n  loading: boolean;\n};\n\ntype Action =\n  | {type: 'append'; queued: RunDagsterRunEventFragment[]; hasMore: boolean; cursor: string}\n  | {type: 'set-cursor'; cursor: string}\n  | {type: 'reset'};\n\nconst emptyCounts = {\n  DEBUG: 0,\n  INFO: 0,\n  WARNING: 0,\n  ERROR: 0,\n  CRITICAL: 0,\n  EVENT: 0,\n};\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'append': {\n      const queuedNodes = action.queued.map((node, ii) => ({\n        ...node,\n        clientsideKey: `csk${node.timestamp}-${ii}`,\n      }));\n      const nodes = [...state.nodes, ...queuedNodes];\n      const counts = {...state.counts};\n      queuedNodes.forEach((node) => {\n        const level = logNodeLevel(node);\n        counts[level]++;\n      });\n      return {nodes, counts, loading: action.hasMore, cursor: action.cursor};\n    }\n    case 'set-cursor':\n      return {...state, cursor: action.cursor};\n    case 'reset':\n      return {nodes: [], counts: emptyCounts, cursor: null, loading: true};\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  nodes: [],\n  counts: emptyCounts,\n  cursor: null,\n  loading: true,\n};\n\nconst useLogsProviderWithSubscription = (runId: string) => {\n  const client = useApolloClient();\n  const queue = React.useRef<RunLogsSubscriptionSuccessFragment[]>([]);\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const syncPipelineStatusToApolloCache = React.useCallback(\n    (status: RunStatus) => {\n      const local = client.readFragment<PipelineRunLogsSubscriptionStatusFragment>({\n        fragmentName: 'PipelineRunLogsSubscriptionStatusFragment',\n        fragment: PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT,\n        id: `Run:${runId}`,\n      });\n\n      if (local) {\n        const toWrite = {...local, status};\n        if (\n          status === RunStatus.FAILURE ||\n          status === RunStatus.SUCCESS ||\n          status === RunStatus.STARTING ||\n          status === RunStatus.CANCELING ||\n          status === RunStatus.CANCELED\n        ) {\n          toWrite.canTerminate = false;\n        }\n\n        client.writeFragment({\n          fragmentName: 'PipelineRunLogsSubscriptionStatusFragment',\n          fragment: PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT,\n          id: `Run:${runId}`,\n          data: toWrite,\n        });\n      }\n    },\n    [client, runId],\n  );\n\n  React.useEffect(() => {\n    queue.current = [];\n    dispatch({type: 'reset'});\n  }, [runId]);\n\n  // Batch the nodes together so they don't overwhelm the animation of the Gantt,\n  // which depends on a bit of a timing delay to maintain smoothness.\n  const throttledSetNodes = React.useMemo(() => {\n    return throttle(() => {\n      if (!queue.current.length) {\n        return;\n      }\n      const queuedLogs = [...queue.current];\n      queue.current = [];\n      const queuedMessages = queuedLogs.flatMap((log) => log.messages);\n      const lastLog = queuedLogs[queuedLogs.length - 1];\n      const hasMore = lastLog.hasMorePastEvents;\n      const cursor = lastLog.cursor;\n\n      dispatch({type: 'append', queued: queuedMessages, hasMore, cursor});\n      const nextPipelineStatus = pipelineStatusFromMessages(queuedMessages);\n\n      // If we're still loading past events, don't sync to the cache -- event chunks could\n      // give us `status` values that don't match the actual state of the run.\n      if (nextPipelineStatus && !hasMore) {\n        syncPipelineStatusToApolloCache(nextPipelineStatus);\n      }\n    }, BATCH_INTERVAL);\n  }, [syncPipelineStatusToApolloCache]);\n\n  const {nodes, counts, cursor, loading} = state;\n\n  const {availability, disabled, status} = React.useContext(WebSocketContext);\n  const lostWebsocket = !disabled && availability === 'available' && status === WebSocket.CLOSED;\n  const currentInitialCursorRef = React.useRef<string | null>(cursor);\n\n  if (lostWebsocket) {\n    // Record the cursor we're at when disconnecting so that our subscription\n    // picks up where we left off.\n    currentInitialCursorRef.current = cursor;\n  }\n  const currentInitialCursor = currentInitialCursorRef.current;\n\n  const variables = React.useMemo(() => {\n    return {\n      runId,\n      cursor: currentInitialCursor,\n    };\n  }, [runId, currentInitialCursor]);\n\n  const subscriptionComponent = React.useMemo(\n    () => (\n      <SubscriptionComponent\n        variables={variables}\n        onSubscriptionData={({subscriptionData}) => {\n          const logs = subscriptionData.data?.pipelineRunLogs;\n          if (!logs || logs.__typename === 'PipelineRunLogsSubscriptionFailure') {\n            return;\n          }\n          // Maintain a queue of messages as they arrive, and call the throttled setter.\n          queue.current.push(logs);\n          // Wait until end of animation frame to call throttled set nodes\n          // otherwise we wont end up batching anything if rendering takes\n          // longer than the BATCH_INTERVAL\n          requestAnimationFrame(throttledSetNodes);\n        }}\n      />\n    ),\n    [variables, throttledSetNodes],\n  );\n\n  return React.useMemo(\n    () =>\n      nodes !== null\n        ? {allNodes: nodes, counts, loading, subscriptionComponent}\n        : {allNodes: [], counts, loading, subscriptionComponent},\n    [counts, loading, nodes, subscriptionComponent],\n  );\n};\n\n/**\n * Putting useSubscription in a component that returns null avoids re-rendering\n * any children components that aren't completely memoized\n * https://stackoverflow.com/questions/61876931/how-to-prevent-re-rendering-with-usesubscription\n */\nconst SubscriptionComponent = ({\n  variables,\n  onSubscriptionData,\n}: {\n  variables: {\n    runId: string;\n    cursor: string | null;\n  };\n  onSubscriptionData: (options: OnSubscriptionDataOptions<PipelineRunLogsSubscription>) => void;\n}) => {\n  useSubscription<PipelineRunLogsSubscription, PipelineRunLogsSubscriptionVariables>(\n    PIPELINE_RUN_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables,\n      onSubscriptionData,\n    },\n  );\n  return null;\n};\n\ninterface LogsProviderProps {\n  runId: string;\n  children: (result: LogsProviderLogs) => React.ReactChild;\n}\n\nconst LogsProviderWithSubscription: React.FC<LogsProviderProps> = (props) => {\n  const state = useLogsProviderWithSubscription(props.runId);\n  return (\n    <>\n      {state.subscriptionComponent}\n      {props.children(state)}\n    </>\n  );\n};\n\ninterface LogsProviderWithQueryProps {\n  runId: string;\n  children: (result: LogsProviderLogs) => React.ReactChild;\n}\n\nconst POLL_INTERVAL = 5000;\n\nconst LogsProviderWithQuery = (props: LogsProviderWithQueryProps) => {\n  const {children, runId} = props;\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {counts, cursor, nodes} = state;\n\n  const {stopPolling, startPolling} = useQuery<RunLogsQuery, RunLogsQueryVariables>(\n    RUN_LOGS_QUERY,\n    {\n      notifyOnNetworkStatusChange: true,\n      variables: {runId, cursor, limit: QUERY_LOG_LIMIT},\n      pollInterval: POLL_INTERVAL,\n      onCompleted: (data: RunLogsQuery) => {\n        // We have to stop polling in order to update the `after` value.\n        stopPolling();\n\n        if (\n          data?.pipelineRunOrError.__typename !== 'Run' ||\n          data?.logsForRun.__typename !== 'EventConnection'\n        ) {\n          return;\n        }\n\n        const run = data.pipelineRunOrError;\n        const queued = data.logsForRun.events;\n        const status = run.status;\n        const cursor = data.logsForRun.cursor;\n\n        const hasMore =\n          !!status &&\n          status !== RunStatus.FAILURE &&\n          status !== RunStatus.SUCCESS &&\n          status !== RunStatus.CANCELED;\n\n        dispatch({type: 'append', queued, hasMore, cursor});\n\n        if (hasMore) {\n          startPolling(POLL_INTERVAL);\n        }\n      },\n    },\n  );\n\n  return (\n    <>\n      {children(\n        nodes !== null && nodes.length > 0\n          ? {allNodes: nodes, counts, loading: false}\n          : {allNodes: [], counts, loading: true},\n      )}\n    </>\n  );\n};\n\nexport const LogsProvider: React.FC<LogsProviderProps> = (props) => {\n  const {children, runId} = props;\n  const {availability, disabled} = React.useContext(WebSocketContext);\n\n  // if disabled, drop to query variant immediately\n  if (availability === 'unavailable' || disabled) {\n    return <LogsProviderWithQuery runId={runId}>{children}</LogsProviderWithQuery>;\n  }\n\n  if (availability === 'attempting-to-connect') {\n    return <>{children({allNodes: [], counts: emptyCounts, loading: true})}</>;\n  }\n\n  return <LogsProviderWithSubscription runId={runId}>{children}</LogsProviderWithSubscription>;\n};\n\nconst PIPELINE_RUN_LOGS_SUBSCRIPTION = gql`\n  subscription PipelineRunLogsSubscription($runId: ID!, $cursor: String) {\n    pipelineRunLogs(runId: $runId, cursor: $cursor) {\n      __typename\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n      ...RunLogsSubscriptionSuccess\n    }\n  }\n\n  fragment RunLogsSubscriptionSuccess on PipelineRunLogsSubscriptionSuccess {\n    messages {\n      ... on MessageEvent {\n        runId\n      }\n      ...RunDagsterRunEventFragment\n    }\n    hasMorePastEvents\n    cursor\n  }\n\n  ${RUN_DAGSTER_RUN_EVENT_FRAGMENT}\n`;\n\nconst PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT = gql`\n  fragment PipelineRunLogsSubscriptionStatusFragment on Run {\n    id\n    runId\n    status\n    canTerminate\n  }\n`;\n\nconst RUN_LOGS_QUERY = gql`\n  query RunLogsQuery($runId: ID!, $cursor: String, $limit: Int) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        runId\n        status\n        canTerminate\n      }\n    }\n    logsForRun(runId: $runId, afterCursor: $cursor, limit: $limit) {\n      ... on EventConnection {\n        events {\n          __typename\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        cursor\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n\n  ${RUN_DAGSTER_RUN_EVENT_FRAGMENT}\n`;\n","import {Colors} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nimport {IStepState} from './RunMetadataProvider';\n\nexport const ExecutionStateDot = styled.div<{state: IStepState}>`\n  display: inline-block;\n  width: 11px;\n  height: 11px;\n  border-radius: 5.5px;\n  transition: background 200ms linear;\n  background: ${({state}) =>\n    ({\n      [IStepState.RUNNING]: Colors.Gray400,\n      [IStepState.SUCCEEDED]: Colors.Green700,\n      [IStepState.SKIPPED]: Colors.Yellow500,\n      [IStepState.FAILED]: Colors.Red500,\n      [IStepState.PREPARING]: Colors.Red500,\n      [IStepState.RETRY_REQUESTED]: Colors.Red500,\n      [IStepState.UNKNOWN]: Colors.Red500,\n    }[state])};\n  &:hover {\n    background: ${({state}) =>\n      ({\n        [IStepState.RUNNING]: Colors.Gray400,\n        [IStepState.SUCCEEDED]: Colors.Green700,\n        [IStepState.SKIPPED]: Colors.Yellow500,\n        [IStepState.FAILED]: Colors.Red200,\n        [IStepState.PREPARING]: Colors.Red500,\n        [IStepState.RETRY_REQUESTED]: Colors.Red500,\n        [IStepState.UNKNOWN]: Colors.Red500,\n      }[state])};\n  }\n`;\n","import {Box, Button, Checkbox, Colors, Icon, Menu, MenuItem, Popover} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {LogLevel} from '../graphql/types';\nimport {compactNumber} from '../ui/formatters';\n\nexport type FilterOption = {\n  label: string;\n  count: number;\n  enabled: boolean;\n};\n\ninterface Props {\n  options: Record<LogLevel, FilterOption>;\n  onSetFilter: (level: LogLevel, enabled: boolean) => void;\n}\n\nexport const LogFilterSelect: React.FC<Props> = ({options, onSetFilter}) => {\n  const [showMenu, setShowMenu] = React.useState(false);\n\n  const levels = Object.keys(options);\n  const values = Object.values(options);\n  const enabledCount = values.reduce((accum, {enabled}) => (enabled ? accum + 1 : accum), 0);\n\n  const onChange = (level: string) => {\n    return (e: React.ChangeEvent<HTMLInputElement>) => {\n      const checked = e.target.checked;\n      onSetFilter(level as LogLevel, checked);\n    };\n  };\n\n  return (\n    <Popover\n      isOpen={showMenu}\n      placement=\"bottom-start\"\n      canEscapeKeyClose\n      onInteraction={(nextOpenState: boolean) => setShowMenu(nextOpenState)}\n      content={\n        <Menu style={{width: '180px'}} aria-label=\"filter-options\">\n          {levels.map((level) => {\n            const optionForLevel = options[level as keyof typeof options];\n            const {label, count, enabled} = optionForLevel;\n            return (\n              <MenuItem\n                key={level}\n                tagName=\"div\"\n                shouldDismissPopover={false}\n                text={\n                  <Box flex={{direction: 'row', alignItems: 'center'}}>\n                    <MenuCheckbox\n                      id={`menu-check-${level}`}\n                      checked={enabled}\n                      onChange={onChange(level)}\n                      label={\n                        <Box\n                          flex={{\n                            direction: 'row',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                          }}\n                          style={{flex: 1}}\n                        >\n                          <div>{label}</div>\n                          <div style={{color: Colors.Gray500}}>{compactNumber(count)}</div>\n                        </Box>\n                      }\n                    />\n                  </Box>\n                }\n              />\n            );\n          })}\n        </Menu>\n      }\n    >\n      <FilterButton\n        onClick={() => setShowMenu((current) => !current)}\n        icon={<Icon name=\"filter_alt\" />}\n        rightIcon={<Icon name=\"expand_more\" />}\n      >\n        Levels ({enabledCount})\n      </FilterButton>\n    </Popover>\n  );\n};\n\nconst FilterButton = styled(Button)`\n  justify-content: space-between;\n  width: 100%;\n`;\n\nconst MenuCheckbox = styled(Checkbox)`\n  display: flex;\n  flex: 1;\n`;\n","import {\n  Colors,\n  Popover,\n  TextInput,\n  SuggestionProvider,\n  useSuggestionsForString,\n  Icon,\n} from '@dagster-io/ui';\nimport Fuse from 'fuse.js';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {ClearButton} from '../ui/ClearButton';\n\ninterface Props {\n  value: string;\n  onChange: (value: string) => void;\n  suggestionProviders: SuggestionProvider[];\n}\n\ntype Action =\n  | {type: 'show-popover'}\n  | {type: 'hide-popover'}\n  | {type: 'highlight'; highlight: number}\n  | {type: 'change-query'}\n  | {type: 'select-suggestion'};\n\ntype State = {\n  shown: boolean;\n  highlight: number;\n};\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'show-popover':\n      return {...state, shown: true};\n    case 'hide-popover':\n      return {...state, shown: false};\n    case 'highlight':\n      return {...state, highlight: action.highlight};\n    case 'change-query':\n      return {...state, shown: true, highlight: 0};\n    case 'select-suggestion':\n      return {...state, highlight: 0};\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  shown: false,\n  highlight: 0,\n};\n\nconst fuseOptions = {\n  threshold: 0.3,\n};\n\nexport const LogsFilterInput: React.FC<Props> = (props) => {\n  const {value, onChange, suggestionProviders} = props;\n\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {shown, highlight} = state;\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const {empty, perProvider} = React.useMemo(() => {\n    const perProvider = suggestionProviders.reduce((accum, provider) => {\n      const values = provider.values();\n      return provider.token\n        ? {...accum, [provider.token]: {fuse: new Fuse(values, fuseOptions), all: values}}\n        : accum;\n    }, {} as {[token: string]: {fuse: Fuse<string>; all: string[]}});\n    const providerKeys = suggestionProviders\n      .map((provider) => provider.token)\n      .filter((token) => token) as string[];\n    return {\n      empty: new Fuse(providerKeys, fuseOptions),\n      perProvider,\n    };\n  }, [suggestionProviders]);\n\n  const buildSuggestions = React.useCallback(\n    (queryString: string): string[] => {\n      if (!queryString) {\n        return Object.keys(perProvider);\n      }\n\n      const [token, value] = queryString.split(':');\n      if (token in perProvider) {\n        const {fuse, all} = perProvider[token];\n        const results = value\n          ? fuse.search(value).map((result) => `${token}:${result.item}`)\n          : all.map((value) => `${token}:${value}`);\n\n        // If the querystring is an exact match, don't suggest anything.\n        return results.map((result) => result.toLowerCase()).includes(queryString) ? [] : results;\n      }\n\n      return empty.search(queryString).map((result) => result.item);\n    },\n    [empty, perProvider],\n  );\n\n  const {suggestions, onSelectSuggestion} = useSuggestionsForString(buildSuggestions, value);\n\n  const numResults = suggestions.length;\n  const highlightedResult = suggestions[highlight] || null;\n\n  const onInputChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      dispatch({type: 'change-query'});\n      onChange(e.target.value);\n    },\n    [onChange],\n  );\n\n  const onSelect = React.useCallback(\n    (suggestion: string) => {\n      dispatch({type: 'select-suggestion'});\n      onChange(onSelectSuggestion(suggestion));\n    },\n    [onChange, onSelectSuggestion],\n  );\n\n  const onClear = React.useCallback(() => {\n    dispatch({type: 'change-query'});\n    onChange('');\n    inputRef.current?.focus();\n  }, [onChange]);\n\n  const onKeyDown = (e: React.KeyboardEvent) => {\n    const {key} = e;\n    if (key === 'Escape') {\n      dispatch({type: 'hide-popover'});\n      return;\n    }\n\n    if (!numResults) {\n      return;\n    }\n\n    const lastResult = numResults - 1;\n\n    switch (key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        dispatch({type: 'highlight', highlight: highlight === 0 ? lastResult : highlight - 1});\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        dispatch({type: 'highlight', highlight: highlight === lastResult ? 0 : highlight + 1});\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (highlightedResult) {\n          onSelect(highlightedResult);\n        }\n    }\n  };\n  return (\n    <Popover\n      isOpen={shown && suggestions.length > 0}\n      position=\"bottom-left\"\n      content={\n        <Results>\n          {suggestions.map((suggestion, ii) => (\n            <ResultItem\n              key={suggestion}\n              suggestion={suggestion}\n              isHighlight={highlight === ii}\n              onSelect={onSelect}\n            />\n          ))}\n        </Results>\n      }\n    >\n      <FilterInput\n        placeholder=\"Filter…\"\n        spellCheck={false}\n        autoCorrect=\"off\"\n        value={value}\n        ref={inputRef}\n        onChange={onInputChange}\n        onFocus={() => dispatch({type: 'show-popover'})}\n        onBlur={() => dispatch({type: 'hide-popover'})}\n        onKeyDown={onKeyDown}\n        rightElement={\n          <ClearButton onClick={onClear}>\n            <Icon name=\"cancel\" />\n          </ClearButton>\n        }\n      />\n    </Popover>\n  );\n};\n\nconst ResultItem: React.FC<{\n  suggestion: string;\n  isHighlight: boolean;\n  onSelect: (suggestion: string) => void;\n}> = (props) => {\n  const {suggestion, isHighlight, onSelect} = props;\n  const element = React.useRef<HTMLLIElement>(null);\n\n  React.useEffect(() => {\n    if (element.current && isHighlight) {\n      element.current.scrollIntoView({block: 'nearest'});\n    }\n  }, [isHighlight]);\n\n  return (\n    <Item\n      ref={element}\n      isHighlight={isHighlight}\n      onMouseDown={(e: React.MouseEvent<any>) => {\n        e.preventDefault();\n        onSelect(suggestion);\n      }}\n    >\n      {suggestion}\n    </Item>\n  );\n};\n\nconst FilterInput = styled(TextInput)`\n  width: 300px;\n`;\n\nconst Results = styled.ul`\n  list-style: none;\n  margin: 0;\n  max-height: 200px;\n  max-width: 800px;\n  min-width: 300px;\n  overflow-y: auto;\n  padding: 4px 0;\n`;\n\ninterface HighlightableTextProps {\n  readonly isHighlight: boolean;\n}\n\nconst Item = styled.li<HighlightableTextProps>`\n  align-items: center;\n  background-color: ${({isHighlight}) => (isHighlight ? Colors.Blue500 : Colors.White)};\n  color: ${({isHighlight}) => (isHighlight ? Colors.White : 'default')};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 12px;\n  list-style: none;\n  margin: 0;\n  padding: 4px 8px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  &:hover {\n    background-color: ${({isHighlight}) => (isHighlight ? Colors.Blue500 : Colors.Gray100)};\n  }\n`;\n","import * as React from 'react';\n\nexport const useSuggestionsForString = (\n  buildSuggestions: (value: string) => string[],\n  value: string,\n) => {\n  const tokens = value.toLocaleLowerCase().trim().split(/\\s+/);\n  const queryString = tokens[tokens.length - 1] || '';\n\n  const suggestions = React.useMemo(() => buildSuggestions(queryString), [\n    buildSuggestions,\n    queryString,\n  ]);\n\n  const onSelectSuggestion = React.useCallback(\n    (suggestion: string) => {\n      const lastIndex = value.toLocaleLowerCase().lastIndexOf(queryString);\n      if (lastIndex !== -1) {\n        const keep = value.slice(0, lastIndex);\n        return `${keep}${suggestion}`;\n      }\n\n      // Shouldn't really ever fall through to this, since `queryString` should definitely\n      // be the last token in `value`. No-op just in case.\n      return value;\n    },\n    [queryString, value],\n  );\n\n  return React.useMemo(\n    () => ({\n      suggestions,\n      onSelectSuggestion,\n    }),\n    [onSelectSuggestion, suggestions],\n  );\n};\n","import {tokenizedValueFromString} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\n\nimport {DefaultLogLevels, LogLevel} from './LogLevel';\nimport {LogFilter} from './LogsProvider';\nimport {getRunFilterProviders} from './getRunFilterProviders';\n\nconst DELIMITER = '|';\n\nfunction levelsToQuery(levels: string[]): string {\n  return levels\n    .sort()\n    .map((key) => key.toLowerCase())\n    .join(DELIMITER);\n}\n\nexport const DefaultQuerystring: {[key: string]: string} = {\n  steps: '*',\n  logs: '',\n  levels: levelsToQuery(DefaultLogLevels),\n  hideNonMatches: 'true',\n  focusedTime: '',\n};\n\n/**\n * Query parameter structure, all optional:\n *\n * `steps`\n *   - string (selection syntax)\n *   - Initializes step selection in Gantt chart\n * `logs`\n *   - string (comma-separated foo:bar tokens or free text)\n *   - Initializes log filter input\n * `levels`\n *   - string (comma-separated values)\n *   - Initializes levels in log filter\n * `focusedTime`\n *   - string (unix timestamp with msec)\n *   - Scrolls directly to log with specified time, if no `logs` filter\n */\nexport const decodeRunPageFilters = (qs: {[key: string]: string}) => {\n  const logValues = qs['logs'].split(DELIMITER);\n  const focusedTime = qs['focusedTime'] && !qs['logs'] ? Number(qs['focusedTime']) : null;\n  const hideNonMatches = qs['hideNonMatches'] === 'true' ? true : false;\n\n  const providers = getRunFilterProviders();\n  const logQuery = logValues.map((token) => tokenizedValueFromString(token, providers));\n\n  const levelsValues = qs['levels'].split(DELIMITER);\n\n  return {\n    sinceTime: 0,\n    focusedTime,\n    hideNonMatches,\n    logQuery,\n    levels: levelsValues\n      .map((level) => level.toUpperCase())\n      .filter((level) => LogLevel.hasOwnProperty(level))\n      .reduce((accum, level) => ({...accum, [level]: true}), {}),\n  } as LogFilter;\n};\n\nexport function encodeRunPageFilters(filter: LogFilter) {\n  const logQueryTokenStrings = filter.logQuery.map((v) =>\n    v.token ? `${v.token}:${v.value}` : v.value,\n  );\n\n  return {\n    hideNonMatches: filter.hideNonMatches ? 'true' : 'false',\n    focusedTime: filter.focusedTime || '',\n    logs: logQueryTokenStrings.join(DELIMITER),\n    levels: levelsToQuery(Object.keys(filter.levels).filter((key) => !!filter.levels[key])),\n  };\n}\n\nexport const EnabledRunLogLevelsKey = 'EnabledRunLogLevels';\n\nexport const validateLogLevels = (json: any) => {\n  if (json === undefined || !Array.isArray(json)) {\n    return null;\n  }\n\n  const validLevels = new Set(Object.keys(LogLevel));\n  return json.filter((level) => validLevels.has(level));\n};\n\nexport function useQueryPersistedLogFilter(): [LogFilter, (updates: LogFilter) => void] {\n  // We only read the stored log levels here as defaults, but we do not set them. This is\n  // because we don't want to update the persisted value unless the user interacts with the\n  // LogFilterSelect component. Navigating to a page with levels set in the URL querystring\n  // should *not* implicitly update the persisted values.\n  const [storedLogLevels] = useStateWithStorage(EnabledRunLogLevelsKey, validateLogLevels);\n\n  const defaults = React.useMemo(() => {\n    const levels = storedLogLevels ?? DefaultLogLevels;\n    return {...DefaultQuerystring, levels: levelsToQuery(levels)};\n  }, [storedLogLevels]);\n\n  return useQueryPersistedState<LogFilter>({\n    encode: encodeRunPageFilters,\n    decode: decodeRunPageFilters,\n    defaults,\n  });\n}\n","import {\n  Box,\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Group,\n  IconName,\n  Icon,\n  MenuItem,\n  Select,\n  Spinner,\n  Tab,\n  Tabs,\n  IconWrapper,\n  Colors,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useCopyToClipboard} from '../app/browser';\nimport {OptionsContainer, OptionsDivider} from '../gantt/VizComponents';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\n\nimport {ExecutionStateDot} from './ExecutionStateDot';\nimport {FilterOption, LogFilterSelect} from './LogFilterSelect';\nimport {LogLevel} from './LogLevel';\nimport {LogsFilterInput} from './LogsFilterInput';\nimport {LogFilter, LogFilterValue} from './LogsProvider';\nimport {\n  extractLogCaptureStepsFromLegacySteps,\n  ILogCaptureInfo,\n  IRunMetadataDict,\n  IStepState,\n} from './RunMetadataProvider';\nimport {getRunFilterProviders} from './getRunFilterProviders';\nimport {EnabledRunLogLevelsKey, validateLogLevels} from './useQueryPersistedLogFilter';\n\nexport enum LogType {\n  structured = 'structured',\n  stdout = 'stdout',\n  stderr = 'stderr',\n}\n\ninterface ILogsToolbarProps {\n  steps: string[];\n  metadata: IRunMetadataDict;\n  counts: LogLevelCounts;\n\n  filter: LogFilter;\n  onSetFilter: (filter: LogFilter) => void;\n  logType: LogType;\n  onSetLogType: (logType: LogType) => void;\n  computeLogFileKey?: string;\n  onSetComputeLogKey: (key: string) => void;\n  computeLogUrl: string | null;\n}\n\nconst logQueryToString = (logQuery: LogFilterValue[]) =>\n  logQuery.map(({token, value}) => (token ? `${token}:${value}` : value)).join(' ');\n\nconst INITIAL_COMPUTE_LOG_TYPE = 'initial-compute-log-type';\n\nexport const LogsToolbar: React.FC<ILogsToolbarProps> = (props) => {\n  const {\n    steps,\n    metadata,\n    counts,\n    filter,\n    onSetFilter,\n    logType,\n    onSetLogType,\n    computeLogFileKey,\n    onSetComputeLogKey,\n    computeLogUrl,\n  } = props;\n\n  const [\n    initialComputeLogType,\n    setInitialComputeLogType,\n  ] = useStateWithStorage(INITIAL_COMPUTE_LOG_TYPE, (value: any) =>\n    typeof value === 'string' ? (value as LogType) : LogType.stdout,\n  );\n\n  const activeItems = React.useMemo(\n    () => new Set([logType === LogType.structured ? logType : LogType.stdout]),\n    [logType],\n  );\n\n  const setComputeLogType = React.useCallback(\n    (logType: LogType) => {\n      setInitialComputeLogType(logType);\n      onSetLogType(logType);\n    },\n    [onSetLogType, setInitialComputeLogType],\n  );\n\n  return (\n    <OptionsContainer>\n      <Box margin={{right: 12}}>\n        <ButtonGroup\n          activeItems={activeItems}\n          buttons={[\n            {id: LogType.structured, icon: 'list', tooltip: 'Structured event logs'},\n            {id: initialComputeLogType, icon: 'wysiwyg', tooltip: 'Raw compute logs'},\n          ]}\n          onClick={(id) => onSetLogType(id)}\n        />\n      </Box>\n      {logType === 'structured' ? (\n        <StructuredLogToolbar\n          counts={counts}\n          filter={filter}\n          onSetFilter={onSetFilter}\n          steps={steps}\n        />\n      ) : (\n        <ComputeLogToolbar\n          steps={steps}\n          metadata={metadata}\n          logType={logType}\n          onSetLogType={setComputeLogType}\n          computeLogFileKey={computeLogFileKey}\n          onSetComputeLogKey={onSetComputeLogKey}\n          computeLogUrl={computeLogUrl}\n        />\n      )}\n    </OptionsContainer>\n  );\n};\n\nconst resolveState = (metadata: IRunMetadataDict, logCapture: ILogCaptureInfo) => {\n  // resolves the state of potentially many steps into a single state so that we can show the\n  // execution dot representing the status of this log capture group (potentially at the process\n  // level)\n  if (logCapture.stepKeys.some((stepKey) => metadata.steps[stepKey].state === IStepState.RUNNING)) {\n    return IStepState.RUNNING;\n  }\n  if (logCapture.stepKeys.some((stepKey) => metadata.steps[stepKey].state === IStepState.SKIPPED)) {\n    return IStepState.SKIPPED;\n  }\n  if (\n    logCapture.stepKeys.every((stepKey) => metadata.steps[stepKey].state === IStepState.SUCCEEDED)\n  ) {\n    return IStepState.SUCCEEDED;\n  }\n  return IStepState.FAILED;\n};\n\nconst ComputeLogToolbar = ({\n  steps,\n  metadata,\n  computeLogFileKey,\n  onSetComputeLogKey,\n  logType,\n  onSetLogType,\n  computeLogUrl,\n}: {\n  steps: string[];\n  metadata: IRunMetadataDict;\n  computeLogFileKey?: string;\n  onSetComputeLogKey: (step: string) => void;\n  logType: LogType;\n  onSetLogType: (type: LogType) => void;\n  computeLogUrl: string | null;\n}) => {\n  const logCaptureSteps =\n    metadata.logCaptureSteps || extractLogCaptureStepsFromLegacySteps(Object.keys(metadata.steps));\n  const isValidStepSelection = computeLogFileKey && (logCaptureSteps as any)[computeLogFileKey];\n\n  const fileKeyText = (fileKey?: string) => {\n    if (!fileKey || !(logCaptureSteps as any)[fileKey]) {\n      return null;\n    }\n    const captureInfo = (logCaptureSteps as any)[fileKey];\n    if (captureInfo.stepKeys.length === 1 && fileKey === captureInfo.stepKeys[0]) {\n      return fileKey;\n    }\n    if (captureInfo.pid && captureInfo.stepKeys.length === 1) {\n      return captureInfo.stepKeys[0];\n    }\n    if (captureInfo.pid) {\n      return `pid: ${captureInfo.pid} (${captureInfo.stepKeys.length} steps)`;\n    }\n    return `${fileKey} (${captureInfo.stepKeys.length} steps)`;\n  };\n\n  return (\n    <Box\n      flex={{justifyContent: 'space-between', alignItems: 'center', direction: 'row'}}\n      style={{flex: 1}}\n    >\n      <Group direction=\"row\" spacing={24} alignItems=\"center\">\n        <Select\n          disabled={!steps.length}\n          items={Object.keys(logCaptureSteps)}\n          itemPredicate={(query, item) =>\n            item.toLocaleLowerCase().includes(query.toLocaleLowerCase())\n          }\n          itemRenderer={(item: string, options: {handleClick: any; modifiers: any}) => (\n            <MenuItem\n              key={item}\n              onClick={options.handleClick}\n              text={fileKeyText(item)}\n              active={options.modifiers.active}\n            />\n          )}\n          activeItem={computeLogFileKey}\n          onItemSelect={(fileKey) => {\n            onSetComputeLogKey(fileKey);\n          }}\n        >\n          <Button disabled={!steps.length} rightIcon={<Icon name=\"expand_more\" />}>\n            {fileKeyText(computeLogFileKey) || 'Select a step...'}\n          </Button>\n        </Select>\n        {isValidStepSelection ? (\n          <Tabs selectedTabId={logType} onChange={onSetLogType} size=\"small\">\n            <Tab id={LogType.stdout} title=\"stdout\" />\n            <Tab id={LogType.stderr} title=\"stderr\" />\n          </Tabs>\n        ) : null}\n      </Group>\n      {isValidStepSelection ? (\n        <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n          {computeLogFileKey && (logCaptureSteps as any)[computeLogFileKey] ? (\n            resolveState(metadata, (logCaptureSteps as any)[computeLogFileKey]) ===\n            IStepState.RUNNING ? (\n              <Spinner purpose=\"body-text\" />\n            ) : (\n              <ExecutionStateDot\n                state={resolveState(metadata, (logCaptureSteps as any)[computeLogFileKey])}\n              />\n            )\n          ) : null}\n          {computeLogUrl ? (\n            <Tooltip\n              placement=\"top-end\"\n              content={\n                computeLogFileKey &&\n                (logCaptureSteps as any)[computeLogFileKey]?.stepKeys.length === 1\n                  ? `Download ${\n                      (logCaptureSteps as any)[computeLogFileKey]?.stepKeys[0]\n                    } compute logs`\n                  : `Download compute logs`\n              }\n            >\n              <DownloadLink aria-label=\"Download link\" href={computeLogUrl} download>\n                <Icon name=\"download_for_offline\" color={Colors.Gray600} />\n              </DownloadLink>\n            </Tooltip>\n          ) : null}\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst DownloadLink = styled.a`\n  border-radius: 4px;\n  display: block;\n  text-decoration: none;\n\n  ${IconWrapper} {\n    transition: background-color 100ms linear;\n  }\n\n  :hover ${IconWrapper} {\n    background-color: ${Colors.Gray800};\n  }\n\n  :active ${IconWrapper}, :focus ${IconWrapper} {\n    background-color: ${Colors.Dark};\n  }\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport type LogLevelCounts = Record<LogLevel, number>;\n\nconst StructuredLogToolbar = ({\n  filter,\n  counts,\n  onSetFilter,\n  steps,\n}: {\n  filter: LogFilter;\n  counts: LogLevelCounts;\n  onSetFilter: (filter: LogFilter) => void;\n  steps: string[];\n}) => {\n  const [copyIcon, setCopyIcon] = React.useState<IconName>('assignment');\n  const logQueryString = logQueryToString(filter.logQuery);\n  const [queryString, setQueryString] = React.useState<string>(() => logQueryString);\n  const copyToClipboard = useCopyToClipboard();\n\n  // Persist the user's selected log level filters as defaults. We only _set_ the value here,\n  // when the filter select changes -- the default is read from localStorage by\n  // useQueryPersistedLogFilter.\n  const [_, setStoredLogLevels] = useStateWithStorage(EnabledRunLogLevelsKey, validateLogLevels);\n\n  const selectedStep = filter.logQuery.find((v) => v.token === 'step')?.value || null;\n  const filterText = filter.logQuery.reduce((accum, value) => accum + value.value, '');\n\n  // Reset the query string if the filter is updated, allowing external behavior\n  // (e.g. clicking a Gantt step) to set the input.\n  React.useEffect(() => {\n    setQueryString(logQueryString);\n  }, [logQueryString]);\n\n  const onChange = (value: string) => {\n    const tokens = value.split(/\\s+/);\n    const logQuery = tokens.map((item) => {\n      const segments = item.split(':');\n      if (segments.length > 1) {\n        return {token: segments[0], value: segments[1]};\n      }\n      return {value: segments[0]};\n    });\n    onSetFilter({...filter, logQuery: logQuery as LogFilterValue[]});\n    setQueryString(value);\n  };\n\n  const onChangeFilter = React.useCallback(\n    (level: LogLevel, enabled: boolean) => {\n      const allEnabledFilters = new Set(\n        Object.keys(filter.levels).filter((level) => !!filter.levels[level]),\n      );\n\n      // When changing log level filters, update localStorage with the selected levels\n      // so that it persists as the default.\n      enabled ? allEnabledFilters.add(level) : allEnabledFilters.delete(level);\n      setStoredLogLevels(Array.from(allEnabledFilters));\n\n      // Then, update the querystring.\n      onSetFilter({\n        ...filter,\n        levels: {\n          ...filter.levels,\n          [level]: enabled,\n        },\n      });\n    },\n    [filter, onSetFilter, setStoredLogLevels],\n  );\n\n  // Restore the clipboard icon after a delay.\n  React.useEffect(() => {\n    let token: any;\n    if (copyIcon === 'assignment_turned_in') {\n      token = setTimeout(() => {\n        setCopyIcon('assignment');\n      }, 2000);\n    }\n    return () => {\n      token && clearTimeout(token);\n    };\n  }, [copyIcon]);\n\n  const filterOptions = Object.fromEntries(\n    Object.keys(LogLevel).map((level) => {\n      return [\n        level,\n        {\n          label: level.toLowerCase(),\n          count: counts[level as LogLevel],\n          enabled: !!filter.levels[level],\n        },\n      ] as [LogLevel, FilterOption];\n    }),\n  );\n\n  return (\n    <>\n      <LogsFilterInput\n        value={queryString}\n        suggestionProviders={getRunFilterProviders(steps)}\n        onChange={onChange}\n      />\n      {filterText ? (\n        <NonMatchCheckbox\n          checked={filter.hideNonMatches}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            onSetFilter({...filter, hideNonMatches: event.currentTarget.checked})\n          }\n          label=\"Hide non-matches\"\n        />\n      ) : null}\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 8}} margin={{left: 12}}>\n        <LogFilterSelect\n          options={filterOptions as Record<LogLevel, FilterOption>}\n          onSetFilter={onChangeFilter}\n        />\n      </Box>\n      {selectedStep && <OptionsDivider />}\n      <div style={{minWidth: 15, flex: 1}} />\n      <Button\n        icon={<Icon name={copyIcon} />}\n        onClick={() => {\n          copyToClipboard(window.location.href);\n          setCopyIcon('assignment_turned_in');\n        }}\n      >\n        Copy URL\n      </Button>\n    </>\n  );\n};\n\nconst NonMatchCheckbox = styled(Checkbox)`\n  &&& {\n    margin: 0 4px 0 12px;\n  }\n\n  white-space: nowrap;\n`;\n","import {\n  Box,\n  NonIdealState,\n  FirstOrSecondPanelToggle,\n  SplitPanelContainer,\n  ErrorBoundary,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {CapturedOrExternalLogPanel} from '../CapturedLogPanel';\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {GanttChart, GanttChartLoadingState, GanttChartMode, QueuedState} from '../gantt/GanttChart';\nimport {toGraphQueryItems} from '../gantt/toGraphQueryItems';\nimport {RunStatus} from '../graphql/types';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useFavicon} from '../hooks/useFavicon';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {useSupportsCapturedLogs} from '../instance/useSupportsCapturedLogs';\n\nimport {ComputeLogPanel} from './ComputeLogPanel';\nimport {LogFilter, LogsProvider, LogsProviderLogs} from './LogsProvider';\nimport {LogsScrollingTable} from './LogsScrollingTable';\nimport {LogsToolbar, LogType} from './LogsToolbar';\nimport {RunActionButtons} from './RunActionButtons';\nimport {RunContext} from './RunContext';\nimport {ILogCaptureInfo, IRunMetadataDict, RunMetadataProvider} from './RunMetadataProvider';\nimport {RunDagsterRunEventFragment, RunPageFragment} from './types/RunFragments.types';\nimport {useJobReExecution} from './useJobReExecution';\nimport {useQueryPersistedLogFilter} from './useQueryPersistedLogFilter';\n\ninterface RunProps {\n  runId: string;\n  run?: RunPageFragment;\n}\n\nconst runStatusFavicon = (status: RunStatus) => {\n  switch (status) {\n    case RunStatus.CANCELED:\n    case RunStatus.CANCELING:\n    case RunStatus.FAILURE:\n      return '/favicon-run-failed.svg';\n    case RunStatus.SUCCESS:\n      return '/favicon-run-success.svg';\n    default:\n      return '/favicon-run-pending.svg';\n  }\n};\n\nexport const Run: React.FC<RunProps> = (props) => {\n  const {run, runId} = props;\n  const [logsFilter, setLogsFilter] = useQueryPersistedLogFilter();\n  const [selectionQuery, setSelectionQuery] = useQueryPersistedState<string>({\n    queryKey: 'selection',\n    defaults: {selection: ''},\n  });\n\n  useFavicon(run ? runStatusFavicon(run.status) : '/favicon.svg');\n  useDocumentTitle(\n    run\n      ? `${!isHiddenAssetGroupJob(run.pipelineName) ? run.pipelineName : ''} ${runId.slice(\n          0,\n          8,\n        )} [${run.status}]`\n      : `Run: ${runId}`,\n  );\n\n  const onShowStateDetails = (stepKey: string, logs: RunDagsterRunEventFragment[]) => {\n    const errorNode = logs.find(\n      (node) => node.__typename === 'ExecutionStepFailureEvent' && node.stepKey === stepKey,\n    );\n\n    if (errorNode) {\n      showCustomAlert({\n        body: <PythonErrorInfo error={errorNode} />,\n      });\n    }\n  };\n\n  const onSetSelectionQuery = (query: string) => {\n    setSelectionQuery(query);\n    setLogsFilter({\n      ...logsFilter,\n      logQuery: query !== '*' ? [{token: 'query', value: query}] : [],\n    });\n  };\n\n  return (\n    <RunContext.Provider value={run}>\n      <LogsProvider key={runId} runId={runId}>\n        {(logs) => (\n          <RunMetadataProvider logs={logs}>\n            {(metadata) => (\n              <RunWithData\n                run={run}\n                runId={runId}\n                logs={logs}\n                logsFilter={logsFilter}\n                metadata={metadata}\n                selectionQuery={selectionQuery}\n                onSetLogsFilter={setLogsFilter}\n                onSetSelectionQuery={onSetSelectionQuery}\n                onShowStateDetails={onShowStateDetails}\n              />\n            )}\n          </RunMetadataProvider>\n        )}\n      </LogsProvider>\n    </RunContext.Provider>\n  );\n};\n\ninterface RunWithDataProps {\n  run?: RunPageFragment;\n  runId: string;\n  selectionQuery: string;\n  logs: LogsProviderLogs;\n  logsFilter: LogFilter;\n  metadata: IRunMetadataDict;\n  onSetLogsFilter: (v: LogFilter) => void;\n  onSetSelectionQuery: (query: string) => void;\n  onShowStateDetails: (stepKey: string, logs: RunDagsterRunEventFragment[]) => void;\n}\n\nconst logTypeFromQuery = (queryLogType: string) => {\n  switch (queryLogType) {\n    case 'stdout':\n      return LogType.stdout;\n    case 'stderr':\n      return LogType.stderr;\n    default:\n      return LogType.structured;\n  }\n};\n\nconst matchingComputeLogKeyFromStepKey = (\n  logCaptureSteps: {[fileKey: string]: ILogCaptureInfo} | undefined,\n  stepKey: string,\n) => {\n  const stepsInfo = logCaptureSteps ? Object.values(logCaptureSteps) : [];\n  const matching = stepsInfo.find((info) => info.stepKeys.includes(stepKey));\n  return matching && matching?.fileKey;\n};\n\n/**\n * Note: There are two places we keep a \"step query string\" in the Run view:\n * selectionQuery and logsFilter.logsQuery.\n *\n * - selectionQuery is set when you click around in the Gannt view and is the\n *   selection used for re-execution, etc. When set, we autofill logsFilter.logsQuery.\n *\n * - logsFilter.logsQuery is used for filtering the logs. It can be cleared separately\n *   from the selectionQuery, so you can select a step but navigate elsewhere in the logs.\n *\n * We could revisit this in the future but I believe we iterated quite a bit to get to this\n * solution and we should avoid locking the two filter inputs together completely.\n */\nconst RunWithData: React.FC<RunWithDataProps> = ({\n  run,\n  runId,\n  logs,\n  logsFilter,\n  metadata,\n  selectionQuery,\n  onSetLogsFilter,\n  onSetSelectionQuery,\n}) => {\n  const onLaunch = useJobReExecution(run);\n  const splitPanelContainer = React.createRef<SplitPanelContainer>();\n  const supportsCapturedLogs = useSupportsCapturedLogs();\n\n  const [queryLogType, setQueryLogType] = useQueryPersistedState<string>({\n    queryKey: 'logType',\n    defaults: {logType: 'structured'},\n  });\n\n  const [computeLogFileKey, setComputeLogFileKey] = useQueryPersistedState<string>({\n    queryKey: 'logFileKey',\n  });\n\n  const logType = logTypeFromQuery(queryLogType);\n  const setLogType = (lt: LogType) => setQueryLogType(LogType[lt]);\n  const [computeLogUrl, setComputeLogUrl] = React.useState<string | null>(null);\n\n  const stepKeysJSON = JSON.stringify(Object.keys(metadata.steps).sort());\n  const stepKeys = React.useMemo(() => JSON.parse(stepKeysJSON), [stepKeysJSON]);\n\n  const runtimeGraph = run?.executionPlan && toGraphQueryItems(run?.executionPlan, metadata.steps);\n\n  const selectionStepKeys = React.useMemo(() => {\n    return runtimeGraph && selectionQuery && selectionQuery !== '*'\n      ? filterByQuery(runtimeGraph, selectionQuery).all.map((n) => n.name)\n      : [];\n  }, [runtimeGraph, selectionQuery]);\n\n  React.useEffect(() => {\n    if (!stepKeys?.length || computeLogFileKey) {\n      return;\n    }\n\n    if (metadata.logCaptureSteps) {\n      const logFileKeys = Object.keys(metadata.logCaptureSteps);\n      const selectedLogKey = logFileKeys.find((logFileKey) => {\n        return selectionStepKeys.every(\n          (stepKey) =>\n            metadata.logCaptureSteps &&\n            metadata.logCaptureSteps[logFileKey].stepKeys.includes(stepKey),\n        );\n      });\n      setComputeLogFileKey(selectedLogKey || logFileKeys[0]);\n    } else if (!stepKeys.includes(computeLogFileKey)) {\n      const matching = matchingComputeLogKeyFromStepKey(\n        metadata.logCaptureSteps,\n        selectionStepKeys.length === 1 ? selectionStepKeys[0] : stepKeys[0],\n      );\n      matching && setComputeLogFileKey(matching);\n    } else if (selectionStepKeys.length === 1 && computeLogFileKey !== selectionStepKeys[0]) {\n      const matching = matchingComputeLogKeyFromStepKey(\n        metadata.logCaptureSteps,\n        selectionStepKeys[0],\n      );\n      matching && setComputeLogFileKey(matching);\n    }\n  }, [\n    stepKeys,\n    computeLogFileKey,\n    selectionStepKeys,\n    metadata.logCaptureSteps,\n    setComputeLogFileKey,\n  ]);\n\n  const onSetComputeLogKey = (logFileKey: string) => {\n    setComputeLogFileKey(logFileKey);\n  };\n\n  const logsFilterStepKeys = runtimeGraph\n    ? logsFilter.logQuery\n        .filter((v) => v.token && v.token === 'query')\n        .reduce((accum, v) => {\n          return [...accum, ...filterByQuery(runtimeGraph, v.value).all.map((n) => n.name)];\n        }, [] as string[])\n    : [];\n\n  const onClickStep = (stepKey: string, evt: React.MouseEvent<any>) => {\n    const index = selectionStepKeys.indexOf(stepKey);\n    let newSelected: string[];\n    const filterForExactStep = `\"${stepKey}\"`;\n    if (evt.shiftKey) {\n      // shift-click to multi select steps, preserving quotations if present\n      newSelected = [\n        ...selectionStepKeys.map((k) => (selectionQuery.includes(`\"${k}\"`) ? `\"${k}\"` : k)),\n      ];\n\n      if (index !== -1) {\n        // deselect the step if already selected\n        newSelected.splice(index, 1);\n      } else {\n        // select the step otherwise\n        newSelected.push(filterForExactStep);\n      }\n    } else {\n      if (selectionStepKeys.length === 1 && index !== -1) {\n        // deselect the step if already selected\n        newSelected = [];\n      } else {\n        // select the step otherwise\n        newSelected = [filterForExactStep];\n\n        // When only one step is selected, set the compute log key as well.\n        const matchingLogKey = matchingComputeLogKeyFromStepKey(metadata.logCaptureSteps, stepKey);\n        matchingLogKey && setComputeLogFileKey(matchingLogKey);\n      }\n    }\n\n    onSetSelectionQuery(newSelected.join(', ') || '*');\n  };\n\n  const gantt = (metadata: IRunMetadataDict) => {\n    if (!run) {\n      return <GanttChartLoadingState runId={runId} />;\n    }\n\n    if (run.status === 'QUEUED') {\n      return <QueuedState run={run} />;\n    }\n\n    if (run.executionPlan && runtimeGraph) {\n      return (\n        <ErrorBoundary region=\"gantt chart\">\n          <GanttChart\n            options={{\n              mode: GanttChartMode.WATERFALL_TIMED,\n            }}\n            toolbarActions={\n              <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n                <FirstOrSecondPanelToggle axis=\"vertical\" container={splitPanelContainer} />\n                <RunActionButtons\n                  run={run}\n                  onLaunch={onLaunch}\n                  graph={runtimeGraph}\n                  metadata={metadata}\n                  selection={{query: selectionQuery, keys: selectionStepKeys}}\n                />\n              </Box>\n            }\n            runId={runId}\n            graph={runtimeGraph}\n            metadata={metadata}\n            selection={{query: selectionQuery, keys: selectionStepKeys}}\n            onClickStep={onClickStep}\n            onSetSelection={onSetSelectionQuery}\n            focusedTime={logsFilter.focusedTime}\n          />\n        </ErrorBoundary>\n      );\n    }\n\n    return <NonIdealState icon=\"error\" title=\"Unable to build execution plan\" />;\n  };\n\n  const logCaptureInfo: ILogCaptureInfo | undefined =\n    metadata.logCaptureSteps && computeLogFileKey in metadata.logCaptureSteps\n      ? metadata.logCaptureSteps[computeLogFileKey]\n      : undefined;\n\n  return (\n    <>\n      <SplitPanelContainer\n        ref={splitPanelContainer}\n        axis=\"vertical\"\n        identifier=\"run-gantt\"\n        firstInitialPercent={35}\n        firstMinSize={56}\n        first={gantt(metadata)}\n        second={\n          <ErrorBoundary region=\"logs\">\n            <LogsContainer>\n              <LogsToolbar\n                logType={logType}\n                onSetLogType={setLogType}\n                filter={logsFilter}\n                onSetFilter={onSetLogsFilter}\n                steps={stepKeys}\n                metadata={metadata}\n                computeLogFileKey={computeLogFileKey}\n                onSetComputeLogKey={onSetComputeLogKey}\n                computeLogUrl={computeLogUrl}\n                counts={logs.counts}\n              />\n              {logType !== LogType.structured ? (\n                supportsCapturedLogs ? (\n                  <CapturedOrExternalLogPanel\n                    logKey={computeLogFileKey ? [runId, 'compute_logs', computeLogFileKey] : []}\n                    externalUrl={logCaptureInfo?.externalUrl}\n                    visibleIOType={LogType[logType]}\n                    onSetDownloadUrl={setComputeLogUrl}\n                  />\n                ) : (\n                  <ComputeLogPanel\n                    runId={runId}\n                    stepKeys={stepKeys}\n                    computeLogFileKey={computeLogFileKey}\n                    ioType={LogType[logType]}\n                    setComputeLogUrl={setComputeLogUrl}\n                  />\n                )\n              ) : (\n                <LogsScrollingTable\n                  logs={logs}\n                  filter={logsFilter}\n                  filterStepKeys={logsFilterStepKeys}\n                  filterKey={`${JSON.stringify(logsFilter)}`}\n                  metadata={metadata}\n                />\n              )}\n            </LogsContainer>\n          </ErrorBoundary>\n        }\n      />\n    </>\n  );\n};\n\nconst LogsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n","import * as React from 'react';\n\nexport const useFavicon = (href: string) => {\n  React.useEffect(() => {\n    const el = document.querySelector('link[rel=\"icon\"][type=\"image/svg+xml\"]');\n    if (!el) {\n      return;\n    }\n    const previousHref = el.getAttribute('href');\n    el.setAttribute('href', href);\n    return () => {\n      if (previousHref) {\n        el.setAttribute('href', previousHref);\n      }\n    };\n  }, [href]);\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, NonIdealState, PageHeader, Popover, Tag, Heading, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {useParams} from 'react-router-dom';\n\nimport {formatElapsedTime} from '../app/Util';\nimport {useTrackPageView} from '../app/analytics';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {isThisThingAJob} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {useRepositoryForRunWithParentSnapshot} from '../workspace/useRepositoryForRun';\n\nimport {AssetKeyTagCollection} from './AssetKeyTagCollection';\nimport {Run} from './Run';\nimport {RunConfigDialog, RunDetails} from './RunDetails';\nimport {RUN_PAGE_FRAGMENT} from './RunFragments';\nimport {RunStatusTag} from './RunStatusTag';\nimport {assetKeysForRun} from './RunUtils';\nimport {RunRootQuery, RunRootQueryVariables} from './types/RunRoot.types';\n\nexport const RunRoot = () => {\n  useTrackPageView();\n\n  const {runId} = useParams<{runId: string}>();\n  useDocumentTitle(runId ? `Run ${runId.slice(0, 8)}` : 'Run');\n\n  const {data, loading} = useQuery<RunRootQuery, RunRootQueryVariables>(RUN_ROOT_QUERY, {\n    partialRefetch: true,\n    variables: {runId},\n  });\n\n  const run = data?.pipelineRunOrError.__typename === 'Run' ? data.pipelineRunOrError : null;\n  const snapshotID = run?.pipelineSnapshotId;\n\n  const repoMatch = useRepositoryForRunWithParentSnapshot(run);\n  const repoAddress = repoMatch?.match\n    ? buildRepoAddress(repoMatch.match.repository.name, repoMatch.match.repositoryLocation.name)\n    : null;\n\n  const isJob = React.useMemo(\n    () => !!(run && repoMatch && isThisThingAJob(repoMatch.match, run.pipelineName)),\n    [run, repoMatch],\n  );\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        minWidth: 0,\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      <Box\n        flex={{direction: 'row', alignItems: 'flex-start'}}\n        style={{\n          position: 'relative',\n          zIndex: 1,\n        }}\n      >\n        <PageHeader\n          title={\n            <Heading style={{fontFamily: FontFamily.monospace, fontSize: '20px'}}>\n              {runId.slice(0, 8)}\n            </Heading>\n          }\n          tags={\n            run ? (\n              <>\n                <RunStatusTag status={run.status} />\n                {isHiddenAssetGroupJob(run.pipelineName) ? (\n                  <AssetKeyTagCollection assetKeys={assetKeysForRun(run)} clickableTags />\n                ) : (\n                  <>\n                    <Tag icon=\"run\">\n                      Run of{' '}\n                      <PipelineReference\n                        pipelineName={run?.pipelineName}\n                        pipelineHrefContext={repoAddress || 'repo-unknown'}\n                        snapshotId={snapshotID}\n                        size=\"small\"\n                        isJob={isJob}\n                      />\n                    </Tag>\n                    <AssetKeyTagCollection assetKeys={run.assets.map((a) => a.key)} clickableTags />\n                  </>\n                )}\n                <Box flex={{direction: 'row', alignItems: 'flex-start', gap: 12, wrap: 'wrap'}}>\n                  {run?.startTime ? (\n                    <Popover\n                      interactionKind=\"hover\"\n                      placement=\"bottom\"\n                      content={\n                        <Box padding={16}>\n                          <RunDetails run={run} loading={loading} />\n                        </Box>\n                      }\n                    >\n                      <Tag icon=\"schedule\">\n                        <TimestampDisplay\n                          timestamp={run.startTime}\n                          timeFormat={{showSeconds: true, showTimezone: false}}\n                        />\n                      </Tag>\n                    </Popover>\n                  ) : run.updateTime ? (\n                    <Tag icon=\"schedule\">\n                      <TimestampDisplay\n                        timestamp={run.updateTime}\n                        timeFormat={{showSeconds: true, showTimezone: false}}\n                      />\n                    </Tag>\n                  ) : undefined}\n                  {run?.startTime && run?.endTime ? (\n                    <Popover\n                      interactionKind=\"hover\"\n                      placement=\"bottom\"\n                      content={\n                        <Box padding={16}>\n                          <RunDetails run={run} loading={loading} />\n                        </Box>\n                      }\n                    >\n                      <Tag icon=\"timer\">\n                        <span style={{fontVariantNumeric: 'tabular-nums'}}>\n                          {run?.startTime\n                            ? formatElapsedTime(\n                                (run?.endTime * 1000 || Date.now()) - run?.startTime * 1000,\n                              )\n                            : '–'}\n                        </span>\n                      </Tag>\n                    </Popover>\n                  ) : null}\n                </Box>\n              </>\n            ) : null\n          }\n          right={run ? <RunConfigDialog run={run} isJob={isJob} /> : null}\n        />\n      </Box>\n      <RunById data={data} runId={runId} />\n    </div>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default RunRoot;\n\nconst RunById: React.FC<{data: RunRootQuery | undefined; runId: string}> = (props) => {\n  const {data, runId} = props;\n\n  if (!data || !data.pipelineRunOrError) {\n    return <Run run={undefined} runId={runId} />;\n  }\n\n  if (data.pipelineRunOrError.__typename !== 'Run') {\n    return (\n      <Box padding={{vertical: 64}}>\n        <NonIdealState\n          icon=\"error\"\n          title=\"No run found\"\n          description=\"The run with this ID does not exist or has been cleaned up.\"\n        />\n      </Box>\n    );\n  }\n\n  return <Run run={data.pipelineRunOrError} runId={runId} />;\n};\n\nconst RUN_ROOT_QUERY = gql`\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ${RUN_PAGE_FRAGMENT}\n`;\n","import {Colors, IconWrapper} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const ClearButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  margin: 0 -2px 0 0;\n  padding: 2px;\n\n  ${IconWrapper} {\n    background-color: ${Colors.Gray400};\n    transition: background-color 100ms linear;\n  }\n\n  :hover ${IconWrapper}, :focus ${IconWrapper} {\n    background-color: ${Colors.Gray700};\n  }\n\n  :active ${IconWrapper} {\n    background-color: ${Colors.Dark};\n  }\n\n  :focus {\n    outline: none;\n  }\n`;\n","const compactFormatter = new Intl.NumberFormat(navigator.language, {\n  compactDisplay: 'short',\n  notation: 'compact',\n});\n\nexport const numberFormatter = new Intl.NumberFormat(navigator.language, {});\n\nexport const compactNumber = (num: number | bigint): string => compactFormatter.format(num);\n","var BezierEasing = require('bezier-easing')\n\n// Predefined set of animations. Similar to CSS easing functions\nvar animations = {\n  ease:  BezierEasing(0.25, 0.1, 0.25, 1),\n  easeIn: BezierEasing(0.42, 0, 1, 1),\n  easeOut: BezierEasing(0, 0, 0.58, 1),\n  easeInOut: BezierEasing(0.42, 0, 0.58, 1),\n  linear: BezierEasing(0, 0, 1, 1)\n}\n\n\nmodule.exports = animate;\nmodule.exports.makeAggregateRaf = makeAggregateRaf;\nmodule.exports.sharedScheduler = makeAggregateRaf();\n\n\nfunction animate(source, target, options) {\n  var start = Object.create(null)\n  var diff = Object.create(null)\n  options = options || {}\n  // We let clients specify their own easing function\n  var easing = (typeof options.easing === 'function') ? options.easing : animations[options.easing]\n\n  // if nothing is specified, default to ease (similar to CSS animations)\n  if (!easing) {\n    if (options.easing) {\n      console.warn('Unknown easing function in amator: ' + options.easing);\n    }\n    easing = animations.ease\n  }\n\n  var step = typeof options.step === 'function' ? options.step : noop\n  var done = typeof options.done === 'function' ? options.done : noop\n\n  var scheduler = getScheduler(options.scheduler)\n\n  var keys = Object.keys(target)\n  keys.forEach(function(key) {\n    start[key] = source[key]\n    diff[key] = target[key] - source[key]\n  })\n\n  var durationInMs = typeof options.duration === 'number' ? options.duration : 400\n  var durationInFrames = Math.max(1, durationInMs * 0.06) // 0.06 because 60 frames pers 1,000 ms\n  var previousAnimationId\n  var frame = 0\n\n  previousAnimationId = scheduler.next(loop)\n\n  return {\n    cancel: cancel\n  }\n\n  function cancel() {\n    scheduler.cancel(previousAnimationId)\n    previousAnimationId = 0\n  }\n\n  function loop() {\n    var t = easing(frame/durationInFrames)\n    frame += 1\n    setValues(t)\n    if (frame <= durationInFrames) {\n      previousAnimationId = scheduler.next(loop)\n      step(source)\n    } else {\n      previousAnimationId = 0\n      setTimeout(function() { done(source) }, 0)\n    }\n  }\n\n  function setValues(t) {\n    keys.forEach(function(key) {\n      source[key] = diff[key] * t + start[key]\n    })\n  }\n}\n\nfunction noop() { }\n\nfunction getScheduler(scheduler) {\n  if (!scheduler) {\n    var canRaf = typeof window !== 'undefined' && window.requestAnimationFrame\n    return canRaf ? rafScheduler() : timeoutScheduler()\n  }\n  if (typeof scheduler.next !== 'function') throw new Error('Scheduler is supposed to have next(cb) function')\n  if (typeof scheduler.cancel !== 'function') throw new Error('Scheduler is supposed to have cancel(handle) function')\n\n  return scheduler\n}\n\nfunction rafScheduler() {\n  return {\n    next: window.requestAnimationFrame.bind(window),\n    cancel: window.cancelAnimationFrame.bind(window)\n  }\n}\n\nfunction timeoutScheduler() {\n  return {\n    next: function(cb) {\n      return setTimeout(cb, 1000/60)\n    },\n    cancel: function (id) {\n      return clearTimeout(id)\n    }\n  }\n}\n\nfunction makeAggregateRaf() {\n  var frontBuffer = new Set();\n  var backBuffer = new Set();\n  var frameToken = 0;\n\n  return {\n    next: next,\n    cancel: next,\n    clearAll: clearAll\n  }\n\n  function clearAll() {\n    frontBuffer.clear();\n    backBuffer.clear();\n    cancelAnimationFrame(frameToken);\n    frameToken = 0;\n  }\n\n  function next(callback) {\n    backBuffer.add(callback);\n    renderNextFrame();\n  }\n\n  function renderNextFrame() {\n    if (!frameToken) frameToken = requestAnimationFrame(renderFrame);\n  }\n\n  function renderFrame() {\n    frameToken = 0;\n\n    var t = backBuffer;\n    backBuffer = frontBuffer;\n    frontBuffer = t;\r\n\n    frontBuffer.forEach(function(callback) {\n      callback();\n    });\n    frontBuffer.clear();\n  }\n\n  function cancel(callback) {\n    backBuffer.delete(callback);\n  }\n}\n","\"use strict\";\n\n// This file was originally written by @drudru (https://github.com/drudru/ansi_up), MIT, 2011\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ANSI_COLORS = [[{ color: \"0, 0, 0\", \"class\": \"ansi-black\" }, { color: \"187, 0, 0\", \"class\": \"ansi-red\" }, { color: \"0, 187, 0\", \"class\": \"ansi-green\" }, { color: \"187, 187, 0\", \"class\": \"ansi-yellow\" }, { color: \"0, 0, 187\", \"class\": \"ansi-blue\" }, { color: \"187, 0, 187\", \"class\": \"ansi-magenta\" }, { color: \"0, 187, 187\", \"class\": \"ansi-cyan\" }, { color: \"255,255,255\", \"class\": \"ansi-white\" }], [{ color: \"85, 85, 85\", \"class\": \"ansi-bright-black\" }, { color: \"255, 85, 85\", \"class\": \"ansi-bright-red\" }, { color: \"0, 255, 0\", \"class\": \"ansi-bright-green\" }, { color: \"255, 255, 85\", \"class\": \"ansi-bright-yellow\" }, { color: \"85, 85, 255\", \"class\": \"ansi-bright-blue\" }, { color: \"255, 85, 255\", \"class\": \"ansi-bright-magenta\" }, { color: \"85, 255, 255\", \"class\": \"ansi-bright-cyan\" }, { color: \"255, 255, 255\", \"class\": \"ansi-bright-white\" }]];\n\nvar Anser = function () {\n    _createClass(Anser, null, [{\n        key: \"escapeForHtml\",\n\n\n        /**\n         * Anser.escapeForHtml\n         * Escape the input HTML.\n         *\n         * This does the minimum escaping of text to make it compliant with HTML.\n         * In particular, the '&','<', and '>' characters are escaped. This should\n         * be run prior to `ansiToHtml`.\n         *\n         * @name Anser.escapeForHtml\n         * @function\n         * @param {String} txt The input text (containing the ANSI snippets).\n         * @returns {String} The escaped html.\n         */\n        value: function escapeForHtml(txt) {\n            return new Anser().escapeForHtml(txt);\n        }\n\n        /**\n         * Anser.linkify\n         * Adds the links in the HTML.\n         *\n         * This replaces any links in the text with anchor tags that display the\n         * link. The links should have at least one whitespace character\n         * surrounding it. Also, you should apply this after you have run\n         * `ansiToHtml` on the text.\n         *\n         * @name Anser.linkify\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The HTML containing the <a> tags (unescaped).\n         */\n\n    }, {\n        key: \"linkify\",\n        value: function linkify(txt) {\n            return new Anser().linkify(txt);\n        }\n\n        /**\n         * Anser.ansiToHtml\n         * This replaces ANSI terminal escape codes with SPAN tags that wrap the\n         * content.\n         *\n         * This function only interprets ANSI SGR (Select Graphic Rendition) codes\n         * that can be represented in HTML.\n         * For example, cursor movement codes are ignored and hidden from output.\n         * The default style uses colors that are very close to the prescribed\n         * standard. The standard assumes that the text will have a black\n         * background. These colors are set as inline styles on the SPAN tags.\n         *\n         * Another option is to set `use_classes: true` in the options argument.\n         * This will instead set classes on the spans so the colors can be set via\n         * CSS. The class names used are of the format `ansi-*-fg/bg` and\n         * `ansi-bright-*-fg/bg` where `*` is the color name,\n         * i.e black/red/green/yellow/blue/magenta/cyan/white.\n         *\n         * @name Anser.ansiToHtml\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed to the ansiToHTML method.\n         * @returns {String} The HTML output.\n         */\n\n    }, {\n        key: \"ansiToHtml\",\n        value: function ansiToHtml(txt, options) {\n            return new Anser().ansiToHtml(txt, options);\n        }\n\n        /**\n         * Anser.ansiToJson\n         * Converts ANSI input into JSON output.\n         *\n         * @name Anser.ansiToJson\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed to the ansiToHTML method.\n         * @returns {String} The HTML output.\n         */\n\n    }, {\n        key: \"ansiToJson\",\n        value: function ansiToJson(txt, options) {\n            return new Anser().ansiToJson(txt, options);\n        }\n\n        /**\n         * Anser.ansiToText\n         * Converts ANSI input into text output.\n         *\n         * @name Anser.ansiToText\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The text output.\n         */\n\n    }, {\n        key: \"ansiToText\",\n        value: function ansiToText(txt) {\n            return new Anser().ansiToText(txt);\n        }\n\n        /**\n         * Anser\n         * The `Anser` class.\n         *\n         * @name Anser\n         * @function\n         * @returns {Anser}\n         */\n\n    }]);\n\n    function Anser() {\n        _classCallCheck(this, Anser);\n\n        this.fg = this.bg = this.fg_truecolor = this.bg_truecolor = null;\n        this.bright = 0;\n    }\n\n    /**\n     * setupPalette\n     * Sets up the palette.\n     *\n     * @name setupPalette\n     * @function\n     */\n\n\n    _createClass(Anser, [{\n        key: \"setupPalette\",\n        value: function setupPalette() {\n            this.PALETTE_COLORS = [];\n\n            // Index 0..15 : System color\n            for (var i = 0; i < 2; ++i) {\n                for (var j = 0; j < 8; ++j) {\n                    this.PALETTE_COLORS.push(ANSI_COLORS[i][j].color);\n                }\n            }\n\n            // Index 16..231 : RGB 6x6x6\n            // https://gist.github.com/jasonm23/2868981#file-xterm-256color-yaml\n            var levels = [0, 95, 135, 175, 215, 255];\n            var format = function format(r, g, b) {\n                return levels[r] + \", \" + levels[g] + \", \" + levels[b];\n            };\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n            for (var _r = 0; _r < 6; ++_r) {\n                for (var _g = 0; _g < 6; ++_g) {\n                    for (var _b = 0; _b < 6; ++_b) {\n                        this.PALETTE_COLORS.push(format(_r, _g, _b));\n                    }\n                }\n            }\n\n            // Index 232..255 : Grayscale\n            var level = 8;\n            for (var _i = 0; _i < 24; ++_i, level += 10) {\n                this.PALETTE_COLORS.push(format(level, level, level));\n            }\n        }\n\n        /**\n         * escapeForHtml\n         * Escapes the input text.\n         *\n         * @name escapeForHtml\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The escpaed HTML output.\n         */\n\n    }, {\n        key: \"escapeForHtml\",\n        value: function escapeForHtml(txt) {\n            return txt.replace(/[&<>]/gm, function (str) {\n                return str == \"&\" ? \"&amp;\" : str == \"<\" ? \"&lt;\" : str == \">\" ? \"&gt;\" : \"\";\n            });\n        }\n\n        /**\n         * linkify\n         * Adds HTML link elements.\n         *\n         * @name linkify\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The HTML output containing link elements.\n         */\n\n    }, {\n        key: \"linkify\",\n        value: function linkify(txt) {\n            return txt.replace(/(https?:\\/\\/[^\\s]+)/gm, function (str) {\n                return \"<a href=\\\"\" + str + \"\\\">\" + str + \"</a>\";\n            });\n        }\n\n        /**\n         * ansiToHtml\n         * Converts ANSI input into HTML output.\n         *\n         * @name ansiToHtml\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed ot the `process` method.\n         * @returns {String} The HTML output.\n         */\n\n    }, {\n        key: \"ansiToHtml\",\n        value: function ansiToHtml(txt, options) {\n            return this.process(txt, options, true);\n        }\n\n        /**\n         * ansiToJson\n         * Converts ANSI input into HTML output.\n         *\n         * @name ansiToJson\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed ot the `process` method.\n         * @returns {String} The JSON output.\n         */\n\n    }, {\n        key: \"ansiToJson\",\n        value: function ansiToJson(txt, options) {\n            options = options || {};\n            options.json = true;\n            options.clearLine = false;\n            return this.process(txt, options, true);\n        }\n\n        /**\n         * ansiToText\n         * Converts ANSI input into HTML output.\n         *\n         * @name ansiToText\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The text output.\n         */\n\n    }, {\n        key: \"ansiToText\",\n        value: function ansiToText(txt) {\n            return this.process(txt, {}, false);\n        }\n\n        /**\n         * process\n         * Processes the input.\n         *\n         * @name process\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options An object passed to `processChunk` method, extended with:\n         *\n         *  - `json` (Boolean): If `true`, the result will be an object.\n         *  - `use_classes` (Boolean): If `true`, HTML classes will be appended to the HTML output.\n         *\n         * @param {Boolean} markup\n         */\n\n    }, {\n        key: \"process\",\n        value: function process(txt, options, markup) {\n            var _this = this;\n\n            var self = this;\n            var raw_text_chunks = txt.split(/\\033\\[/);\n            var first_chunk = raw_text_chunks.shift(); // the first chunk is not the result of the split\n\n            if (options === undefined || options === null) {\n                options = {};\n            }\n            options.clearLine = /\\r/.test(txt); // check for Carriage Return\n            var color_chunks = raw_text_chunks.map(function (chunk) {\n                return _this.processChunk(chunk, options, markup);\n            });\n\n            if (options && options.json) {\n                var first = self.processChunkJson(\"\");\n                first.content = first_chunk;\n                first.clearLine = options.clearLine;\n                color_chunks.unshift(first);\n                if (options.remove_empty) {\n                    color_chunks = color_chunks.filter(function (c) {\n                        return !c.isEmpty();\n                    });\n                }\n                return color_chunks;\n            } else {\n                color_chunks.unshift(first_chunk);\n            }\n\n            return color_chunks.join(\"\");\n        }\n\n        /**\n         * processChunkJson\n         * Processes the current chunk into json output.\n         *\n         * @name processChunkJson\n         * @function\n         * @param {String} text The input text.\n         * @param {Object} options An object containing the following fields:\n         *\n         *  - `json` (Boolean): If `true`, the result will be an object.\n         *  - `use_classes` (Boolean): If `true`, HTML classes will be appended to the HTML output.\n         *\n         * @param {Boolean} markup If false, the colors will not be parsed.\n         * @return {Object} The result object:\n         *\n         *  - `content` (String): The text.\n         *  - `fg` (String|null): The foreground color.\n         *  - `bg` (String|null): The background color.\n         *  - `fg_truecolor` (String|null): The foreground true color (if 16m color is enabled).\n         *  - `bg_truecolor` (String|null): The background true color (if 16m color is enabled).\n         *  - `clearLine` (Boolean): `true` if a carriageReturn \\r was fount at end of line.\n         *  - `was_processed` (Bolean): `true` if the colors were processed, `false` otherwise.\n         *  - `isEmpty` (Function): A function returning `true` if the content is empty, or `false` otherwise.\n         *\n         */\n\n    }, {\n        key: \"processChunkJson\",\n        value: function processChunkJson(text, options, markup) {\n\n            // Are we using classes or styles?\n            options = typeof options == \"undefined\" ? {} : options;\n            var use_classes = options.use_classes = typeof options.use_classes != \"undefined\" && options.use_classes;\n            var key = options.key = use_classes ? \"class\" : \"color\";\n\n            var result = {\n                content: text,\n                fg: null,\n                bg: null,\n                fg_truecolor: null,\n                bg_truecolor: null,\n                clearLine: options.clearLine,\n                decoration: null,\n                was_processed: false,\n                isEmpty: function isEmpty() {\n                    return !result.content;\n                }\n            };\n\n            // Each \"chunk\" is the text after the CSI (ESC + \"[\") and before the next CSI/EOF.\n            //\n            // This regex matches four groups within a chunk.\n            //\n            // The first and third groups match code type.\n            // We supported only SGR command. It has empty first group and \"m\" in third.\n            //\n            // The second group matches all of the number+semicolon command sequences\n            // before the \"m\" (or other trailing) character.\n            // These are the graphics or SGR commands.\n            //\n            // The last group is the text (including newlines) that is colored by\n            // the other group\"s commands.\n            var matches = text.match(/^([!\\x3c-\\x3f]*)([\\d;]*)([\\x20-\\x2c]*[\\x40-\\x7e])([\\s\\S]*)/m);\n\n            if (!matches) return result;\n\n            var orig_txt = result.content = matches[4];\n            var nums = matches[2].split(\";\");\n\n            // We currently support only \"SGR\" (Select Graphic Rendition)\n            // Simply ignore if not a SGR command.\n            if (matches[1] !== \"\" || matches[3] !== \"m\") {\n                return result;\n            }\n\n            if (!markup) {\n                return result;\n            }\n\n            var self = this;\n\n            self.decoration = null;\n\n            while (nums.length > 0) {\n                var num_str = nums.shift();\n                var num = parseInt(num_str);\n\n                if (isNaN(num) || num === 0) {\n                    self.fg = self.bg = self.decoration = null;\n                } else if (num === 1) {\n                    self.decoration = \"bold\";\n                } else if (num === 2) {\n                    self.decoration = \"dim\";\n                    // Enable code 2 to get string\n                } else if (num == 3) {\n                    self.decoration = \"italic\";\n                } else if (num == 4) {\n                    self.decoration = \"underline\";\n                } else if (num == 5) {\n                    self.decoration = \"blink\";\n                } else if (num === 7) {\n                    self.decoration = \"reverse\";\n                } else if (num === 8) {\n                    self.decoration = \"hidden\";\n                    // Enable code 9 to get strikethrough\n                } else if (num === 9) {\n                    self.decoration = \"strikethrough\";\n                } else if (num == 39) {\n                    self.fg = null;\n                } else if (num == 49) {\n                    self.bg = null;\n                    // Foreground color\n                } else if (num >= 30 && num < 38) {\n                    self.fg = ANSI_COLORS[0][num % 10][key];\n                    // Foreground bright color\n                } else if (num >= 90 && num < 98) {\n                    self.fg = ANSI_COLORS[1][num % 10][key];\n                    // Background color\n                } else if (num >= 40 && num < 48) {\n                    self.bg = ANSI_COLORS[0][num % 10][key];\n                    // Background bright color\n                } else if (num >= 100 && num < 108) {\n                    self.bg = ANSI_COLORS[1][num % 10][key];\n                } else if (num === 38 || num === 48) {\n                    // extend color (38=fg, 48=bg)\n                    var is_foreground = num === 38;\n                    if (nums.length >= 1) {\n                        var mode = nums.shift();\n                        if (mode === \"5\" && nums.length >= 1) {\n                            // palette color\n                            var palette_index = parseInt(nums.shift());\n                            if (palette_index >= 0 && palette_index <= 255) {\n                                if (!use_classes) {\n                                    if (!this.PALETTE_COLORS) {\n                                        self.setupPalette();\n                                    }\n                                    if (is_foreground) {\n                                        self.fg = this.PALETTE_COLORS[palette_index];\n                                    } else {\n                                        self.bg = this.PALETTE_COLORS[palette_index];\n                                    }\n                                } else {\n                                    var klass = palette_index >= 16 ? \"ansi-palette-\" + palette_index : ANSI_COLORS[palette_index > 7 ? 1 : 0][palette_index % 8][\"class\"];\n                                    if (is_foreground) {\n                                        self.fg = klass;\n                                    } else {\n                                        self.bg = klass;\n                                    }\n                                }\n                            }\n                        } else if (mode === \"2\" && nums.length >= 3) {\n                            // true color\n                            var r = parseInt(nums.shift());\n                            var g = parseInt(nums.shift());\n                            var b = parseInt(nums.shift());\n                            if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {\n                                var color = r + \", \" + g + \", \" + b;\n                                if (!use_classes) {\n                                    if (is_foreground) {\n                                        self.fg = color;\n                                    } else {\n                                        self.bg = color;\n                                    }\n                                } else {\n                                    if (is_foreground) {\n                                        self.fg = \"ansi-truecolor\";\n                                        self.fg_truecolor = color;\n                                    } else {\n                                        self.bg = \"ansi-truecolor\";\n                                        self.bg_truecolor = color;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (self.fg === null && self.bg === null && self.decoration === null) {\n                return result;\n            } else {\n                var styles = [];\n                var classes = [];\n                var data = {};\n\n                result.fg = self.fg;\n                result.bg = self.bg;\n                result.fg_truecolor = self.fg_truecolor;\n                result.bg_truecolor = self.bg_truecolor;\n                result.decoration = self.decoration;\n                result.was_processed = true;\n\n                return result;\n            }\n        }\n\n        /**\n         * processChunk\n         * Processes the current chunk of text.\n         *\n         * @name processChunk\n         * @function\n         * @param {String} text The input text.\n         * @param {Object} options An object containing the following fields:\n         *\n         *  - `json` (Boolean): If `true`, the result will be an object.\n         *  - `use_classes` (Boolean): If `true`, HTML classes will be appended to the HTML output.\n         *\n         * @param {Boolean} markup If false, the colors will not be parsed.\n         * @return {Object|String} The result (object if `json` is wanted back or string otherwise).\n         */\n\n    }, {\n        key: \"processChunk\",\n        value: function processChunk(text, options, markup) {\n            var _this2 = this;\n\n            var self = this;\n            options = options || {};\n            var jsonChunk = this.processChunkJson(text, options, markup);\n\n            if (options.json) {\n                return jsonChunk;\n            }\n            if (jsonChunk.isEmpty()) {\n                return \"\";\n            }\n            if (!jsonChunk.was_processed) {\n                return jsonChunk.content;\n            }\n\n            var use_classes = options.use_classes;\n\n            var styles = [];\n            var classes = [];\n            var data = {};\n            var render_data = function render_data(data) {\n                var fragments = [];\n                var key = void 0;\n                for (key in data) {\n                    if (data.hasOwnProperty(key)) {\n                        fragments.push(\"data-\" + key + \"=\\\"\" + _this2.escapeForHtml(data[key]) + \"\\\"\");\n                    }\n                }\n                return fragments.length > 0 ? \" \" + fragments.join(\" \") : \"\";\n            };\n\n            if (jsonChunk.fg) {\n                if (use_classes) {\n                    classes.push(jsonChunk.fg + \"-fg\");\n                    if (jsonChunk.fg_truecolor !== null) {\n                        data[\"ansi-truecolor-fg\"] = jsonChunk.fg_truecolor;\n                        jsonChunk.fg_truecolor = null;\n                    }\n                } else {\n                    styles.push(\"color:rgb(\" + jsonChunk.fg + \")\");\n                }\n            }\n\n            if (jsonChunk.bg) {\n                if (use_classes) {\n                    classes.push(jsonChunk.bg + \"-bg\");\n                    if (jsonChunk.bg_truecolor !== null) {\n                        data[\"ansi-truecolor-bg\"] = jsonChunk.bg_truecolor;\n                        jsonChunk.bg_truecolor = null;\n                    }\n                } else {\n                    styles.push(\"background-color:rgb(\" + jsonChunk.bg + \")\");\n                }\n            }\n\n            if (jsonChunk.decoration) {\n                if (use_classes) {\n                    classes.push(\"ansi-\" + jsonChunk.decoration);\n                } else if (jsonChunk.decoration === \"bold\") {\n                    styles.push(\"font-weight:bold\");\n                } else if (jsonChunk.decoration === \"dim\") {\n                    styles.push(\"opacity:0.5\");\n                } else if (jsonChunk.decoration === \"italic\") {\n                    styles.push(\"font-style:italic\");\n                    // underline and blink are treated bellow\n                } else if (jsonChunk.decoration === \"reverse\") {\n                    styles.push(\"filter:invert(100%)\");\n                } else if (jsonChunk.decoration === \"hidden\") {\n                    styles.push(\"visibility:hidden\");\n                } else if (jsonChunk.decoration === \"strikethrough\") {\n                    styles.push(\"text-decoration:line-through\");\n                } else {\n                    styles.push(\"text-decoration:\" + jsonChunk.decoration);\n                }\n            }\n\n            if (use_classes) {\n                return \"<span class=\\\"\" + classes.join(\" \") + \"\\\"\" + render_data(data) + \">\" + jsonChunk.content + \"</span>\";\n            } else {\n                return \"<span style=\\\"\" + styles.join(\";\") + \"\\\"\" + render_data(data) + \">\" + jsonChunk.content + \"</span>\";\n            }\n        }\n    }]);\n\n    return Anser;\n}();\n\n;\n\nmodule.exports = Anser;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst anser_1 = __importDefault(require(\"anser\"));\nconst escape_carriage_1 = require(\"escape-carriage\");\nconst React = __importStar(require(\"react\"));\nconst LINK_REGEX = /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/;\n/**\n * Converts ANSI strings into JSON output.\n * @name ansiToJSON\n * @function\n * @param {String} input The input string.\n * @return {Array} The parsed input.\n */\nfunction ansiToJSON(input, use_classes = false) {\n    input = escape_carriage_1.escapeCarriageReturn(input);\n    return anser_1.default.ansiToJson(input, {\n        json: true,\n        remove_empty: true,\n        use_classes\n    });\n}\n/**\n * Create a class string.\n * @name createClass\n * @function\n * @param {AnserJsonEntry}.\n * @return {String} class name(s)\n */\nfunction createClass(bundle) {\n    let classNames = \"\";\n    if (!bundle.bg && !bundle.fg) {\n        return null;\n    }\n    if (bundle.bg) {\n        classNames += bundle.bg + \" \";\n    }\n    if (bundle.fg) {\n        classNames += bundle.fg + \" \";\n    }\n    classNames = classNames.substring(0, classNames.length - 1);\n    return classNames;\n}\n/**\n * Create the style attribute.\n * @name createStyle\n * @function\n * @param {AnserJsonEntry}.\n * @return {Object} returns the style object\n */\nfunction createStyle(bundle) {\n    const style = {};\n    if (bundle.bg) {\n        style.backgroundColor = `rgb(${bundle.bg})`;\n    }\n    if (bundle.fg) {\n        style.color = `rgb(${bundle.fg})`;\n    }\n    return style;\n}\n/**\n * Converts an Anser bundle into a React Node.\n * @param linkify whether links should be converting into clickable anchor tags.\n * @param useClasses should render the span with a class instead of style.\n * @param bundle Anser output.\n */\nfunction convertBundleIntoReact(linkify, useClasses, bundle, key) {\n    const style = useClasses ? null : createStyle(bundle);\n    const className = useClasses ? createClass(bundle) : null;\n    if (!linkify) {\n        return React.createElement(\"span\", { style, key, className }, bundle.content);\n    }\n    const words = bundle.content.split(/(\\s+)/).reduce((words, word, index) => {\n        // If this is a separator, re-add the space removed from split.\n        if (index % 2 === 1) {\n            words.push(word);\n            return words;\n        }\n        // If  this isn't a link, just return the word as-is.\n        if (!LINK_REGEX.test(word)) {\n            words.push(word);\n            return words;\n        }\n        words.push(React.createElement(\"a\", {\n            key: index,\n            href: word,\n            target: \"_blank\"\n        }, `${word}`));\n        return words;\n    }, []);\n    return React.createElement(\"span\", { style, key, className }, words);\n}\nfunction Ansi(props) {\n    const { className, useClasses, children, linkify } = props;\n    return React.createElement(\"code\", { className }, ansiToJSON(children, !!useClasses).map(convertBundleIntoReact.bind(null, linkify, !!useClasses)));\n}\nexports.default = Ansi;\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","/**\n * Escape carrigage returns like a terminal\n * @param {string} txt - String to escape.\n * @return {string}    - Escaped string.\n */\nfunction escapeCarriageReturn(txt) {\n  if (!txt) return \"\";\n  if (!/\\r/.test(txt)) return txt;\n  txt = txt.replace(/\\r+\\n/gm, \"\\n\"); // \\r followed by \\n --> newline\n  while (/\\r[^$]/.test(txt)) {\n    var base = /^(.*)\\r+/m.exec(txt)[1];\n    var insert = /\\r+(.*)$/m.exec(txt)[1];\n    insert = insert + base.slice(insert.length, base.length);\n    txt = txt.replace(/\\r+.*$/m, \"\\r\").replace(/^.*\\r/m, insert);\n  }\n  return txt;\n}\n\nfunction findLongestString(arr) {\n  var longest = 0;\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[longest].length <= arr[i].length) {\n      longest = i;\n    }\n  }\n  return longest;\n}\n\nfunction escapeSingleLineSafe(txt) {\n  if (!/\\r/.test(txt)) return txt;\n  var arr = txt.split(\"\\r\");\n  var res = [];\n\n  while (arr.length > 0) {\n    var longest = findLongestString(arr);\n    res.push(arr[longest]);\n    arr = arr.slice(longest + 1);\n  }\n\n  return res.join(\"\\r\");\n}\n\n/**\n * Safely escape carrigage returns like a terminal.\n * This allows to escape carrigage returns while allowing future output to be appended\n * without loosing information.\n * Use this as a intermediate escape step if your stream hasn't completed yet.\n * @param {string} txt - String to escape.\n * @return {string}    - Escaped string.\n */\nfunction escapeCarriageReturnSafe(txt) {\n  if (!txt) return \"\";\n  if (!/\\r/.test(txt)) return txt;\n  if (!/\\n/.test(txt)) return escapeSingleLineSafe(txt);\n  txt = txt.replace(/\\r+\\n/gm, \"\\n\"); // \\r followed by \\n --> newline\n  var idx = txt.lastIndexOf(\"\\n\");\n\n  return (\n    escapeCarriageReturn(txt.slice(0, idx)) +\n    \"\\n\" +\n    escapeSingleLineSafe(txt.slice(idx + 1))\n  );\n}\n\nmodule.exports = escapeCarriageReturn;\nmodule.exports.escapeCarriageReturn = escapeCarriageReturn;\nmodule.exports.escapeCarriageReturnSafe = escapeCarriageReturnSafe;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n"],"names":["RawLogContent","React","logData","location","isLoading","isVisible","downloadUrl","contentContainer","timer","showScrollToTop","setShowScrollToTop","cancelHideWarning","current","clearTimeout","hideWarning","scheduleHideWarning","window","setTimeout","content","isTruncated","shouldTruncate","nextLine","indexOf","truncated","length","slice","warning","FileWarning","Group","direction","spacing","alignItems","Icon","name","color","Colors","href","download","FileContainer","ScrollToast","ScrollToTop","onClick","scrollToTop","onMouseOver","onMouseOut","FileContent","RelativeContainer","LogContent","isSelected","onScrollUp","position","onScrollDown","ref","LoadingContainer","Spinner","purpose","FileFooter","TextEncoder","encode","ScrollContainer","container","lastScroll","onScroll","props","scrollHeight","scrollTop","offsetHeight","this","scrollToBottom","focus","addEventListener","_props","_state","shouldScroll","node","className","style","outline","tabIndex","ContentContainer","LineNumbers","Content","SolarizedColors","linkify","useClasses","justifyContent","matches","match","count","LineNumberContainer","Array","from","_","i","String","styled","createGlobalStyle","FontFamily","CapturedOrExternalLogPanel","externalUrl","Box","flex","gap","background","minHeight","target","rel","textDecoration","marginLeft","marginRight","size","marginTop","logKey","CapturedLogPanel","MAX_STREAMING_LOG_BYTES","s","merge","a","b","reducer","state","action","type","cursor","stdout","stderr","metadata","initialState","CapturedLogSubscription","onLogData","useSubscription","CAPTURED_LOGS_SUBSCRIPTION","fetchPolicy","variables","onSubscriptionData","subscriptionData","data","capturedLogs","gql","CAPTURED_LOGS_METADATA_QUERY","CapturedLogsSubscriptionProvider","children","dispatch","logKeyString","JSON","stringify","CapturedLogsQueryProvider","useQuery","CAPTURED_LOGS_QUERY","notifyOnNetworkStatusChange","limit","pollInterval","onCompleted","stopPolling","startPolling","visibleIOType","onSetDownloadUrl","rootServerURI","AppContext","WebSocketContext","availability","disabled","queryResult","visibleDownloadUrl","capturedLogsMetadata","stdoutDownloadUrl","stderrDownloadUrl","startsWith","stdoutLocation","undefined","stderrLocation","Component","display","flexDirection","INSTANCE_SUPPORTS_CAPTURED_LOGS","__typename","path","stepKey","log","COMPUTE_LOGS_SUBSCRIPTION","ComputeLogPanel","runId","stepKeys","computeLogFileKey","ioType","setComputeLogUrl","ComputeLogsPanelWithKey","height","resolveDownloadUrl","x","ComputeIoType","computeLogs","useComputeLogs","ContentWrapper","emptyCounts","DEBUG","INFO","WARNING","ERROR","CRITICAL","EVENT","queuedNodes","queued","map","ii","clientsideKey","timestamp","nodes","counts","forEach","level","logNodeLevel","loading","hasMore","useLogsProviderWithSubscription","client","useApolloClient","queue","syncPipelineStatusToApolloCache","status","local","readFragment","fragmentName","fragment","PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT","id","toWrite","RunStatus","canTerminate","writeFragment","throttledSetNodes","throttle","queuedLogs","queuedMessages","flatMap","messages","lastLog","hasMorePastEvents","nextPipelineStatus","reversed","reverse","pipelineStatusFromMessages","lostWebsocket","WebSocket","CLOSED","currentInitialCursorRef","currentInitialCursor","subscriptionComponent","SubscriptionComponent","logs","pipelineRunLogs","push","requestAnimationFrame","allNodes","PIPELINE_RUN_LOGS_SUBSCRIPTION","LogsProviderWithSubscription","LogsProviderWithQuery","RUN_LOGS_QUERY","pipelineRunOrError","logsForRun","run","events","LogsProvider","RUN_DAGSTER_RUN_EVENT_FRAGMENT","ExecutionStateDot","IStepState","LogFilterSelect","options","onSetFilter","showMenu","setShowMenu","levels","Object","keys","enabledCount","values","reduce","accum","enabled","onChange","e","checked","Popover","isOpen","placement","canEscapeKeyClose","onInteraction","nextOpenState","Menu","width","optionForLevel","label","tagName","shouldDismissPopover","text","MenuCheckbox","compactNumber","FilterButton","icon","rightIcon","Button","Checkbox","shown","highlight","fuseOptions","threshold","LogsFilterInput","value","suggestionProviders","inputRef","perProvider","provider","token","fuse","Fuse","all","providerKeys","filter","empty","buildSuggestions","queryString","split","results","search","result","item","toLowerCase","includes","tokens","toLocaleLowerCase","trim","suggestions","onSelectSuggestion","suggestion","lastIndex","lastIndexOf","keep","useSuggestionsForString","numResults","highlightedResult","onInputChange","onSelect","onClear","Results","ResultItem","isHighlight","FilterInput","placeholder","spellCheck","autoCorrect","onFocus","onBlur","onKeyDown","key","lastResult","preventDefault","rightElement","ClearButton","C","element","scrollIntoView","block","Item","onMouseDown","TextInput","DELIMITER","levelsToQuery","sort","join","DefaultQuerystring","steps","DefaultLogLevels","hideNonMatches","focusedTime","decodeRunPageFilters","qs","logValues","Number","providers","getRunFilterProviders","sinceTime","logQuery","tokenizedValueFromString","toUpperCase","LogLevel","encodeRunPageFilters","logQueryTokenStrings","v","LogType","EnabledRunLogLevelsKey","validateLogLevels","json","isArray","validLevels","Set","has","LogsToolbar","logType","onSetLogType","onSetComputeLogKey","computeLogUrl","useStateWithStorage","initialComputeLogType","setInitialComputeLogType","activeItems","structured","setComputeLogType","margin","right","ButtonGroup","buttons","tooltip","StructuredLogToolbar","ComputeLogToolbar","resolveState","logCapture","some","every","logCaptureSteps","extractLogCaptureStepsFromLegacySteps","isValidStepSelection","fileKeyText","fileKey","captureInfo","pid","Select","items","itemPredicate","query","itemRenderer","handleClick","active","modifiers","activeItem","onItemSelect","Tabs","selectedTabId","title","Tooltip","DownloadLink","IconWrapper","copyIcon","setCopyIcon","logQueryString","setQueryString","copyToClipboard","useCopyToClipboard","setStoredLogLevels","selectedStep","find","filterText","onChangeFilter","allEnabledFilters","add","delete","filterOptions","fromEntries","segments","NonMatchCheckbox","event","currentTarget","left","minWidth","Run","storedLogLevels","defaults","useQueryPersistedState","decode","useQueryPersistedLogFilter","logsFilter","setLogsFilter","queryKey","selection","selectionQuery","setSelectionQuery","runStatusFavicon","el","document","querySelector","previousHref","getAttribute","setAttribute","useDocumentTitle","isHiddenAssetGroupJob","pipelineName","onShowStateDetails","errorNode","showCustomAlert","body","PythonErrorInfo","error","onSetSelectionQuery","RunContext","RunMetadataProvider","RunWithData","onSetLogsFilter","matchingComputeLogKeyFromStepKey","matching","info","onLaunch","useJobReExecution","splitPanelContainer","supportsCapturedLogs","instance","hasCapturedLogManager","useSupportsCapturedLogs","queryLogType","setQueryLogType","setComputeLogFileKey","logTypeFromQuery","stepKeysJSON","parse","runtimeGraph","executionPlan","toGraphQueryItems","selectionStepKeys","filterByQuery","n","logFileKeys","selectedLogKey","logFileKey","logsFilterStepKeys","onClickStep","evt","newSelected","index","filterForExactStep","shiftKey","k","splice","matchingLogKey","logCaptureInfo","SplitPanelContainer","axis","identifier","firstInitialPercent","firstMinSize","first","ErrorBoundary","region","GanttChart","mode","GanttChartMode","toolbarActions","RunActionButtons","graph","onSetSelection","NonIdealState","gantt","second","LogsContainer","lt","LogsScrollingTable","filterStepKeys","filterKey","RunRoot","useTrackPageView","useParams","RUN_ROOT_QUERY","partialRefetch","snapshotID","pipelineSnapshotId","repoMatch","useRepositoryForRunWithParentSnapshot","repoAddress","buildRepoAddress","repository","repositoryLocation","isJob","isThisThingAJob","overflow","zIndex","PageHeader","fontFamily","fontSize","tags","RunStatusTag","AssetKeyTagCollection","assetKeys","assetKeysForRun","clickableTags","Tag","PipelineReference","pipelineHrefContext","snapshotId","assets","wrap","startTime","interactionKind","padding","RunDetails","TimestampDisplay","timeFormat","showSeconds","showTimezone","updateTime","endTime","fontVariantNumeric","formatElapsedTime","Date","now","RunById","vertical","description","RUN_PAGE_FRAGMENT","compactFormatter","Intl","NumberFormat","navigator","language","compactDisplay","notation","numberFormatter","num","format","BezierEasing","require","animations","ease","easeIn","easeOut","easeInOut","linear","noop","makeAggregateRaf","frontBuffer","backBuffer","frameToken","next","cancel","clearAll","clear","cancelAnimationFrame","callback","renderFrame","t","module","exports","source","start","create","diff","easing","console","warn","step","done","scheduler","bind","cb","Error","getScheduler","previousAnimationId","durationInMs","duration","durationInFrames","Math","max","frame","loop","setValues","sharedScheduler","_createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","prototype","ANSI_COLORS","Anser","TypeError","_classCallCheck","fg","bg","fg_truecolor","bg_truecolor","bright","txt","escapeForHtml","ansiToHtml","ansiToJson","ansiToText","PALETTE_COLORS","j","r","g","_r","_g","_b","_i","replace","str","process","clearLine","markup","_this","raw_text_chunks","first_chunk","shift","test","color_chunks","chunk","processChunk","processChunkJson","unshift","remove_empty","c","isEmpty","use_classes","decoration","was_processed","nums","self","num_str","parseInt","isNaN","is_foreground","palette_index","klass","setupPalette","_this2","jsonChunk","styles","classes","render_data","fragments","hasOwnProperty","__importDefault","mod","__esModule","__importStar","call","anser_1","escape_carriage_1","LINK_REGEX","convertBundleIntoReact","bundle","backgroundColor","createStyle","classNames","substring","createClass","createElement","words","word","input","escapeCarriageReturn","default","ansiToJSON","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","calcBezier","aT","getSlope","LinearEasing","mX1","mY1","mX2","mY2","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","abs","binarySubdivide","base","exec","insert","findLongestString","arr","longest","escapeSingleLineSafe","res","escapeCarriageReturnSafe","idx","baseIndexOf","array","comparator","predicate","fromIndex","fromRight","baseFindIndex","baseIsNaN","strictIndexOf","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","iteratee","isCommon","seen","set","outer","computed","seenIndex","baseIsEqual","other","debounce","isObject","func","wait","leading","trailing","baseUniq"],"sourceRoot":""}