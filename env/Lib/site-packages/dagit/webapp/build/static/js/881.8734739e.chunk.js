"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[881],{47072:function(e,t,n){n.d(t,{hj:function(){return $},ZW:function(){return de},hS:function(){return _.hS},Fu:function(){return ue},kZ:function(){return J}});var r,i=n(59019),s=n(95764),o=n(19065),a=n(922),l=n(50346),c=n(8803),d=n(32030),u=n(6466),p=n(7838),h=n(75497),m=n(17912),f=n(34595),v=n(8546),x=n(89646),g=n(90428),y=n.n(g),w=n(325),j=n(74549),E=n(52848),b=n(25496),k=n(76341),T=n(99738),C=n(3148),S=n(40355),N=n(45302),R=n(65164),_=n(57676),I=n(92334),L=n(39151),Z=n(87011),M=n(32289),O=w.memo((function(e){var t=e.value,n=e.onChange,r=e.hideTimedMode,i=[{id:_.hS.FLAT,icon:"gantt_flat",tooltip:"Flat view"},{id:_.hS.WATERFALL,icon:"gantt_waterfall",tooltip:"Waterfall view"}];r||i.push({id:_.hS.WATERFALL_TIMED,icon:"timer",tooltip:"Timed view"});var s=w.useMemo((function(){return new Set([t])}),[t]),o=w.useCallback((function(e){return n(e)}),[n]);return(0,M.jsx)(Z.h,{activeItems:s,buttons:i,onClick:o})})),P=function(e){return"".concat(Math.round(e/1e3/60),"m")},D=function(e){return"".concat((e/1e3).toFixed(0),"s")},F=function(e){return"".concat((e/1e3).toFixed(1),"s")},A=[{tickIntervalMs:500,tickLabels:F},{tickIntervalMs:1e3,tickLabels:D},{tickIntervalMs:5e3,tickLabels:D},{tickIntervalMs:1e4,tickLabels:D},{tickIntervalMs:3e4,tickLabels:D},{tickIntervalMs:6e4,tickLabels:D},{tickIntervalMs:12e4,tickLabels:P},{tickIntervalMs:3e5,tickLabels:P},{tickIntervalMs:6e5,tickLabels:P},{tickIntervalMs:12e5,tickLabels:P},{tickIntervalMs:36e5,tickLabels:P},{tickIntervalMs:216e5,tickLabels:P}],U=function(e){var t=e.scale,n=e.viewport,r=e.nowMs,i=e.startMs,s=e.highlightedMs,o=e.layoutSize,a="translate(".concat(_.Nw-n.left,"px)"),l=[],c=[],d=t,u=A.find((function(e){return e.tickIntervalMs*d>80}));if(u)for(var p=u.tickIntervalMs,h=u.tickLabels,m=p*d,f=Math.floor(n.left/m)*m,v=f;v<f+n.width;v+=m)if(!(v-n.left<10)){var x=v/d,g="".concat(x.toFixed(2)),y=h(x);c.push((0,M.jsx)("div",{className:"line",style:{left:v,transform:a}},g)),l.push((0,M.jsx)("div",{className:"tick",style:{left:v-28,transform:a},children:y},g))}return(0,M.jsxs)(z,{children:[(0,M.jsxs)(V,{children:[l,2===s.length&&(0,M.jsx)("div",{className:"tick duration",style:{left:(s[0]-i)*d+2,width:(s[1]-s[0])*d-2,transform:a},children:(0,k.fv)(s[1]-s[0])},"highlight-duration"),s.map((function(e,t){var r=(e-i)*d,s=0===t&&r>56+n.left?-55:0;return(0,M.jsx)("div",{className:"tick highlight",style:{left:r+s,transform:a},children:F(e-i)},"highlight-".concat(t))}))]}),(0,M.jsxs)(K,{style:{width:n.width,height:n.height},children:[c,s.map((function(e,t){return(0,M.jsx)("div",{className:"line highlight",style:{left:(e-i)*d+(0===t?-1:0),transform:a}},"highlight-".concat(t))})),r>i&&(0,M.jsx)("div",{className:"fog-of-war",style:{left:(r-i)*d,width:Math.max(o.width,n.width)-(r-i)*d+100,transform:a}})]})]})},z=a.ZP.div.withConfig({displayName:"GanttChartTimescale__TimescaleContainer",componentId:"qye3mp-0"})(["width:100%;& .tick{position:absolute;padding-top:7px;width:","px;height:","px;box-sizing:border-box;transition:left ","ms linear,width ","ms linear;text-align:center;}& .tick.duration{color:",";background:",";box-shadow:0 1px 1px rgba(0,0,0,0.2);}& .tick.highlight{color:white;height:","px;background:",";}& .line{position:absolute;border-left:1px solid #f0f0f0;transition:left ","ms linear;top:0px;bottom:0px;}& .line.highlight{border-left:2px solid ",";z-index:1111;top:-1px;}& .fog-of-war{position:absolute;background:",";transition:left ","ms linear;top:0px;bottom:0px;width:100%;}"],56,32,_.V8,_.V8,p.w.Gray500,p.w.Gray100,34,p.w.Gray900,_.V8,p.w.Gray900,p.w.Gray50,_.V8),V=a.ZP.div.withConfig({displayName:"GanttChartTimescale__TimescaleTicksContainer",componentId:"qye3mp-1"})(["height:","px;z-index:4;position:relative;background:",";display:flex;color:",";font-size:13px;font-family:",";box-shadow:inset 0 -1px ",";overflow:hidden;"],32,p.w.White,p.w.Gray500,v.b.monospace,p.w.KeylineGray),K=a.ZP.div.withConfig({displayName:"GanttChartTimescale__TimescaleLinesContainer",componentId:"qye3mp-2"})(["z-index:0;top:","px;left:0;position:absolute;pointer-events:none;overflow:hidden;"],32),G=n(41080),H=n(36172),W=n(42413),q=w.memo((function(e){return(0,M.jsxs)(X,{$fillColor:p.w.Gray600,className:"bp4-slider bp4-slider-unlabeled",onMouseDown:function(t){var n,r=t.currentTarget.closest(".bp4-slider").getBoundingClientRect();n=t.target instanceof HTMLElement&&t.target.classList.contains("bp4-slider-handle")?t.pageX:r.left+e.value/100*r.width;var i=function(t){var i=e.value+(t.pageX-n)*(100/r.width);e.onChange(Math.max(0,Math.min(100,i)))};document.addEventListener("mousemove",i),document.addEventListener("mouseup",(function e(t){i(t),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}))},children:[(0,M.jsxs)("div",{className:"bp4-slider-track",children:[(0,M.jsx)("div",{className:"bp4-slider-progress",style:{left:0,right:0,top:0}}),(0,M.jsx)("div",{className:"bp4-slider-progress bp4-intent-primary",style:{left:0,right:"".concat(100-e.value,"%"),top:0}})]}),(0,M.jsx)("div",{className:"bp4-slider-axis"}),(0,M.jsx)("span",{className:"bp4-slider-handle",style:{left:"calc(".concat(e.value,"% - 8px)")},tabIndex:0})]})})),X=a.ZP.div.withConfig({displayName:"ZoomSlider__ZoomSliderContainer",componentId:"yxtf4j-0"})(["",""],W.kp),B=n(76314),Y=function(e){return e===_.hS.FLAT||e===_.hS.WATERFALL||e===_.hS.WATERFALL_TIMED?e:_.hS.WATERFALL_TIMED},Q="gantt-highlight-time";function J(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];clearTimeout(r),t?r=setTimeout((function(){return J(e,!1)}),100):document.dispatchEvent(new CustomEvent(Q,{detail:e}))}var $=function(e){var t=e.graph,n=e.onSetSelection,r=e.options,i=e.selection,a=e.toolbarActions,c=(0,B.U)("GanttChartModePreference",Y),d=(0,o.Z)(c,2),u=d[0],p=d[1],h=w.useState((function(){return(0,s.Z)((0,s.Z)((0,s.Z)({},_.WN),r),{},{mode:u})})),m=(0,o.Z)(h,2),f=m[0],v=m[1],x=w.useRef(null),g=w.useRef(null),y=(0,b.V)(t,i.query),j=w.useMemo((function(){return{nodes:f.hideUnselectedSteps?y.all:t,mode:f.mode}}),[t,y.all,f.hideUnselectedSteps,f.mode]),E=w.useMemo((function(){var e=function(e){return e.map((function(e){return e.name})).join(",")};return g.current&&e(g.current.nodes)===e(j.nodes)&&g.current.mode===j.mode||(x.current=(0,L.tc)(j),g.current=j),x.current}),[j]),k=w.useCallback((function(e){v((function(t){return(0,s.Z)((0,s.Z)({},t),e)}))}),[]),T=w.useCallback((function(e){k({mode:e}),p(e)}),[p,k]),C=w.useCallback((function(e){n(e||"*")}),[n]),S=w.useCallback((function(e){var t="*".concat(e,"*");C(i.query!==t?t:"*")}),[C,i.query]);return(0,M.jsxs)(oe,{children:[(0,M.jsxs)(H.qn,{children:[(0,M.jsx)(O,{value:f.mode,onChange:T,hideTimedMode:f.hideTimedMode}),f.mode===_.hS.WATERFALL_TIMED&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(H.lX,{}),(0,M.jsx)("div",{style:{width:200},children:(0,M.jsx)(q,{value:f.zoom,onChange:function(e){return k({zoom:e})}})}),(0,M.jsx)(H.lX,{}),(0,M.jsx)(l.X,{style:{marginBottom:0},label:"Hide not started steps",checked:f.hideWaiting,onChange:function(e){return k({hideWaiting:e.target.checked})}})]}),(0,M.jsx)("div",{style:{flex:1}}),a]}),(0,M.jsx)(ee,(0,s.Z)((0,s.Z)({},e),{},{options:(0,s.Z)({},f),layout:E,graph:t,onUpdateQuery:C,onDoubleClickStep:S,onChange:function(){return k({hideUnselectedSteps:!f.hideUnselectedSteps})}}))]})},ee=function(e){var t=(0,c.S)(),n=t.viewport,r=t.containerProps,a=t.onMoveToViewport,f=w.useState(null),v=(0,o.Z)(f,2),x=v[0],g=v[1],y=w.useState(null),j=(0,o.Z)(y,2),b=j[0],k=j[1],C=w.useState((function(){return e.overrideNowTime||Date.now()})),N=(0,o.Z)(C,2),I=N[0],Z=N[1],O=e.options,P=e.metadata,D=e.selection,F=w.useContext(E.I).rootServerURI,A=w.useContext(T.DN),z=A.availability,V=A.disabled,K=A.status,H=!V&&"available"===z&&K===WebSocket.CLOSED,W=_.vL;n.width&&P&&P.startedPipelineAt&&(W=Math.max(1,n.width-150)/Math.max(1,I-P.startedPipelineAt));var q=Math.exp(Math.log(W)+(Math.log(_.Fv)-Math.log(W))/100*O.zoom);w.useEffect((function(){if(0!==q&&!H){if(null===P||void 0===P||!P.exitedAt){var e=Math.max(_.V8,2/q),t=Date.now(),n=setTimeout((function(){return Z(t)}),e-(t-I));return function(){return clearTimeout(n)}}I!==P.exitedAt&&Z(P.exitedAt)}}),[q,I,H,P]),w.useEffect((function(){var e=function(e){return k(e.detail)};return document.addEventListener(Q,e),function(){return document.removeEventListener(Q,e)}}));var X=(0,L.zI)(e.layout,O,P||S.PG,q,I),B={width:Math.max.apply(Math,[0].concat((0,i.Z)(X.boxes.map((function(e){return e.x+e.width+_.gJ}))))),height:Math.max.apply(Math,[0].concat((0,i.Z)(X.boxes.map((function(e){return _.$T+e.y*_.e+_.j})))))};w.useEffect((function(){var e=X.boxes.find((function(e){return D.keys.includes(e.node.name)}));if(e){var t=ne(e),r=(t.maxX+t.minX)/2-n.width/2,i=(t.maxY+t.minY)/2-n.height/2;a({left:r,top:i},!0)}}),[D]);var Y=[];if(e.focusedTime&&Y.push(e.focusedTime),b)Y.push(b);else if(D.keys.length>0){var J=D.keys.map((function(e){return null===P||void 0===P?void 0:P.steps[e]})).filter((function(e){return void 0!==e})).sort((function(e,t){return e.start&&t.start?e.start-t.start:0})),$=J[0],ee=J[J.length-1];null!==$&&void 0!==$&&$.start&&Y.push($.start),null!==ee&&void 0!==ee&&ee.end&&Y.push(ee.end)}var re=n.width>0,ie=(0,M.jsxs)(M.Fragment,{children:[O.mode===_.hS.WATERFALL_TIMED&&re&&(0,M.jsx)(U,{scale:q,viewport:n,layoutSize:B,startMs:(null===P||void 0===P?void 0:P.startedPipelineAt)||0,highlightedMs:Y,nowMs:I}),(0,M.jsx)("div",(0,s.Z)((0,s.Z)({style:{overflow:"scroll",flex:1}},r),{},{children:(0,M.jsx)("div",{style:(0,s.Z)({position:"relative",marginBottom:70},B),children:re&&(0,M.jsx)(te,{options:O,metadata:P||S.PG,layout:X,hoveredStep:x,focusedSteps:D.keys,viewport:n,setHoveredNodeName:g,onClickStep:e.onClickStep,onDoubleClickStep:e.onDoubleClickStep})})})),(0,M.jsxs)(le,{children:[H?(0,M.jsx)(ae,{children:(0,M.jsx)(d.x,{flex:{justifyContent:"space-around"},margin:{bottom:12},children:(0,M.jsxs)(u.Z,{direction:"row",spacing:8,background:"".concat(p.w.Yellow500,"26"),padding:{vertical:8,horizontal:12},alignItems:"flex-start",children:[(0,M.jsx)(h.JO,{name:"warning",color:p.w.Yellow700}),(0,M.jsxs)("div",{style:{maxWidth:"400px",whiteSpace:"normal",overflow:"hidden"},children:[(0,M.jsx)("strong",{children:"Lost connection to Dagit server."}),(0,M.jsx)("span",{children:" Verify that your instance is responding to requests at ".concat(F," and reload the page.")})]})]})})}):null,(0,M.jsxs)(ce,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,M.jsx)(R.j,{items:e.graph,value:e.selection.query,placeholder:"Type a step subset",onChange:e.onUpdateQuery,presets:P?(0,L.un)(P,X):void 0,className:D.keys.length>0?"has-step":""}),(0,M.jsx)(l.X,{checked:O.hideUnselectedSteps,label:"Hide unselected steps",onChange:e.onChange})]})]})]});return P?(0,M.jsx)(m.OS,{identifier:"gantt-split",axis:"horizontal",first:ie,firstInitialPercent:70,second:(0,M.jsx)(G.V,(0,s.Z)((0,s.Z)({},e),{},{nowMs:I,metadata:P,onHighlightStep:function(e){return g(e)}}))}):ie},te=function(e){var t=e.viewport,n=e.layout,r=e.hoveredStep,i=e.focusedSteps,o=e.metadata,a=e.options,l=[],c=function(e){return e.minX<t.left+t.width&&e.maxX>t.left&&e.minY<t.top+t.height&&e.maxY>t.top},d={};return a.mode!==_.hS.FLAT&&n.boxes.forEach((function(e){e.children.forEach((function(t,a){var u,p=re(e,t);if(c(p)){var h=!n.boxes.includes(t),m=!!o&&!(null!==(u=o.steps[t.node.name])&&void 0!==u&&u.state),f=d[p.maxX]||0;d[p.maxX]=f+1,l.push((0,M.jsx)(ie,(0,s.Z)({darkened:((null===i||void 0===i?void 0:i.includes(e.node.name))||r)===e.node.name||((null===i||void 0===i?void 0:i.includes(t.node.name))||r)===t.node.name,dotted:h||m,depNotDrawn:h,depIdx:f},p),"".concat(e.key,"-").concat(t.key,"-").concat(a)))}}))})),n.boxes.forEach((function(t){var n=ne(t),d=t.width===_.jZ;c(n)&&l.push((0,M.jsxs)("div",{"data-tooltip":t.node.name,onClick:function(n){return e.onClickStep(t.node.name,n)},onDoubleClick:function(){return e.onDoubleClickStep(t.node.name)},onMouseEnter:function(){return e.setHoveredNodeName(t.node.name)},onMouseLeave:function(){return e.setHoveredNodeName(null)},className:"\n            chart-element\n            ".concat(d?"dot":"box","\n            ").concat(i.includes(t.node.name)&&"focused","\n            ").concat(r===t.node.name&&"hovered","\n            ").concat((0,I.IL)(t.node.name)&&"dynamic"),style:(0,s.Z)({left:n.minX,top:n.minY+(d?_.t3:_.XL),width:d?_.D6:t.width},(0,L.HB)(t.state,{metadata:o,options:a})),children:[t.state===S.TN.RUNNING?(0,M.jsx)(f.$,{purpose:"body-text"}):void 0,se(t)]},t.key))})),a.mode===_.hS.WATERFALL_TIMED&&n.markers.map((function(e,t){return{marker:e,idx:t,bounds:ne(e)}})).filter((function(e){var t=e.bounds;return c(t)})).sort((function(e,t){return e.bounds.minX-t.bounds.minX})).forEach((function(e){var t=e.marker,n=e.bounds,r=e.idx,i=t.width===_.jZ;l.push((0,M.jsx)("div",{"data-tooltip":t.key,className:"\n            chart-element\n            ".concat(i?"marker-dot":"marker-whiskers"),style:{left:n.minX,top:n.minY+(i?_.t3:_.XL),width:i?_.D6:t.width},children:(0,M.jsx)("div",{})},r))})),(0,M.jsx)(M.Fragment,{children:l})},ne=function(e){return{minX:e.x,minY:_.$T+e.y*_.e,maxX:e.x+e.width,maxY:_.$T+e.y*_.e+_.e}},re=function(e,t){if(t.y<e.y){var n=[t,e];e=n[0],t=n[1]}var r=e.width===_.jZ?_.t3+_.D6/2:_.e/2,i=t.width===_.jZ,s=i?_.t3+_.D6/2:_.e/2,o=t.y===e.y;return{minX:Math.min(e.x+e.width,t.x+t.width),minY:_.$T+(e.y*_.e+r),maxX:o?Math.max(e.x,t.x):Math.max(e.x+e.width/2,t.x+(i?_.D6:t.width)/2),maxY:o?_.$T+t.y*_.e+s:_.$T+t.y*_.e+(i?_.t3:_.XL)}},ie=w.memo((function(e){var t=e.minX,n=e.minY,r=e.maxX,i=e.maxY,s=e.dotted,o=e.darkened,a=e.depIdx,l=e.depNotDrawn,c="".concat(_.v2,"px ").concat(s?"dotted":"solid"," ").concat(o?p.w.Gray700:p.w.Gray300),d=r+a%10*_.v2;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"line",style:{height:1,left:t,width:l?50:d-t,top:n-1,borderTop:c,zIndex:o?100:1}}),n!==i&&!l&&(0,M.jsx)("div",{className:"line",style:{width:1,left:d,top:n-_.v2/2,height:i-n,borderRight:c,zIndex:o?100:1}})]})}),y());function se(e){if(!(e.width<=_.Bw)){var t=7+(e.state===S.TN.RUNNING?16:0),n=(e.width-t)/6.2;return(0,k.R9)(e.node.name,{maxLength:n})}}var oe=a.ZP.div.withConfig({displayName:"GanttChart__GanttChartContainer",componentId:"sc-5c9vwn-0"})(["height:100%;position:relative;display:flex;flex-direction:column;z-index:2;user-select:none;background:",";.line{position:absolute;user-select:none;pointer-events:none;transition:top ","ms linear,left ","ms linear,width ","ms linear,height ","ms linear;}.chart-element{font-size:12px;transition:top ","ms linear,left ","ms linear;display:inline-block;position:absolute;color:white;overflow:hidden;user-select:text;z-index:2;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;}.dot{width:","px;height:","px;border:1px solid transparent;border-radius:","px;}.box{height:","px;padding:3px;padding-right:1px;border:1px solid transparent;border-radius:2px;white-space:nowrap;font-family:",";font-size:12.5px;font-weight:700;line-height:15px;transition:top ","ms linear,left ","ms linear,width ","ms linear,height ","ms linear;&.focused{border:1px solid ",";box-shadow:0 0 0 2px ",";}&.hovered{border:1px solid ",";}&.dynamic{filter:brightness(125%);}","{display:inline-block;vertical-align:text-bottom;padding-right:4px;}}.marker-dot{width:","px;height:","px;border:1px solid rgb(27,164,206);border-radius:","px;}.marker-whiskers{display:inline-block;position:absolute;height:","px;background:rgba(27,164,206,0.09);border-left:1px solid rgba(27,164,206,0.6);border-right:1px solid rgba(27,164,206,0.6);transition:top ","ms linear,left ","ms linear,width ","ms linear;& > div{border-bottom:1px dashed rgba(27,164,206,0.6);height:","px;}}"],p.w.White,_.V8,_.V8,_.V8,_.V8,_.V8,_.V8,_.D6,_.D6,_.D6/2,_.e-2*_.XL,v.b.monospace,_.V8,_.V8,_.V8,_.V8,p.w.Gray900,p.w.Yellow500,p.w.Gray800,f.Z,_.D6,_.D6,_.D6/2,_.e-2*_.XL,_.V8,_.V8,_.V8,(_.e-2*_.XL)/2),ae=a.ZP.div.withConfig({displayName:"GanttChart__WebsocketWarning",componentId:"sc-5c9vwn-1"})(["position:absolute;bottom:100%;color:",";width:100%;"],p.w.Yellow700),le=a.ZP.div.withConfig({displayName:"GanttChart__GraphQueryInputContainer",componentId:"sc-5c9vwn-2"})(["z-index:2;position:absolute;bottom:20px;left:50%;transform:translateX(-50%);white-space:nowrap;"]),ce=(0,a.ZP)(d.x).withConfig({displayName:"GanttChart__FilterInputsBackgroundBox",componentId:"sc-5c9vwn-3"})(["background:radial-gradient("," 0%,rgba(255,255,255,0) 100%);padding:15px 15px 0px 15px;"],p.w.Gray50),de=function(e){var t=e.runId;return(0,M.jsxs)(oe,{children:[(0,M.jsx)(H.qn,{}),(0,M.jsx)(m.OS,{identifier:"gantt-split",axis:"horizontal",first:(0,M.jsx)("div",{style:{margin:"auto",marginTop:100},children:(0,M.jsx)(f.$,{purpose:"section"})}),firstInitialPercent:70,second:(0,M.jsx)(G.V,{metadata:S.PG,selection:{keys:[],query:"*"},runId:t,nowMs:0})})]})},ue=function(e){var t=e.run;return(0,M.jsxs)(oe,{children:[(0,M.jsx)(H.qn,{style:{justifyContent:"flex-end"},children:(0,M.jsx)(C.jT,{run:t})}),(0,M.jsx)(m.OS,{identifier:"gantt-split",axis:"horizontal",first:(0,M.jsx)(x.t,{icon:"arrow_forward",title:"Run queued",description:"This run is queued for execution and will start soon.",action:(0,M.jsx)(j.rU,{to:(0,N.it)([{token:"status",value:"QUEUED"}]),children:"View queued runs"})}),firstInitialPercent:70,second:(0,M.jsx)(G.V,{metadata:S.PG,selection:{keys:[],query:"*"},runId:t.id,nowMs:0})})]})}},36172:function(e,t,n){n.d(t,{qn:function(){return o},KC:function(){return a},lX:function(){return l}});var r=n(922),i=n(7838),s=n(47387),o=r.ZP.div.withConfig({displayName:"VizComponents__OptionsContainer",componentId:"sc-1s9sbos-0"})(["min-height:56px;display:flex;align-items:center;padding:5px 12px 5px 24px;border-bottom:1px solid ",";background:",";flex-shrink:0;flex-wrap:wrap;z-index:3;","{margin-top:0;gap:8px;@media (max-width:1100px){& .hideable-button-text{display:none;}& div[role='img']{margin:0;}}}"],i.w.KeylineGray,i.w.White,s.Rp),a=r.ZP.div.withConfig({displayName:"VizComponents__OptionsDivider",componentId:"sc-1s9sbos-1"})(["width:30px;height:25px;"]),l=r.ZP.div.withConfig({displayName:"VizComponents__OptionsSpacer",componentId:"sc-1s9sbos-2"})(["width:30px;"])},41302:function(e,t,n){n.d(t,{J:function(){return u},$:function(){return p}});var r,i=n(99500),s=n(59019),o=n(47427),a=n(3159),l=n(69305),c=n(40355),d=n(92334),u=function(e,t){var n,r={},i=Object.keys(t),a=(0,o.Z)(e.steps);try{for(a.s();!(n=a.n()).done;){var u=n.value;if(u.kind===l.dWX.UNRESOLVED_MAPPED){var p=(0,d.mO)(u.key,i);if(!u.inputs.every((function(e){return e.dependsOn.every((function(e){var n;return c.TN.SUCCEEDED===(null===(n=t[e.key])||void 0===n?void 0:n.state)}))}))&&0===p.length){r[u.key]=[u.key];continue}r[u.key]=[].concat((0,s.Z)(p),[u.key])}}}catch(U){a.e(U)}finally{a.f()}var h,m={},f=(0,o.Z)(e.steps);try{for(f.s();!(h=f.n()).done;){var v,x=h.value,g=r[x.key]?r[x.key]:[x.key],y=(0,o.Z)(g);try{for(y.s();!(v=y.n()).done;){var w=v.value;m[w]={name:w,inputs:[],outputs:[]}}}catch(U){y.e(U)}finally{y.f()}}}catch(U){f.e(U)}finally{f.f()}var j,E=(0,o.Z)(e.steps);try{for(E.s();!(j=E.n()).done;){var b,k=j.value,T=r[k.key]?r[k.key]:[k.key],C=(0,o.Z)(T);try{for(C.s();!(b=C.n()).done;){var S,N=b.value,R=(0,o.Z)(k.inputs);try{for(R.s();!(S=R.n()).done;){var _=S.value,I={dependsOn:[]};m[N].inputs.push(I);var L,Z=(0,o.Z)(_.dependsOn);try{for(Z.s();!(L=Z.n()).done;){var M=L.value,O=[];O=k.kind===l.dWX.UNRESOLVED_COLLECT?r[M.key]||[M.key]:[M.kind===l.dWX.UNRESOLVED_MAPPED?(0,d.os)(M.key,N):M.key];var P,D=(0,o.Z)(O);try{for(D.s();!(P=D.n()).done;){var F=P.value;if(m[F]){I.dependsOn.push({solid:{name:F}});var A=m[F].outputs[0];A||(A={dependedBy:[]},m[F].outputs.push(A)),A.dependedBy.push({solid:{name:N}})}}}catch(U){D.e(U)}finally{D.f()}}}catch(U){Z.e(U)}finally{Z.f()}}}catch(U){R.e(U)}finally{R.f()}}}catch(U){C.e(U)}finally{C.f()}}}catch(U){E.e(U)}finally{E.f()}return Object.values(m)},p=(0,a.Ps)(r||(r=(0,i.Z)(["\n  fragment ExecutionPlanToGraphFragment on ExecutionPlan {\n    steps {\n      key\n      kind\n      inputs {\n        dependsOn {\n          key\n          kind\n        }\n      }\n    }\n  }\n"])))},12244:function(e,t,n){n.d(t,{x:function(){return te},S:function(){return ee}});var r,i,s=n(57994),o=n(98907),a=n(64428),l=n(28463),c=n(99500),d=n(95764),u=n(922),p=n(3159),h=n(7838),m=n(89646),f=n(325),v=n(2652),x=n(46424),g=n(32030),y=n(14156),w=n(79082),j=n(12436),E=n(47072),b=n(69305),k=n(4735),T=n(32289),C=u.ZP.div.withConfig({displayName:"CellTruncationProvider__OverflowFade",componentId:"izjhhp-0"})(["position:absolute;bottom:0;left:0;right:0;height:40px;user-select:none;pointer-events:none;background:linear-gradient(to bottom,rgba(245,248,250,0) 0%,rgba(245,248,250,255) 100%);"]),S=u.ZP.div.withConfig({displayName:"CellTruncationProvider__OverflowButtonContainer",componentId:"izjhhp-1"})(["position:absolute;bottom:6px;left:0;right:0;display:flex;flex-direction:row;justify-content:center;"]),N=u.ZP.button.withConfig({displayName:"CellTruncationProvider__OverflowButton",componentId:"izjhhp-2"})(["border:0;cursor:pointer;user-select:none;font-size:12px;font-weight:500;background:rgba(100,100,100,0.7);border-radius:4px;line-height:32px;padding:0 12px;color:",";&:hover{background:rgba(100,100,100,0.85);}&:focus,&:active{outline:none;}&:active{background:rgba(0,0,0,0.7);}"],h.w.White),R=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isOverflowing:!1},e.contentContainerRef=f.createRef(),e.onView=function(){var t=e.props.onExpand;t?t():e.defaultExpand()},e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.detectOverflow()}},{key:"componentDidUpdate",value:function(){this.detectOverflow()}},{key:"detectOverflow",value:function(){var e=this.contentContainerRef.current&&this.contentContainerRef.current.firstElementChild;if(e){var t="number"===typeof this.props.style.height&&e.scrollHeight>this.props.style.height;t!==this.state.isOverflowing&&this.setState({isOverflowing:t})}}},{key:"defaultExpand",value:function(){var e=this.contentContainerRef.current&&this.contentContainerRef.current.textContent;e&&(0,y._)({body:(0,T.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e})})}},{key:"render",value:function(){var e=(0,d.Z)((0,d.Z)({},this.props.style),{},{overflow:"hidden"});return(0,T.jsxs)("div",{style:e,children:[(0,T.jsx)("div",{ref:this.contentContainerRef,children:this.props.children}),(this.state.isOverflowing||this.props.forceExpandability)&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(C,{}),(0,T.jsx)(S,{children:(0,T.jsx)(N,{onClick:this.onView,children:"View full message"})})]})]})}}]),n}(f.Component),_=n(33650),I=n(54268),L=n(41332),Z=n.n(L),M=n(74549),O=n(27601),P=n(76341),D=n(39061),F=n(77171),A=n(1557),U=function(e){var t,n=e.node,r=e.metadata,i=(0,O.TH)(),s=n.eventType;switch(n.__typename){case"ExecutionStepFailureEvent":return(0,T.jsx)(V,{eventType:s,error:n.error,metadataEntries:null===n||void 0===n||null===(t=n.failureMetadata)||void 0===t?void 0:t.metadataEntries,errorSource:n.errorSource,message:n.error?void 0:n.message});case"ExecutionStepUpForRetryEvent":return(0,T.jsx)(K,{error:n.error,message:n.message});case"ExecutionStepStartEvent":if(!n.stepKey||r.logCaptureSteps)return(0,T.jsx)(z,{message:n.message,eventType:s});var o=Z().parse(i.search),a=(0,d.Z)((0,d.Z)({},o),{},{logType:"stdout",logs:"query:".concat(n.stepKey),selection:n.stepKey}),l="".concat(i.pathname,"?").concat(Z().stringify(a));return(0,T.jsx)(z,{message:n.message,eventType:s,children:(0,T.jsx)(k.Ij,{rows:[{label:"step_logs",item:(0,T.jsx)(M.rU,{to:l,style:{color:"inherit"},children:"View Raw Step Output"})}]})});case"ExecutionStepSkippedEvent":return(0,T.jsx)(z,{message:n.message,eventType:s,eventColor:"rgba(173, 185, 152, 0.3)"});case"ExecutionStepRestartEvent":case"RunStartEvent":case"RunEnqueuedEvent":case"RunDequeuedEvent":case"RunStartingEvent":case"RunCancelingEvent":case"ResourceInitStartedEvent":case"ResourceInitSuccessEvent":case"StepWorkerStartedEvent":case"StepWorkerStartingEvent":return(0,T.jsx)(z,{message:n.message,eventType:s});case"ExecutionStepSuccessEvent":case"RunSuccessEvent":return(0,T.jsx)(z,{message:n.message,eventType:s,eventIntent:"success"});case"ExecutionStepInputEvent":return(0,T.jsx)(z,{message:n.message+(n.typeCheck.description?" "+n.typeCheck.description:""),eventType:s,eventIntent:n.typeCheck.success?"success":"warning",children:(0,T.jsx)(k.gD,{entries:n.typeCheck.metadataEntries})});case"ExecutionStepOutputEvent":return(0,T.jsx)(z,{message:n.message+(n.typeCheck.description?" "+n.typeCheck.description:""),eventType:s,eventIntent:n.typeCheck.success?"success":"warning",children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.gD,{entries:n.typeCheck.metadataEntries}),(0,T.jsx)(k.gD,{entries:n.metadataEntries})]})});case"StepExpectationResultEvent":return(0,T.jsx)(z,{message:n.message,eventType:s,eventIntent:n.expectationResult.success?"success":"warning",children:(0,T.jsx)(k.gD,{entries:n.expectationResult.metadataEntries})});case"MaterializationEvent":return(0,T.jsx)(G,{message:n.message,assetKey:n.assetKey,metadataEntries:n.metadataEntries,eventType:s,timestamp:n.timestamp});case"ObservationEvent":return(0,T.jsx)(G,{message:"",assetKey:n.assetKey,metadataEntries:n.metadataEntries,eventType:s,timestamp:n.timestamp});case"AssetMaterializationPlannedEvent":case"HookCompletedEvent":case"HookSkippedEvent":case"AlertStartEvent":case"AlertSuccessEvent":return(0,T.jsx)(z,{eventType:s,message:n.message});case"ObjectStoreOperationEvent":return(0,T.jsx)(z,{message:n.message,eventType:s,children:(0,T.jsx)(k.gD,{entries:n.operationResult.metadataEntries})});case"HandledOutputEvent":case"LoadedInputEvent":return(0,T.jsx)(z,{message:n.message,eventType:s,children:(0,T.jsx)(k.gD,{entries:n.metadataEntries})});case"HookErroredEvent":return(0,T.jsx)(V,{eventType:s,error:n.error});case"AlertFailureEvent":return(0,T.jsx)(z,{eventType:s,message:n.message,eventIntent:"warning"});case"ResourceInitFailureEvent":case"RunFailureEvent":return n.error?(0,T.jsx)(V,{message:n.message,error:n.error,eventType:s}):(0,T.jsx)(z,{message:n.message,eventType:s,eventIntent:"danger"});case"RunCanceledEvent":return(0,T.jsx)(V,{message:n.message,eventType:s});case"EngineEvent":return n.error?(0,T.jsx)(V,{message:n.message,error:n.error,eventType:s}):(0,T.jsx)(z,{message:n.message,eventType:s,eventColor:"rgba(27,164,206,0.2)",children:(0,T.jsx)(k.gD,{entries:n.metadataEntries})});case"LogMessageEvent":return(0,T.jsx)(z,{message:n.message});case"LogsCapturedEvent":var c=Z().parse(i.search,{ignoreQueryPrefix:!0}),u=(0,d.Z)((0,d.Z)({},c),{},{logType:"stdout",logFileKey:n.stepKey}),p="".concat(i.pathname,"?").concat(Z().stringify(u)),h=(0,T.jsx)(M.rU,{to:p,style:{color:"inherit"},children:"View stdout / stderr"}),m=n.stepKey?[{label:"captured_logs",item:h}]:[{label:"step_keys",item:(0,T.jsx)(T.Fragment,{children:JSON.stringify(n.stepKeys)})},{label:"captured_logs",item:h}];return(0,T.jsx)(z,{eventType:s,message:n.message,children:(0,T.jsx)(k.Ij,{rows:m})});default:return(0,P.UT)(n)}},z=function(e){var t=e.message,n=e.eventType,r=e.eventColor,i=e.eventIntent,s=e.children;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(_.qH,{children:n&&(0,T.jsx)(I.V,{intent:i,style:r?{fontSize:"0.9em",color:"black",background:r}:{fontSize:"0.9em"},children:(0,A.v)(n)})}),(0,T.jsxs)(g.x,{padding:{horizontal:12},style:{flex:1},children:[t,s]})]})},V=function(e){var t=e.message,n=e.error,r=e.errorSource,i=e.eventType,s=e.metadataEntries,o=null,a=null,l=null,c=null;return t&&(o=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{children:t}),(0,T.jsx)("br",{})]})),n&&(a=(0,T.jsx)("span",{style:{color:h.w.Red500},children:"".concat(n.message)}),!n.stack.length||r===b.zHr.USER_CODE_ERROR&&n.errorChain.length||(l=(0,T.jsx)("span",{style:{color:h.w.Red500},children:"\nStack Trace:\n".concat(n.stack)})),n.errorChain.length&&(c=n.errorChain.map((function(e,t){return(0,T.jsxs)(f.Fragment,{children:[e.isExplicitLink?"The above exception was caused by the following exception:\n":"The above exception occurred during handling of the following exception:\n",(0,T.jsx)("span",{style:{color:h.w.Red500},children:"".concat(e.error.message)}),e.error.stack.length?(0,T.jsx)("span",{style:{color:h.w.Red500},children:"\nStack Trace:\n".concat(e.error.stack)}):null]},t)})))),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(_.qH,{children:(0,T.jsx)(I.V,{minimal:!0,intent:"danger",children:(0,A.v)(i)})}),(0,T.jsxs)(g.x,{padding:{horizontal:12},style:{flex:1},children:[o,a,(0,T.jsx)(k.gD,{entries:s}),l,c]})]})},K=function(e){var t=e.message,n=e.error,r=null,i=null,s=null,o=null;return t&&(r=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("span",{children:t}),(0,T.jsx)("br",{})]})),n&&(n.errorChain.length?i=(0,T.jsx)(T.Fragment,{children:n.errorChain.map((function(e,t){return(0,T.jsxs)(f.Fragment,{children:[0===t?"The retry request was caused by the following exception:\n":"The above exception was caused by the following exception:\n",(0,T.jsx)("span",{style:{color:h.w.Red500},children:"".concat(e.error.message)}),(0,T.jsx)("span",{style:{color:h.w.Red500},children:"\nStack Trace:\n".concat(e.error.stack)})]},t)}))}):(s=(0,T.jsx)("span",{style:{color:h.w.Red500},children:"".concat(n.message)}),o=(0,T.jsx)("span",{style:{color:h.w.Red500},children:"\nStack Trace:\n".concat(n.stack)}))),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(_.qH,{children:(0,T.jsx)(I.V,{minimal:!0,intent:"warning",children:(0,A.v)(b.i36.STEP_UP_FOR_RETRY)})}),(0,T.jsxs)(g.x,{padding:{horizontal:12},style:{flex:1},children:[r,s,o,i]})]})},G=function(e){var t=e.message,n=e.assetKey,r=e.metadataEntries,i=e.eventType,s=e.timestamp;if(!n)return(0,T.jsx)(z,{message:t,eventType:i,children:(0,T.jsx)(k.gD,{entries:r})});var o=(0,F.p)(n,{asOf:s}),a=(0,T.jsxs)("span",{style:{marginLeft:10},children:["[",(0,T.jsx)(k.aw,{to:o,children:"View Asset"}),"]"]});return(0,T.jsx)(z,{message:t,eventType:i,children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.Ij,{styles:null!==r&&void 0!==r&&r.length?{paddingBottom:0}:{},rows:[{label:"asset_key",item:(0,T.jsxs)(T.Fragment,{children:[(0,D.ll)(n),a]})}]}),(0,T.jsx)(k.gD,{entries:r})]})})},H=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onExpand=function(){var t=e.props,n=t.node,r=t.metadata;"ExecutionStepFailureEvent"===n.__typename?(0,y._)({title:"Error",body:(0,T.jsx)(j.T,{error:n.error?n.error:n,failureMetadata:n.failureMetadata,errorSource:n.errorSource})}):"ExecutionStepUpForRetryEvent"===n.__typename?(0,y._)({title:"Step Retry",body:(0,T.jsx)(j.T,{error:n.error?n.error:n})}):"EngineEvent"===n.__typename&&n.error||"RunFailureEvent"===n.__typename&&n.error||"HookErroredEvent"===n.__typename||"ResourceInitFailureEvent"===n.__typename?(0,y._)({title:"Error",body:(0,T.jsx)(j.T,{error:n.error?n.error:n})}):(0,y._)({title:n.stepKey||"Info",body:(0,T.jsx)(_.Yw,{children:(0,T.jsx)(U,{node:n,metadata:r})})})},e}return(0,o.Z)(n,[{key:"render",value:function(){return(0,T.jsx)(R,{style:this.props.style,onExpand:this.onExpand,children:(0,T.jsx)(q,{node:this.props.node,metadata:this.props.metadata,highlighted:this.props.highlighted})})}}]),n}(f.Component),W=(0,p.Ps)(r||(r=(0,c.Z)(["\n  fragment LogsRowStructuredFragment on DagsterRunEvent {\n    __typename\n    ... on MessageEvent {\n      message\n      eventType\n      timestamp\n      level\n      stepKey\n    }\n    ... on DisplayableEvent {\n      label\n      description\n      metadataEntries {\n        ...MetadataEntryFragment\n      }\n    }\n    ... on MarkerEvent {\n      markerStart\n      markerEnd\n    }\n    ... on ErrorEvent {\n      error {\n        ...PythonErrorFragment\n      }\n    }\n    ... on MaterializationEvent {\n      assetKey {\n        path\n      }\n    }\n    ... on ObservationEvent {\n      assetKey {\n        path\n      }\n    }\n    ... on ExecutionStepFailureEvent {\n      errorSource\n      failureMetadata {\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on ExecutionStepInputEvent {\n      inputName\n      typeCheck {\n        label\n        description\n        success\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on ExecutionStepOutputEvent {\n      outputName\n      typeCheck {\n        label\n        description\n        success\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on StepExpectationResultEvent {\n      expectationResult {\n        success\n        label\n        description\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on ObjectStoreOperationEvent {\n      operationResult {\n        op\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n      }\n    }\n    ... on HandledOutputEvent {\n      outputName\n      managerKey\n    }\n    ... on LoadedInputEvent {\n      inputName\n      managerKey\n      upstreamOutputName\n      upstreamStepKey\n    }\n    ... on LogsCapturedEvent {\n      fileKey\n      stepKeys\n      externalUrl\n    }\n  }\n\n  ","\n  ","\n"])),k.it,w.B),q=f.memo((function(e){var t=e.node,n=e.metadata,r=e.highlighted,i=t.stepKey,s=i?n.steps[i]:null,o=null===s||void 0===s?void 0:s.start;return(0,T.jsxs)(_.X2,{level:b.ini.INFO,onMouseEnter:function(){return(0,E.kZ)(t.timestamp)},onMouseLeave:function(){return(0,E.kZ)(null)},highlighted:r,children:[(0,T.jsx)(_.pq,{time:"timestamp"in t?t.timestamp:null,runStartTime:n.startedPipelineAt,stepStartTime:o}),(0,T.jsx)(_.E6,{stepKey:"stepKey"in t&&t.stepKey}),(0,T.jsx)(_.Yw,{children:(0,T.jsx)(U,{node:t,metadata:n})})]})}));q.displayName="StructuredMemoizedContent";var X=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onExpand=function(){(0,y._)({title:"Log",body:(0,T.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:e.props.node.message})})},e}return(0,o.Z)(n,[{key:"render",value:function(){return(0,T.jsx)(R,{style:this.props.style,onExpand:this.onExpand,children:(0,T.jsx)(Y,{node:this.props.node,highlighted:this.props.highlighted,metadata:this.props.metadata})})}}]),n}(f.Component),B=(0,p.Ps)(i||(i=(0,c.Z)(["\n  fragment LogsRowUnstructuredFragment on DagsterRunEvent {\n    __typename\n    ... on MessageEvent {\n      message\n      timestamp\n      level\n      stepKey\n    }\n  }\n"]))),Y=f.memo((function(e){var t=e.node,n=e.highlighted,r=e.metadata,i=t.stepKey,s=i?r.steps[i]:null,o=null===s||void 0===s?void 0:s.start;return(0,T.jsxs)(_.X2,{level:t.level,onMouseEnter:function(){return(0,E.kZ)(t.timestamp)},onMouseLeave:function(){return(0,E.kZ)(null)},highlighted:n,children:[(0,T.jsx)(_.pq,{time:t.timestamp,runStartTime:r.startedPipelineAt,stepStartTime:o}),(0,T.jsx)(_.E6,{stepKey:t.stepKey}),(0,T.jsx)(_.qH,{children:(0,T.jsx)("span",{style:{marginLeft:8},children:t.level})}),(0,T.jsx)(g.x,{padding:{horizontal:12},style:{flex:1},children:t.message})]})}));Y.displayName="UnstructuredMemoizedContent";var Q,J=n(81912),$=n(98834);var ee=function(e){var t=e.filterKey,n=e.filterStepKeys,r=e.metadata,i=e.filter,s=e.logs,o=f.useRef(null);return(0,T.jsxs)(J.bu,{onWidthsChanged:function(){return o.current&&o.current.didResize()},children:[(0,T.jsx)(J.PM,{}),(0,T.jsx)("div",{style:{flex:1,minHeight:0,marginTop:-1},children:(0,T.jsx)(re,{children:function(e){var a=e.width,l=e.height;return(0,T.jsx)(ne,(0,d.Z)({width:a,height:l,ref:o,filterKey:t,loading:s.loading,metadata:r,focusedTime:i.focusedTime},function(e,t,n){var r=e.allNodes.filter((function(e){if("AssetMaterializationPlannedEvent"===e.__typename)return!1;var n=(0,$.m)(e);return!!t.levels[n]&&!(t.sinceTime&&Number(e.timestamp)<t.sinceTime)})),i=!(!t.logQuery.length||""===t.logQuery[0].value),s=i?r.filter((function(e){return t.logQuery.length>0&&t.logQuery.every((function(t){return"query"===t.token?e.stepKey&&n.includes(e.stepKey):"step"===t.token?e.stepKey&&e.stepKey===t.value:"type"===t.token?e.eventType&&t.value===(0,A.v)(e.eventType):e.message.toLowerCase().includes(t.value.toLowerCase())}))})):[];return{filteredNodes:i&&t.hideNonMatches?s:r,textMatchNodes:s}}(s,i,n)))}})})]})},te=(0,p.Ps)(Q||(Q=(0,c.Z)(["\n  fragment LogsScrollingTableMessageFragment on DagsterRunEvent {\n    __typename\n    ...LogsRowStructuredFragment\n    ...LogsRowUnstructuredFragment\n  }\n\n  ","\n  ","\n"])),W,B),ne=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).list=f.createRef(),e.cache=new x.t1({defaultHeight:30,fixedWidth:!0,keyMapper:function(t){return e.props.filteredNodes?e.props.filteredNodes[t].clientsideKey:""}}),e.isAtBottomOrZero=!0,e.scrollToBottomObserver=null,e.onScroll=function(t){var n=t.scrollTop,r=t.scrollHeight,i=t.clientHeight,s=0===n&&r<=i,o=r-i-n<5;e.isAtBottomOrZero=s||o},e.scrollToTime=function(t){if(e.props.filteredNodes&&e.list.current){e.isAtBottomOrZero=!1;var n={index:e.props.filteredNodes.findIndex((function(e){return Number(e.timestamp)>=t})),alignment:"center"};-1===n.index&&(n.index=e.props.filteredNodes.length-1);for(var r=0,i=0;r!==e.list.current.getOffsetForRow(n)&&(r=e.list.current.getOffsetForRow(n),e.list.current.scrollToPosition(r),!((i+=1)>20)););}},e.rowRenderer=function(t){var n,r=t.parent,i=t.index,s=t.style;if(e.props.filteredNodes){var o=e.props.filteredNodes[i],a=Number(o.timestamp)===e.props.focusedTime,l=!(null===(n=e.props.textMatchNodes)||void 0===n||!n.includes(o)),c=e.props.metadata;if(!o)return(0,T.jsx)("span",{});var u=i===e.props.filteredNodes.length-1?{borderBottom:"1px solid ".concat(h.w.Gray100)}:{};return(0,T.jsx)(x.Z8,{cache:e.cache,index:i,parent:r,children:"LogMessageEvent"===o.__typename?(0,T.jsx)(X,{node:o,metadata:c,style:(0,d.Z)((0,d.Z)({},s),{},{width:e.props.width},u),highlighted:l||a}):(0,T.jsx)(H,{node:o,metadata:c,style:(0,d.Z)((0,d.Z)({},s),{},{width:e.props.width},u),highlighted:l||a})},o.clientsideKey)}},e.noContentRenderer=function(){return e.props.filteredNodes?(0,T.jsx)(m.t,{icon:"no-results",title:"No logs to display"}):(0,T.jsx)("span",{})},e}return(0,o.Z)(n,[{key:"listEl",get:function(){var e=this.list.current&&v.findDOMNode(this.list.current);return e instanceof HTMLElement?e:null}},{key:"componentDidMount",value:function(){var e=this;this.attachScrollToBottomObserver(),this.props.focusedTime&&window.requestAnimationFrame((function(){e.scrollToTime(e.props.focusedTime)}))}},{key:"componentDidUpdate",value:function(e){var t,n,r=this;this.list.current&&(this.props.width!==e.width&&this.didResize(),this.props.filterKey!==e.filterKey&&this.list.current.recomputeGridSize(),this.props.focusedTime&&(null===(t=this.props.filteredNodes)||void 0===t?void 0:t.length)!==(null===(n=e.filteredNodes)||void 0===n?void 0:n.length)&&window.requestAnimationFrame((function(){r.scrollToTime(r.props.focusedTime)})))}},{key:"componentWillUnmount",value:function(){this.scrollToBottomObserver&&this.scrollToBottomObserver.disconnect()}},{key:"didResize",value:function(){this.cache.clearAll(),this.forceUpdate()}},{key:"attachScrollToBottomObserver",value:function(){var e=this,t=this.listEl;if(t){var n=null;this.scrollToBottomObserver=new MutationObserver((function(){var r=t.querySelector("[role=rowgroup]");r?r.style.height!==n&&e.isAtBottomOrZero&&(n=r.style.height,t.scrollTop=t.scrollHeight-t.clientHeight):n=null})),this.scrollToBottomObserver.observe(t,{attributes:!0,subtree:!0})}else console.warn("No container, LogsScrollingTable must render listEl")}},{key:"render",value:function(){var e=this.props,t=e.filteredNodes,n=e.height,r=e.loading,i=e.width;return(0,T.jsxs)("div",{children:[r?(0,T.jsx)(ie,{children:(0,T.jsx)(m.t,{icon:"spinner",title:"Fetching logs..."})}):null,(0,T.jsx)(x.aV,{ref:this.list,deferredMeasurementCache:this.cache,rowCount:(null===t||void 0===t?void 0:t.length)||0,noContentRenderer:this.noContentRenderer,rowHeight:this.cache.rowHeight,rowRenderer:this.rowRenderer,width:i,height:n,overscanRowCount:10,style:{paddingBottom:50},onScroll:this.onScroll})]})}}]),n}(f.Component),re=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={width:0,height:0},e.resizeObserver=void 0,e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.measure();var t=v.findDOMNode(this);if(t&&t instanceof HTMLElement&&"ResizeObserver"in window){var n=window.ResizeObserver;this.resizeObserver=new n((function(t){e.setState({width:t[0].contentRect.width,height:t[0].contentRect.height})})),this.resizeObserver.observe(t)}}},{key:"componentDidUpdate",value:function(){this.measure()}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect()}},{key:"measure",value:function(){var e=v.findDOMNode(this);e&&e instanceof HTMLElement&&(e.clientWidth===this.state.width&&e.clientHeight===this.state.height||this.setState({width:e.clientWidth,height:e.clientHeight}))}},{key:"render",value:function(){return(0,T.jsx)("div",{style:{width:"100%",height:"100%"},children:this.props.children(this.state)})}}]),n}(f.Component),ie=u.ZP.div.withConfig({displayName:"LogsScrollingTable__ListEmptyState",componentId:"sc-3re64b-0"})(["background-color:rgba(255,255,255,0.7);z-index:100;position:absolute;width:100%;height:calc(100% - 50px);"])},3148:function(e,t,n){n.d(t,{jT:function(){return j},EP:function(){return b},VM:function(){return k},NX:function(){return T}});var r=n(95764),i=n(16798),s=n(19065),o=n(75453),a=n(75497),l=n(6466),c=n(32030),d=n(325),u=n(13065),p=n(25496),h=n(63579),m=n(36523),f=n(40355),v=n(34653),x=n(28064),g=n(38568),y=n(52489),w=n(32289),j=function(e){var t=e.run,n=t.id,r=t.canTerminate,l=d.useState(!1),c=(0,s.Z)(l,2),p=c[0],h=c[1],m=d.useCallback((function(){return h(!1)}),[]),f=d.useCallback((function(e){var t=e.errors,r=n&&t[n];r&&"message"in r&&u.L.show({message:r.message,icon:"error",intent:"danger"})}),[n]);return n?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.zx,{icon:(0,w.jsx)(a.JO,{name:"cancel"}),intent:"danger",disabled:p,onClick:function(){return h(!0)},children:"Terminate"}),(0,w.jsx)(g.A,{isOpen:p,onClose:m,onComplete:f,selectedRuns:(0,i.Z)({},n,r)})]}):null};function E(e,t){var n=e.keys.map((function(e){var n;return e&&(null===(n=t.steps[e])||void 0===n?void 0:n.state)||f.TN.PREPARING}));return(0,r.Z)((0,r.Z)({},e),{},{present:e.keys.length>0,failed:e.keys.length&&n.includes(f.TN.FAILED),finished:n.every((function(e){return[f.TN.FAILED,f.TN.SUCCEEDED].includes(e)}))})}var b=function(e){return v.cv.has(e.status)},k=function(e){return e.executionPlan&&v.hd.has(e.status)},T=function(e){var t,n,r=e.metadata,i=e.graph,s=e.onLaunch,o=e.run,a=null===o||void 0===o||null===(t=o.executionPlan)||void 0===t?void 0:t.artifactsPersisted,d=(0,y.J)(o),u=E(e.selection,r),f=function(e,t,n){var r=e.tags.find((function(e){return e.key===x.H.StepSelection}));return r?E({keys:(0,p.V)(t,r.value).all.map((function(e){return e.name})),query:r.value},n):null}(o,i,r),g=null===(n=o.tags)||void 0===n?void 0:n.some((function(e){return e.key===x.H.IsResumeRetry&&"true"===e.value})),T={icon:"cached",scope:"*",title:"All steps in root run",tooltip:"Re-execute the pipeline run from scratch",disabled:!b(o),onClick:function(){return s({type:"all"})}},S={icon:"linear_scale",scope:(null===f||void 0===f?void 0:f.query)||"*",title:"Same steps",disabled:!f||!(f.finished||f.failed),tooltip:(0,w.jsxs)("div",{children:[f&&f.present?f.finished?"Re-execute the same step subset used for this run:":"Wait for all of the steps to finish to re-execute the same subset.":"Re-executes the same step subset used for this run if one was present.",(0,w.jsx)(C,{selection:f})]}),onClick:function(){return s({type:"selection",selection:f})}},N={icon:"op",scope:u.query,title:u.keys.length>1?"Selected steps":"Selected step",disabled:!u.present||!(u.finished||u.failed),tooltip:(0,w.jsxs)("div",{children:[u.present?u.finished?"Re-execute the selected steps with existing configuration:":"Wait for the steps to finish to re-execute them.":"Select a step or type a step subset to re-execute.",(0,w.jsx)(C,{selection:u})]}),onClick:function(){return s({type:"selection",selection:u})}},R={icon:"arrow_forward",title:"From selected",disabled:!b(o)||1!==u.keys.length,tooltip:"Re-execute the pipeline downstream from the selected steps",onClick:function(){if(!o.executionPlan)return console.warn("Run execution plan must be present to launch from-selected execution"),Promise.resolve();var e=u.keys.map((function(e){return"".concat(e,"*")})).join(","),t=(0,p.V)(i,e).all.map((function(e){return e.name}));return s({type:"selection",selection:{keys:t,query:e}})}},_=k(o),I={icon:"arrow_forward",title:"From failure",disabled:!_,tooltip:_?"Retry the pipeline run, skipping steps that completed successfully":"Retry is only enabled when the pipeline has failed.",onClick:function(){return s({type:"from-failure"})}};a||[N,S,I,R].forEach((function(e){e.disabled=!0,e.title="Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration."}));var L=[T,S,N,R,I],Z=u.present?N:_&&g?I:null!==f&&void 0!==f&&f.present?S:null,M=a&&Z?Z:T;return(0,w.jsxs)(l.Z,{direction:"row",spacing:8,children:[(0,w.jsx)(c.x,{flex:{direction:"row"},children:(0,w.jsx)(m.D,{runCount:1,primary:M,options:L,title:"*"===M.scope?"Re-execute all (*)":M.scope?"Re-execute (".concat(M.scope,")"):"Re-execute ".concat(M.title),tooltip:null!==d&&void 0!==d&&d.tooltip?null===d||void 0===d?void 0:d.tooltip:o.hasReExecutePermission?void 0:h.Qr,icon:null===d||void 0===d?void 0:d.icon,disabled:(null===d||void 0===d?void 0:d.disabled)||!o.hasReExecutePermission})}),v.cv.has(o.status)?null:(0,w.jsx)(j,{run:o})]})},C=function(e){var t=e.selection;return(0,w.jsx)("div",{style:{paddingLeft:"10px"},children:((null===t||void 0===t?void 0:t.keys)||[]).map((function(e){return(0,w.jsx)("span",{style:{display:"block"},children:"* ".concat(e)},e)}))})}},57876:function(e,t,n){n.d(t,{Z0:function(){return D},lc:function(){return U},Up:function(){return z},Ac:function(){return K}});var r,i=n(99500),s=n(16798),o=n(19065),a=n(922),l=n(3159),c=n(7838),d=n(57753),u=n(6466),p=n(75497),h=n(11831),m=n(75453),f=n(762),v=n(8412),x=n(8358),g=n(32030),y=n(12745),w=n(24818),j=n(325),E=n(27601),b=n(52848),k=n(13065),T=n(9429),C=n(69305),S=n(35001),N=n(68156),R=n(28797),_=n(25582),I=n(72441),L=n(80342),Z=n(55752),M=n(38568),O=n(32460),P=n(32289),D=function(e){switch(e){case C.VOA.QUEUED:return"Queued";case C.VOA.CANCELED:return"Canceled";case C.VOA.CANCELING:return"Canceling\u2026";case C.VOA.FAILURE:return"Failed";case C.VOA.NOT_STARTED:return"Waiting to start\u2026";case C.VOA.STARTED:return"Started\u2026";case C.VOA.STARTING:return"Starting\u2026";case C.VOA.SUCCESS:return"Succeeded";default:return"None"}},F=function(e){var t=e.loading,n=e.children;return t?(0,P.jsx)("div",{style:{color:c.w.Gray400},children:"Loading\u2026"}):(0,P.jsx)("div",{children:n()})},A={showSeconds:!0,showTimezone:!1},U=function(e){var t=e.loading,n=e.run;return(0,P.jsx)(d.nZ,{spacing:0,rows:[{key:"Started",value:(0,P.jsx)(F,{loading:t,children:function(){return null!==n&&void 0!==n&&n.startTime?(0,P.jsx)(N.v,{timestamp:n.startTime,timeFormat:A}):(0,P.jsx)("div",{style:{color:c.w.Gray400},children:D(null===n||void 0===n?void 0:n.status)})}})},{key:"Ended",value:(0,P.jsx)(F,{loading:t,children:function(){return null!==n&&void 0!==n&&n.endTime?(0,P.jsx)(N.v,{timestamp:n.endTime,timeFormat:A}):(0,P.jsx)("div",{style:{color:c.w.Gray400},children:D(null===n||void 0===n?void 0:n.status)})}})},{key:"Duration",value:(0,P.jsx)(F,{loading:t,children:function(){return null!==n&&void 0!==n&&n.startTime?(0,P.jsx)(O.Q,{startUnix:n.startTime,endUnix:n.endTime}):(0,P.jsx)("div",{style:{color:c.w.Gray400},children:D(null===n||void 0===n?void 0:n.status)})}})}]})},z=function(e){var t,n,r=e.run,i=e.isJob,a=r.runConfigYaml,l=j.useState(null),d=(0,o.Z)(l,2),C=d[0],N=d[1],O=j.useContext(b.I).rootServerURI,D=j.useContext(Z.Lw).refetch,F=(0,T.m)(),A=(0,E.k6)(),U=(0,_.$O)({id:r.id,repositoryName:null===(t=r.repositoryOrigin)||void 0===t?void 0:t.repositoryName,repositoryLocationName:null===(n=r.repositoryOrigin)||void 0===n?void 0:n.repositoryLocationName,pipelineName:r.pipelineName,isJob:i});return(0,P.jsxs)("div",{children:[(0,P.jsxs)(u.Z,{direction:"row",spacing:8,children:[r.hasReExecutePermission?(0,P.jsx)(R.A,{icon:(0,P.jsx)(p.JO,{name:"edit"}),to:U,children:"Open in Launchpad"}):(0,P.jsx)(h.u,{content:S.U,useDisabledButtonTooltipFix:!0,children:(0,P.jsx)(m.zx,{icon:(0,P.jsx)(p.JO,{name:"edit"}),disabled:!0,children:"Open in Launchpad"})}),(0,P.jsx)(m.zx,{icon:(0,P.jsx)(p.JO,{name:"tag"}),onClick:function(){return N("config")},children:"View tags and config"}),(0,P.jsx)(f.J,{position:"bottom-right",content:(0,P.jsxs)(v.v2,{children:[(0,P.jsx)(h.u,{content:"Loadable in dagit-debug",position:"left",targetTagName:"div",children:(0,P.jsx)(v.sN,{text:"Download debug file",icon:(0,P.jsx)(p.JO,{name:"download_for_offline"}),onClick:function(){return window.open("".concat(O,"/download_debug/").concat(r.runId))}})}),r.hasDeletePermission?(0,P.jsx)(v.sN,{icon:"delete",text:"Delete",intent:"danger",onClick:function(){return N("delete")}}):null]}),children:(0,P.jsx)(m.zx,{icon:(0,P.jsx)(p.JO,{name:"expand_more"})})})]}),(0,P.jsx)(x.Vq,{isOpen:"config"===C,onClose:function(){return N(null)},style:{width:"90vw",maxWidth:"1000px",minWidth:"600px",height:"90vh",maxHeight:"1000px",minHeight:"600px"},title:"Run configuration",children:(0,P.jsxs)(g.x,{flex:{direction:"column"},style:{flex:1,overflow:"hidden"},children:[(0,P.jsxs)(g.x,{flex:{direction:"column",gap:20},style:{flex:1,overflow:"hidden"},children:[(0,P.jsxs)(g.x,{flex:{direction:"column",gap:12},padding:{top:16,horizontal:24},children:[(0,P.jsx)(y.pm,{children:"Tags"}),(0,P.jsx)("div",{children:(0,P.jsx)(L.Q,{tags:r.tags,mode:i?null:r.mode})})]}),(0,P.jsxs)(g.x,{flex:{direction:"column"},style:{flex:1,overflow:"hidden"},children:[(0,P.jsx)(g.x,{border:{side:"bottom",width:1,color:c.w.KeylineGray},padding:{left:24,bottom:16},children:(0,P.jsx)(y.pm,{children:"Config"})}),(0,P.jsx)(V,{children:(0,P.jsx)(w.NU,{value:a,options:{lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})})]})]}),(0,P.jsxs)(x.cN,{topBorder:!0,children:[(0,P.jsx)(m.zx,{onClick:function(){return F(a),void k.L.show({intent:"success",icon:"copy_to_clipboard_done",message:"Copied!"})},intent:"none",children:"Copy config"}),(0,P.jsx)(m.zx,{onClick:function(){return N(null)},intent:"primary",children:"OK"})]})]})}),r.hasDeletePermission?(0,P.jsx)(I.N,{isOpen:"delete"===C,onClose:function(){return N(null)},onComplete:function(){r.repositoryOrigin?A.push((0,_.jT)({repoName:r.repositoryOrigin.repositoryName,repoLocation:r.repositoryOrigin.repositoryLocationName,pipelineName:r.pipelineName,isJob:i,path:"/runs"})):N(null)},onTerminateInstead:function(){return N("terminate")},selectedRuns:(0,s.Z)({},r.id,r.canTerminate)}):null,r.hasTerminatePermission?(0,P.jsx)(M.A,{isOpen:"terminate"===C,onClose:function(){return N(null)},onComplete:function(){D()},selectedRuns:(0,s.Z)({},r.id,r.canTerminate)}):null]})},V=a.ZP.div.withConfig({displayName:"RunDetails__CodeMirrorContainer",componentId:"sc-1y6moeh-0"})(["flex:1;overflow:hidden;.react-codemirror2,.CodeMirror{height:100%;}"]),K=(0,l.Ps)(r||(r=(0,i.Z)(["\n  fragment RunDetailsFragment on Run {\n    id\n    startTime\n    endTime\n    status\n  }\n"])))},92497:function(e,t,n){n.d(t,{J3:function(){return p},$K:function(){return h},tQ:function(){return m}});var r,i,s,o=n(99500),a=n(3159),l=n(41302),c=n(12244),d=n(57876),u=n(40355),p=(0,a.Ps)(r||(r=(0,o.Z)(["\n  fragment RunFragment on Run {\n    id\n    runConfigYaml\n    runId\n    canTerminate\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    hasReExecutePermission\n    hasTerminatePermission\n    hasDeletePermission\n    status\n    mode\n    tags {\n      key\n      value\n    }\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    rootRunId\n    parentRunId\n    pipelineName\n    solidSelection\n    assetSelection {\n      ... on AssetKey {\n        path\n      }\n    }\n    pipelineSnapshotId\n    executionPlan {\n      artifactsPersisted\n      ...ExecutionPlanToGraphFragment\n    }\n    stepKeysToExecute\n    updateTime\n    stepStats {\n      stepKey\n      status\n      startTime\n      endTime\n      attempts {\n        startTime\n        endTime\n      }\n      markers {\n        startTime\n        endTime\n      }\n    }\n    ...RunDetailsFragment\n  }\n\n  ","\n  ","\n"])),l.$,d.Ac),h=(0,a.Ps)(i||(i=(0,o.Z)(["\n  fragment RunDagsterRunEventFragment on DagsterRunEvent {\n    ... on MessageEvent {\n      message\n      timestamp\n      level\n      stepKey\n    }\n\n    ...LogsScrollingTableMessageFragment\n    ...RunMetadataProviderMessageFragment\n  }\n\n  ","\n  ","\n"])),c.x,u.Nb),m=(0,a.Ps)(s||(s=(0,o.Z)(["\n  fragment RunPageFragment on Run {\n    id\n    parentPipelineSnapshotId\n    ...RunFragment\n  }\n\n  ","\n"])),p)},1557:function(e,t,n){n.d(t,{v:function(){return c},m:function(){return d}});var r=n(13816),i=n.n(r),s=n(58891),o=n.n(s),a=n(69305),l=i()((function(){return o()(Object.values(a.i36).map(c)).sort()})),c=function(e){switch(e){case a.i36.PIPELINE_STARTING:return a.i36.RUN_STARTING;case a.i36.PIPELINE_ENQUEUED:return a.i36.RUN_ENQUEUED;case a.i36.PIPELINE_DEQUEUED:return a.i36.RUN_DEQUEUED;case a.i36.PIPELINE_STARTING:return a.i36.RUN_STARTING;case a.i36.PIPELINE_START:return a.i36.RUN_START;case a.i36.PIPELINE_SUCCESS:return a.i36.RUN_SUCCESS;case a.i36.PIPELINE_FAILURE:return a.i36.RUN_FAILURE;case a.i36.PIPELINE_CANCELING:return a.i36.RUN_CANCELING;case a.i36.PIPELINE_CANCELED:return a.i36.RUN_CANCELED;default:return e}},d=i()((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[{token:"step",values:function(){return e}},{token:"type",values:l},{token:"query",values:function(){return[]}}]}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return JSON.stringify(e)}))},98834:function(e,t,n){n.d(t,{m:function(){return i}});var r=n(6527),i=function(e){return"LogMessageEvent"===e.__typename?e.level:r.i.EVENT}},79580:function(e,t,n){n.d(t,{W:function(){return h}});var r=n(85358),i=n(19065),s=n(95550),o=n.n(s),a=n(49148),l=n(325),c=n(27601),d=n(25429),u=n(39956),p=n(55752),h=function(e){var t=(0,c.k6)(),n=(0,a.D)(p.kO),s=(0,i.Z)(n,1)[0],h=(0,u.n)(e);return l.useCallback(function(){var n=(0,r.Z)(o().mark((function n(r){var i,a,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&e.pipelineSnapshotId&&h){n.next=2;break}return n.abrupt("return");case 2:return i=(0,p.kz)({run:e,style:r,repositoryLocationName:h.match.repositoryLocation.name,repositoryName:h.match.repository.name}),n.prev=3,n.next=6,s({variables:i});case 6:l=n.sent,(0,p.lF)(e.pipelineName,null===(a=l.data)||void 0===a?void 0:a.launchPipelineReexecution,t,{preserveQuerystring:!0,behavior:"open"}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),(0,d.t)(n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[t,s,h,e])}}}]);
//# sourceMappingURL=881.8734739e.chunk.js.map